import{i as Er,n as C0,r as Ne,o as jn,w as ca,H as B0,I as rr,F as la,d as Ge,c as _e,p as zu,z as fa,a as ha,b as wn,e as yn,f as _s,J as M0,K as S0,L as T0,u as $0,g as as,j as _n,D as z0,M as I0,h as Iu,N as N0,G as q0,y as P0,O as O0,P as L0}from"./index-Dh388K6F.js";function V0(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}var Nu;let U0=Symbol("headlessui.useid"),R0=0;const da=(Nu=void 0)!=null?Nu:function(){return Er(U0,()=>`${++R0}`)()};function Jt(e){var t;if(e==null||e.value==null)return null;let n=(t=e.value.$el)!=null?t:e.value;return n instanceof Node?n:null}function vn(e,t,...n){if(e in t){let h=t[e];return typeof h=="function"?h(...n):h}let u=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(h=>`"${h}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(u,vn),u}var j0=Object.defineProperty,G0=(e,t,n)=>t in e?j0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qu=(e,t,n)=>(G0(e,typeof t!="symbol"?t+"":t,n),n);let H0=class{constructor(){qu(this,"current",this.detect()),qu(this,"currentId",0)}set(t){this.current!==t&&(this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},Z0=new H0;function ms(e){if(Z0.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e!=null&&e.hasOwnProperty("value")){let t=Jt(e);if(t)return t.ownerDocument}return document}let os=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Le=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Le||{}),Kn=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Kn||{}),W0=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(W0||{});function pa(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(os)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Y0=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Y0||{});function X0(e,t=0){var n;return e===((n=ms(e))==null?void 0:n.body)?!1:vn(t,{0(){return e.matches(os)},1(){let u=e;for(;u!==null;){if(u.matches(os))return!0;u=u.parentElement}return!1}})}function k1(e){let t=ms(e);C0(()=>{t&&!X0(t.activeElement,0)&&Q0(e)})}var J0=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(J0||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Q0(e){e==null||e.focus({preventScroll:!0})}let K0=["textarea","input"].join(",");function tl(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,K0))!=null?n:!1}function Vn(e,t=n=>n){return e.slice().sort((n,u)=>{let h=t(n),_=t(u);if(h===null||_===null)return 0;let b=h.compareDocumentPosition(_);return b&Node.DOCUMENT_POSITION_FOLLOWING?-1:b&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function E1(e,t){return gn(pa(),t,{relativeTo:e})}function gn(e,t,{sorted:n=!0,relativeTo:u=null,skipElements:h=[]}={}){var _;let b=(_=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e==null?void 0:e.ownerDocument)!=null?_:document,z=Array.isArray(e)?n?Vn(e):e:pa(e);h.length>0&&z.length>1&&(z=z.filter(rt=>!h.includes(rt))),u=u??b.activeElement;let P=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),j=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,z.indexOf(u))-1;if(t&4)return Math.max(0,z.indexOf(u))+1;if(t&8)return z.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),K=t&32?{preventScroll:!0}:{},Y=0,ut=z.length,et;do{if(Y>=ut||Y+ut<=0)return 0;let rt=j+Y;if(t&16)rt=(rt+ut)%ut;else{if(rt<0)return 3;if(rt>=ut)return 1}et=z[rt],et==null||et.focus(K),Y+=P}while(et!==b.activeElement);return t&6&&tl(et)&&et.select(),2}function Pu(e,t){if(e)return e;let n=t??"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function el(e,t){let n=Ne(Pu(e.value.type,e.value.as));return jn(()=>{n.value=Pu(e.value.type,e.value.as)}),ca(()=>{var u;n.value||Jt(t)&&Jt(t)instanceof HTMLButtonElement&&!((u=Jt(t))!=null&&u.hasAttribute("type"))&&(n.value="button")}),n}var is=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(is||{}),nl=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(nl||{});function Hn({visible:e=!0,features:t=0,ourProps:n,theirProps:u,...h}){var _;let b=Da(u,n),z=Object.assign(h,{props:b});if(e||t&2&&b.static)return ts(z);if(t&1){let P=(_=b.unmount)==null||_?0:1;return vn(P,{0(){return null},1(){return ts({...h,props:{...b,hidden:!0,style:{display:"none"}}})}})}return ts(z)}function ts({props:e,attrs:t,slots:n,slot:u,name:h}){var _,b;let{as:z,...P}=_a(e,["unmount","static"]),j=(_=n.default)==null?void 0:_.call(n,u),K={};if(u){let Y=!1,ut=[];for(let[et,rt]of Object.entries(u))typeof rt=="boolean"&&(Y=!0),rt===!0&&ut.push(et);Y&&(K["data-headlessui-state"]=ut.join(" "))}if(z==="template"){if(j=ga(j??[]),Object.keys(P).length>0||Object.keys(t).length>0){let[Y,...ut]=j??[];if(!rl(Y)||ut.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${h} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(P).concat(Object.keys(t)).map(M=>M.trim()).filter((M,Z,Q)=>Q.indexOf(M)===Z).sort((M,Z)=>M.localeCompare(Z)).map(M=>`  - ${M}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(M=>`  - ${M}`).join(`
`)].join(`
`));let et=Da((b=Y.props)!=null?b:{},P,K),rt=B0(Y,et,!0);for(let M in et)M.startsWith("on")&&(rt.props||(rt.props={}),rt.props[M]=et[M]);return rt}return Array.isArray(j)&&j.length===1?j[0]:j}return rr(z,Object.assign({},P,K),{default:()=>j})}function ga(e){return e.flatMap(t=>t.type===la?ga(t.children):[t])}function Da(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let u of e)for(let h in u)h.startsWith("on")&&typeof u[h]=="function"?(n[h]!=null||(n[h]=[]),n[h].push(u[h])):t[h]=u[h];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(u=>[u,void 0])));for(let u in n)Object.assign(t,{[u](h,..._){let b=n[u];for(let z of b){if(h instanceof Event&&h.defaultPrevented)return;z(h,..._)}}});return t}function _a(e,t=[]){let n=Object.assign({},e);for(let u of t)u in n&&delete n[u];return n}function rl(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}var ma=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(ma||{});let va=Ge({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(e,{slots:t,attrs:n}){return()=>{var u;let{features:h,..._}=e,b={"aria-hidden":(h&2)===2?!0:(u=_["aria-hidden"])!=null?u:void 0,hidden:(h&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(h&4)===4&&(h&2)!==2&&{display:"none"}}};return Hn({ourProps:b,theirProps:_,slot:{},attrs:n,slots:t,name:"Hidden"})}}});var Ve=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Ve||{});let sl=Ge({props:{onFocus:{type:Function,required:!0}},setup(e){let t=Ne(!0);return()=>t.value?rr(va,{as:"button",type:"button",features:ma.Focusable,onFocus(n){n.preventDefault();let u,h=50;function _(){var b;if(h--<=0){u&&cancelAnimationFrame(u);return}if((b=e.onFocus)!=null&&b.call(e)){t.value=!1,cancelAnimationFrame(u);return}u=requestAnimationFrame(_)}u=requestAnimationFrame(_)}}):null}});var ul=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(ul||{}),al=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(al||{});let wa=Symbol("TabsContext");function ar(e){let t=Er(wa,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ar),n}return t}let vs=Symbol("TabsSSRContext"),F1=Ge({name:"TabGroup",emits:{change:e=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:t,attrs:n,emit:u}){var h;let _=Ne((h=e.selectedIndex)!=null?h:e.defaultIndex),b=Ne([]),z=Ne([]),P=_e(()=>e.selectedIndex!==null),j=_e(()=>P.value?e.selectedIndex:_.value);function K(M){var Z;let Q=Vn(Y.tabs.value,Jt),tt=Vn(Y.panels.value,Jt),lt=Q.filter(ht=>{var pt;return!((pt=Jt(ht))!=null&&pt.hasAttribute("disabled"))});if(M<0||M>Q.length-1){let ht=vn(_.value===null?0:Math.sign(M-_.value),{[-1]:()=>1,0:()=>vn(Math.sign(M),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),pt=vn(ht,{0:()=>Q.indexOf(lt[0]),1:()=>Q.indexOf(lt[lt.length-1])});pt!==-1&&(_.value=pt),Y.tabs.value=Q,Y.panels.value=tt}else{let ht=Q.slice(0,M),pt=[...Q.slice(M),...ht].find(jt=>lt.includes(jt));if(!pt)return;let st=(Z=Q.indexOf(pt))!=null?Z:Y.selectedIndex.value;st===-1&&(st=Y.selectedIndex.value),_.value=st,Y.tabs.value=Q,Y.panels.value=tt}}let Y={selectedIndex:_e(()=>{var M,Z;return(Z=(M=_.value)!=null?M:e.defaultIndex)!=null?Z:null}),orientation:_e(()=>e.vertical?"vertical":"horizontal"),activation:_e(()=>e.manual?"manual":"auto"),tabs:b,panels:z,setSelectedIndex(M){j.value!==M&&u("change",M),P.value||K(M)},registerTab(M){var Z;if(b.value.includes(M))return;let Q=b.value[_.value];if(b.value.push(M),b.value=Vn(b.value,Jt),!P.value){let tt=(Z=b.value.indexOf(Q))!=null?Z:_.value;tt!==-1&&(_.value=tt)}},unregisterTab(M){let Z=b.value.indexOf(M);Z!==-1&&b.value.splice(Z,1)},registerPanel(M){z.value.includes(M)||(z.value.push(M),z.value=Vn(z.value,Jt))},unregisterPanel(M){let Z=z.value.indexOf(M);Z!==-1&&z.value.splice(Z,1)}};zu(wa,Y);let ut=Ne({tabs:[],panels:[]}),et=Ne(!1);jn(()=>{et.value=!0}),zu(vs,_e(()=>et.value?null:ut.value));let rt=_e(()=>e.selectedIndex);return jn(()=>{fa([rt],()=>{var M;return K((M=e.selectedIndex)!=null?M:e.defaultIndex)},{immediate:!0})}),ca(()=>{if(!P.value||j.value==null||Y.tabs.value.length<=0)return;let M=Vn(Y.tabs.value,Jt);M.some((Z,Q)=>Jt(Y.tabs.value[Q])!==Jt(Z))&&Y.setSelectedIndex(M.findIndex(Z=>Jt(Z)===Jt(Y.tabs.value[j.value])))}),()=>{let M={selectedIndex:_.value};return rr(la,[b.value.length<=0&&rr(sl,{onFocus:()=>{for(let Z of b.value){let Q=Jt(Z);if((Q==null?void 0:Q.tabIndex)===0)return Q.focus(),!0}return!1}}),Hn({theirProps:{...n,..._a(e,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:M,slots:t,attrs:n,name:"TabGroup"})])}}}),x1=Ge({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:t,slots:n}){let u=ar("TabList");return()=>{let h={selectedIndex:u.selectedIndex.value},_={role:"tablist","aria-orientation":u.orientation.value};return Hn({ourProps:_,theirProps:e,slot:h,attrs:t,slots:n,name:"TabList"})}}}),C1=Ge({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:t,slots:n,expose:u}){var h;let _=(h=e.id)!=null?h:`headlessui-tabs-tab-${da()}`,b=ar("Tab"),z=Ne(null);u({el:z,$el:z}),jn(()=>b.registerTab(z)),ha(()=>b.unregisterTab(z));let P=Er(vs),j=_e(()=>{if(P.value){let tt=P.value.tabs.indexOf(_);return tt===-1?P.value.tabs.push(_)-1:tt}return-1}),K=_e(()=>{let tt=b.tabs.value.indexOf(z);return tt===-1?j.value:tt}),Y=_e(()=>K.value===b.selectedIndex.value);function ut(tt){var lt;let ht=tt();if(ht===Kn.Success&&b.activation.value==="auto"){let pt=(lt=ms(z))==null?void 0:lt.activeElement,st=b.tabs.value.findIndex(jt=>Jt(jt)===pt);st!==-1&&b.setSelectedIndex(st)}return ht}function et(tt){let lt=b.tabs.value.map(ht=>Jt(ht)).filter(Boolean);if(tt.key===Ve.Space||tt.key===Ve.Enter){tt.preventDefault(),tt.stopPropagation(),b.setSelectedIndex(K.value);return}switch(tt.key){case Ve.Home:case Ve.PageUp:return tt.preventDefault(),tt.stopPropagation(),ut(()=>gn(lt,Le.First));case Ve.End:case Ve.PageDown:return tt.preventDefault(),tt.stopPropagation(),ut(()=>gn(lt,Le.Last))}if(ut(()=>vn(b.orientation.value,{vertical(){return tt.key===Ve.ArrowUp?gn(lt,Le.Previous|Le.WrapAround):tt.key===Ve.ArrowDown?gn(lt,Le.Next|Le.WrapAround):Kn.Error},horizontal(){return tt.key===Ve.ArrowLeft?gn(lt,Le.Previous|Le.WrapAround):tt.key===Ve.ArrowRight?gn(lt,Le.Next|Le.WrapAround):Kn.Error}}))===Kn.Success)return tt.preventDefault()}let rt=Ne(!1);function M(){var tt;rt.value||(rt.value=!0,!e.disabled&&((tt=Jt(z))==null||tt.focus({preventScroll:!0}),b.setSelectedIndex(K.value),V0(()=>{rt.value=!1})))}function Z(tt){tt.preventDefault()}let Q=el(_e(()=>({as:e.as,type:t.type})),z);return()=>{var tt,lt;let ht={selected:Y.value,disabled:(tt=e.disabled)!=null?tt:!1},{...pt}=e,st={ref:z,onKeydown:et,onMousedown:Z,onClick:M,id:_,role:"tab",type:Q.value,"aria-controls":(lt=Jt(b.panels.value[K.value]))==null?void 0:lt.id,"aria-selected":Y.value,tabIndex:Y.value?0:-1,disabled:e.disabled?!0:void 0};return Hn({ourProps:st,theirProps:pt,slot:ht,attrs:t,slots:n,name:"Tab"})}}}),B1=Ge({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:n}){let u=ar("TabPanels");return()=>{let h={selectedIndex:u.selectedIndex.value};return Hn({theirProps:e,ourProps:{},slot:h,attrs:n,slots:t,name:"TabPanels"})}}}),M1=Ge({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(e,{attrs:t,slots:n,expose:u}){var h;let _=(h=e.id)!=null?h:`headlessui-tabs-panel-${da()}`,b=ar("TabPanel"),z=Ne(null);u({el:z,$el:z}),jn(()=>b.registerPanel(z)),ha(()=>b.unregisterPanel(z));let P=Er(vs),j=_e(()=>{if(P.value){let ut=P.value.panels.indexOf(_);return ut===-1?P.value.panels.push(_)-1:ut}return-1}),K=_e(()=>{let ut=b.panels.value.indexOf(z);return ut===-1?j.value:ut}),Y=_e(()=>K.value===b.selectedIndex.value);return()=>{var ut;let et={selected:Y.value},{tabIndex:rt,...M}=e,Z={ref:z,id:_,role:"tabpanel","aria-labelledby":(ut=Jt(b.tabs.value[K.value]))==null?void 0:ut.id,tabIndex:Y.value?rt:-1};return!Y.value&&e.unmount&&!e.static?rr(va,{as:"span","aria-hidden":!0,...Z}):Hn({ourProps:Z,theirProps:M,slot:et,attrs:t,slots:n,features:is.Static|is.RenderStrategy,visible:Y.value,name:"TabPanel"})}}});function ol(e,t){return wn(),yn("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 8.25H7.5a2.25 2.25 0 0 0-2.25 2.25v9a2.25 2.25 0 0 0 2.25 2.25h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25H15m0-3-3-3m0 0-3 3m3-3V15"})])}const ya=(e,t)=>e+t,ba=(e,t)=>e-t,Aa=(e,t)=>e*t,ka=(e,t)=>e/t,il={append:Aa,empty:()=>1},cl=function*(e){yield*e},ll=({append:e,empty:t})=>function*(n){let u=t();for(let h of n)yield u,u=e(u,h)},fl=function*(e,t){for(let n=0,u=0;n<e.length||u<t.length;){const h=e[n++];if(h!==void 0){yield h;continue}const _=t[u++];if(_!==void 0){yield _;continue}console.error("Ran out of values to combine.");break}},hl=e=>t=>t.map(e),dl=e=>e.length,pl=e=>Math.min(...e),gl=e=>pl(e.map(dl)),Dl=e=>(...t)=>Array.from({length:gl(t)},(n,u)=>e(...t.map(h=>h[u]))),_l=Dl,Ea=_l,ml=Ea(ya),vl=Ea(ba),wl=e=>(t,n)=>hl(u=>e(u,n))(t),Ou=wl(ka),yl=()=>[],bn=(e,t)=>Array.from({length:t},(n,u)=>e(u)),S1=(e,t)=>bn(()=>e,t),T1=(e,t)=>{const n=t-e;return bn(u=>e+u,n)},$1=(e,t,n)=>{const u=(t-e)/(n-1);return bn(h=>e+h*u,n)},bl=e=>t=>bn(n=>e==n?t:void 0,e+1),Al=({append:e,empty:t})=>n=>{let u=t();for(let h of n)u=e(u,h);return u},kl=e=>t=>Array.from(ll(e)(cl(t))),z1=kl(il),El=()=>({append:(e,t)=>e.flatMap(n=>t.map(u=>[...n,u])),empty:()=>[[]]}),I1=Al(El()),Fl=e=>Array.isArray(e)?e[0]:e,xl=(...e)=>yl().concat(...e);function Cl(e){return e!==void 0}const Lu=e=>t=>Cl(t)?e(t):void 0,Vu=(e,t)=>n=>t(e(n)),Me=(e,t)=>{const n=e,u=t;return n.inv=t,u.inv=e,n};Me.compose=(e,t)=>Me(Vu(e,t),Vu(t.inv,e.inv));Me.inverse=e=>Me(e.inv,e);Me.maybe=e=>Me(Lu(e),Lu(e.inv));const Bl=(e,t)=>Object.keys(e).reduce((n,u)=>(n[u]=t[u]??e[u],n),{});var Ml=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,Sl=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,Tl=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,es={Space_Separator:Ml,ID_Start:Sl,ID_Continue:Tl},Zt={isSpaceSeparator(e){return typeof e=="string"&&es.Space_Separator.test(e)},isIdStartChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="$"||e==="_"||es.ID_Start.test(e))},isIdContinueChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||e==="$"||e==="_"||e==="‌"||e==="‍"||es.ID_Continue.test(e))},isDigit(e){return typeof e=="string"&&/[0-9]/.test(e)},isHexDigit(e){return typeof e=="string"&&/[0-9A-Fa-f]/.test(e)}};let cs,Ee,Xe,yr,un,Ue,ie,ws,nr;var $l=function(t,n){cs=String(t),Ee="start",Xe=[],yr=0,un=1,Ue=0,ie=void 0,ws=void 0,nr=void 0;do ie=zl(),ql[Ee]();while(ie.type!=="eof");return typeof n=="function"?ls({"":nr},"",n):nr};function ls(e,t,n){const u=e[t];if(u!=null&&typeof u=="object")if(Array.isArray(u))for(let h=0;h<u.length;h++){const _=String(h),b=ls(u,_,n);b===void 0?delete u[_]:Object.defineProperty(u,_,{value:b,writable:!0,enumerable:!0,configurable:!0})}else for(const h in u){const _=ls(u,h,n);_===void 0?delete u[h]:Object.defineProperty(u,h,{value:_,writable:!0,enumerable:!0,configurable:!0})}return n.call(e,t,u)}let vt,Dt,tr,Ye,Ct;function zl(){for(vt="default",Dt="",tr=!1,Ye=1;;){Ct=Qe();const e=Fa[vt]();if(e)return e}}function Qe(){if(cs[yr])return String.fromCodePoint(cs.codePointAt(yr))}function H(){const e=Qe();return e===`
`?(un++,Ue=0):e?Ue+=e.length:Ue++,e&&(yr+=e.length),e}const Fa={default(){switch(Ct){case"	":case"\v":case"\f":case" ":case" ":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":H();return;case"/":H(),vt="comment";return;case void 0:return H(),Vt("eof")}if(Zt.isSpaceSeparator(Ct)){H();return}return Fa[Ee]()},comment(){switch(Ct){case"*":H(),vt="multiLineComment";return;case"/":H(),vt="singleLineComment";return}throw Ut(H())},multiLineComment(){switch(Ct){case"*":H(),vt="multiLineCommentAsterisk";return;case void 0:throw Ut(H())}H()},multiLineCommentAsterisk(){switch(Ct){case"*":H();return;case"/":H(),vt="default";return;case void 0:throw Ut(H())}H(),vt="multiLineComment"},singleLineComment(){switch(Ct){case`
`:case"\r":case"\u2028":case"\u2029":H(),vt="default";return;case void 0:return H(),Vt("eof")}H()},value(){switch(Ct){case"{":case"[":return Vt("punctuator",H());case"n":return H(),dn("ull"),Vt("null",null);case"t":return H(),dn("rue"),Vt("boolean",!0);case"f":return H(),dn("alse"),Vt("boolean",!1);case"-":case"+":H()==="-"&&(Ye=-1),vt="sign";return;case".":Dt=H(),vt="decimalPointLeading";return;case"0":Dt=H(),vt="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Dt=H(),vt="decimalInteger";return;case"I":return H(),dn("nfinity"),Vt("numeric",1/0);case"N":return H(),dn("aN"),Vt("numeric",NaN);case'"':case"'":tr=H()==='"',Dt="",vt="string";return}throw Ut(H())},identifierNameStartEscape(){if(Ct!=="u")throw Ut(H());H();const e=fs();switch(e){case"$":case"_":break;default:if(!Zt.isIdStartChar(e))throw Uu();break}Dt+=e,vt="identifierName"},identifierName(){switch(Ct){case"$":case"_":case"‌":case"‍":Dt+=H();return;case"\\":H(),vt="identifierNameEscape";return}if(Zt.isIdContinueChar(Ct)){Dt+=H();return}return Vt("identifier",Dt)},identifierNameEscape(){if(Ct!=="u")throw Ut(H());H();const e=fs();switch(e){case"$":case"_":case"‌":case"‍":break;default:if(!Zt.isIdContinueChar(e))throw Uu();break}Dt+=e,vt="identifierName"},sign(){switch(Ct){case".":Dt=H(),vt="decimalPointLeading";return;case"0":Dt=H(),vt="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Dt=H(),vt="decimalInteger";return;case"I":return H(),dn("nfinity"),Vt("numeric",Ye*(1/0));case"N":return H(),dn("aN"),Vt("numeric",NaN)}throw Ut(H())},zero(){switch(Ct){case".":Dt+=H(),vt="decimalPoint";return;case"e":case"E":Dt+=H(),vt="decimalExponent";return;case"x":case"X":Dt+=H(),vt="hexadecimal";return}return Vt("numeric",Ye*0)},decimalInteger(){switch(Ct){case".":Dt+=H(),vt="decimalPoint";return;case"e":case"E":Dt+=H(),vt="decimalExponent";return}if(Zt.isDigit(Ct)){Dt+=H();return}return Vt("numeric",Ye*Number(Dt))},decimalPointLeading(){if(Zt.isDigit(Ct)){Dt+=H(),vt="decimalFraction";return}throw Ut(H())},decimalPoint(){switch(Ct){case"e":case"E":Dt+=H(),vt="decimalExponent";return}if(Zt.isDigit(Ct)){Dt+=H(),vt="decimalFraction";return}return Vt("numeric",Ye*Number(Dt))},decimalFraction(){switch(Ct){case"e":case"E":Dt+=H(),vt="decimalExponent";return}if(Zt.isDigit(Ct)){Dt+=H();return}return Vt("numeric",Ye*Number(Dt))},decimalExponent(){switch(Ct){case"+":case"-":Dt+=H(),vt="decimalExponentSign";return}if(Zt.isDigit(Ct)){Dt+=H(),vt="decimalExponentInteger";return}throw Ut(H())},decimalExponentSign(){if(Zt.isDigit(Ct)){Dt+=H(),vt="decimalExponentInteger";return}throw Ut(H())},decimalExponentInteger(){if(Zt.isDigit(Ct)){Dt+=H();return}return Vt("numeric",Ye*Number(Dt))},hexadecimal(){if(Zt.isHexDigit(Ct)){Dt+=H(),vt="hexadecimalInteger";return}throw Ut(H())},hexadecimalInteger(){if(Zt.isHexDigit(Ct)){Dt+=H();return}return Vt("numeric",Ye*Number(Dt))},string(){switch(Ct){case"\\":H(),Dt+=Il();return;case'"':if(tr)return H(),Vt("string",Dt);Dt+=H();return;case"'":if(!tr)return H(),Vt("string",Dt);Dt+=H();return;case`
`:case"\r":throw Ut(H());case"\u2028":case"\u2029":Pl(Ct);break;case void 0:throw Ut(H())}Dt+=H()},start(){switch(Ct){case"{":case"[":return Vt("punctuator",H())}vt="value"},beforePropertyName(){switch(Ct){case"$":case"_":Dt=H(),vt="identifierName";return;case"\\":H(),vt="identifierNameStartEscape";return;case"}":return Vt("punctuator",H());case'"':case"'":tr=H()==='"',vt="string";return}if(Zt.isIdStartChar(Ct)){Dt+=H(),vt="identifierName";return}throw Ut(H())},afterPropertyName(){if(Ct===":")return Vt("punctuator",H());throw Ut(H())},beforePropertyValue(){vt="value"},afterPropertyValue(){switch(Ct){case",":case"}":return Vt("punctuator",H())}throw Ut(H())},beforeArrayValue(){if(Ct==="]")return Vt("punctuator",H());vt="value"},afterArrayValue(){switch(Ct){case",":case"]":return Vt("punctuator",H())}throw Ut(H())},end(){throw Ut(H())}};function Vt(e,t){return{type:e,value:t,line:un,column:Ue}}function dn(e){for(const t of e){if(Qe()!==t)throw Ut(H());H()}}function Il(){switch(Qe()){case"b":return H(),"\b";case"f":return H(),"\f";case"n":return H(),`
`;case"r":return H(),"\r";case"t":return H(),"	";case"v":return H(),"\v";case"0":if(H(),Zt.isDigit(Qe()))throw Ut(H());return"\0";case"x":return H(),Nl();case"u":return H(),fs();case`
`:case"\u2028":case"\u2029":return H(),"";case"\r":return H(),Qe()===`
`&&H(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw Ut(H());case void 0:throw Ut(H())}return H()}function Nl(){let e="",t=Qe();if(!Zt.isHexDigit(t)||(e+=H(),t=Qe(),!Zt.isHexDigit(t)))throw Ut(H());return e+=H(),String.fromCodePoint(parseInt(e,16))}function fs(){let e="",t=4;for(;t-- >0;){const n=Qe();if(!Zt.isHexDigit(n))throw Ut(H());e+=H()}return String.fromCodePoint(parseInt(e,16))}const ql={start(){if(ie.type==="eof")throw pn();ns()},beforePropertyName(){switch(ie.type){case"identifier":case"string":ws=ie.value,Ee="afterPropertyName";return;case"punctuator":_r();return;case"eof":throw pn()}},afterPropertyName(){if(ie.type==="eof")throw pn();Ee="beforePropertyValue"},beforePropertyValue(){if(ie.type==="eof")throw pn();ns()},beforeArrayValue(){if(ie.type==="eof")throw pn();if(ie.type==="punctuator"&&ie.value==="]"){_r();return}ns()},afterPropertyValue(){if(ie.type==="eof")throw pn();switch(ie.value){case",":Ee="beforePropertyName";return;case"}":_r()}},afterArrayValue(){if(ie.type==="eof")throw pn();switch(ie.value){case",":Ee="beforeArrayValue";return;case"]":_r()}},end(){}};function ns(){let e;switch(ie.type){case"punctuator":switch(ie.value){case"{":e={};break;case"[":e=[];break}break;case"null":case"boolean":case"numeric":case"string":e=ie.value;break}if(nr===void 0)nr=e;else{const t=Xe[Xe.length-1];Array.isArray(t)?t.push(e):Object.defineProperty(t,ws,{value:e,writable:!0,enumerable:!0,configurable:!0})}if(e!==null&&typeof e=="object")Xe.push(e),Array.isArray(e)?Ee="beforeArrayValue":Ee="beforePropertyName";else{const t=Xe[Xe.length-1];t==null?Ee="end":Array.isArray(t)?Ee="afterArrayValue":Ee="afterPropertyValue"}}function _r(){Xe.pop();const e=Xe[Xe.length-1];e==null?Ee="end":Array.isArray(e)?Ee="afterArrayValue":Ee="afterPropertyValue"}function Ut(e){return br(e===void 0?`JSON5: invalid end of input at ${un}:${Ue}`:`JSON5: invalid character '${xa(e)}' at ${un}:${Ue}`)}function pn(){return br(`JSON5: invalid end of input at ${un}:${Ue}`)}function Uu(){return Ue-=5,br(`JSON5: invalid identifier character at ${un}:${Ue}`)}function Pl(e){console.warn(`JSON5: '${xa(e)}' in strings is not valid ECMAScript; consider escaping`)}function xa(e){const t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[e])return t[e];if(e<" "){const n=e.charCodeAt(0).toString(16);return"\\x"+("00"+n).substring(n.length)}return e}function br(e){const t=new SyntaxError(e);return t.lineNumber=un,t.columnNumber=Ue,t}var Ol=function(t,n,u){const h=[];let _="",b,z,P="",j;if(n!=null&&typeof n=="object"&&!Array.isArray(n)&&(u=n.space,j=n.quote,n=n.replacer),typeof n=="function")z=n;else if(Array.isArray(n)){b=[];for(const M of n){let Z;typeof M=="string"?Z=M:(typeof M=="number"||M instanceof String||M instanceof Number)&&(Z=String(M)),Z!==void 0&&b.indexOf(Z)<0&&b.push(Z)}}return u instanceof Number?u=Number(u):u instanceof String&&(u=String(u)),typeof u=="number"?u>0&&(u=Math.min(10,Math.floor(u)),P="          ".substr(0,u)):typeof u=="string"&&(P=u.substr(0,10)),K("",{"":t});function K(M,Z){let Q=Z[M];switch(Q!=null&&(typeof Q.toJSON5=="function"?Q=Q.toJSON5(M):typeof Q.toJSON=="function"&&(Q=Q.toJSON(M))),z&&(Q=z.call(Z,M,Q)),Q instanceof Number?Q=Number(Q):Q instanceof String?Q=String(Q):Q instanceof Boolean&&(Q=Q.valueOf()),Q){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof Q=="string")return Y(Q);if(typeof Q=="number")return String(Q);if(typeof Q=="object")return Array.isArray(Q)?rt(Q):ut(Q)}function Y(M){const Z={"'":.1,'"':.2},Q={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let tt="";for(let ht=0;ht<M.length;ht++){const pt=M[ht];switch(pt){case"'":case'"':Z[pt]++,tt+=pt;continue;case"\0":if(Zt.isDigit(M[ht+1])){tt+="\\x00";continue}}if(Q[pt]){tt+=Q[pt];continue}if(pt<" "){let st=pt.charCodeAt(0).toString(16);tt+="\\x"+("00"+st).substring(st.length);continue}tt+=pt}const lt=j||Object.keys(Z).reduce((ht,pt)=>Z[ht]<Z[pt]?ht:pt);return tt=tt.replace(new RegExp(lt,"g"),Q[lt]),lt+tt+lt}function ut(M){if(h.indexOf(M)>=0)throw TypeError("Converting circular structure to JSON5");h.push(M);let Z=_;_=_+P;let Q=b||Object.keys(M),tt=[];for(const ht of Q){const pt=K(ht,M);if(pt!==void 0){let st=et(ht)+":";P!==""&&(st+=" "),st+=pt,tt.push(st)}}let lt;if(tt.length===0)lt="{}";else{let ht;if(P==="")ht=tt.join(","),lt="{"+ht+"}";else{let pt=`,
`+_;ht=tt.join(pt),lt=`{
`+_+ht+`,
`+Z+"}"}}return h.pop(),_=Z,lt}function et(M){if(M.length===0)return Y(M);const Z=String.fromCodePoint(M.codePointAt(0));if(!Zt.isIdStartChar(Z))return Y(M);for(let Q=Z.length;Q<M.length;Q++)if(!Zt.isIdContinueChar(String.fromCodePoint(M.codePointAt(Q))))return Y(M);return M}function rt(M){if(h.indexOf(M)>=0)throw TypeError("Converting circular structure to JSON5");h.push(M);let Z=_;_=_+P;let Q=[];for(let lt=0;lt<M.length;lt++){const ht=K(String(lt),M);Q.push(ht!==void 0?ht:"null")}let tt;if(Q.length===0)tt="[]";else if(P==="")tt="["+Q.join(",")+"]";else{let lt=`,
`+_,ht=Q.join(lt);tt=`[
`+_+ht+`,
`+Z+"]"}return h.pop(),_=Z,tt}};const Ll={parse:$l,stringify:Ol};var Ca=Ll;const Vl=({reviver:e}={})=>t=>Ca.parse(t,e),Ul=({replacer:e,space:t}={})=>n=>Ca.stringify(n,e,t),Rl=e=>Me(Vl(e),Ul(e)),Ba=e=>btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),Ma=e=>atob(e.replace(/-/g,"+").replace(/_/g,"/"));Me(Ba,Ma);const jl=Me(Ma,Ba),Gl=Me(e=>Fl(e)??void 0,e=>e??null),Ru=Me.compose(Gl,Me.maybe(jl));function Hl(e,t){const n=S0(),u=_e(()=>{const _=window.location.origin,b=window.location.pathname,z=t.inv(e.value);return _+b+"#"+n.path+"?"+T0(z)}),{copy:h}=M0({source:u});return fa(()=>n.query,_=>{const b=t(_);b&&(e.value=Bl(e.value,b))},{immediate:!0}),{copy:h,source:u}}const N1=Ge({__name:"ShareLinkButton",props:{modelValue:{}},emits:["update:modelValue"],setup(e,{emit:t}){const h=$0(e,"modelValue",t),_=Me.maybe(Rl()),{copy:b}=Hl(h,Me(({state:z})=>_(Ru(z)),z=>({state:Ru.inv(_.inv(z))})));return(z,P)=>(wn(),yn("button",{class:"rounded-lg p-2",type:"button",onClick:P[0]||(P[0]=j=>_n(b)())},[as(_n(ol),{class:"w-5 h-5"})]))}});function Zl(e,t){return wn(),yn("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_s("path",{"fill-rule":"evenodd",d:"M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z","clip-rule":"evenodd"})])}function Wl(e,t){return wn(),yn("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_s("path",{d:"M12 2.25a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75ZM7.5 12a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM18.894 6.166a.75.75 0 0 0-1.06-1.06l-1.591 1.59a.75.75 0 1 0 1.06 1.061l1.591-1.59ZM21.75 12a.75.75 0 0 1-.75.75h-2.25a.75.75 0 0 1 0-1.5H21a.75.75 0 0 1 .75.75ZM17.834 18.894a.75.75 0 0 0 1.06-1.06l-1.59-1.591a.75.75 0 1 0-1.061 1.06l1.59 1.591ZM12 18a.75.75 0 0 1 .75.75V21a.75.75 0 0 1-1.5 0v-2.25A.75.75 0 0 1 12 18ZM7.758 17.303a.75.75 0 0 0-1.061-1.06l-1.591 1.59a.75.75 0 0 0 1.06 1.061l1.591-1.59ZM6 12a.75.75 0 0 1-.75.75H3a.75.75 0 0 1 0-1.5h2.25A.75.75 0 0 1 6 12ZM6.697 7.757a.75.75 0 0 0 1.06-1.06l-1.59-1.591a.75.75 0 0 0-1.061 1.06l1.59 1.591Z"})])}const q1=Ge({__name:"ToggleDarkButton",setup(e){const t=z0(),n=I0(t);return(u,h)=>(wn(),yn("button",{class:"rounded-lg p-2",type:"button",onClick:h[0]||(h[0]=_=>_n(n)())},[as(_n(Zl),{class:Iu(["w-5 h-5",[_n(t)?"hidden":"visible"]])},null,8,["class"]),as(_n(Wl),{class:Iu(["w-5 h-5",[_n(t)?"visible":"hidden"]])},null,8,["class"])]))}});function Yl(e,t){return class extends e{constructor(...n){super(...n),t(this)}}}const Xl=Yl(Array,e=>e.fill(0));let wt=1e-6;function Jl(e){function t(r=0,p=0){const a=new e(2);return r!==void 0&&(a[0]=r,p!==void 0&&(a[1]=p)),a}const n=t;function u(r,p,a){const c=a??new e(2);return c[0]=r,c[1]=p,c}function h(r,p){const a=p??new e(2);return a[0]=Math.ceil(r[0]),a[1]=Math.ceil(r[1]),a}function _(r,p){const a=p??new e(2);return a[0]=Math.floor(r[0]),a[1]=Math.floor(r[1]),a}function b(r,p){const a=p??new e(2);return a[0]=Math.round(r[0]),a[1]=Math.round(r[1]),a}function z(r,p=0,a=1,c){const m=c??new e(2);return m[0]=Math.min(a,Math.max(p,r[0])),m[1]=Math.min(a,Math.max(p,r[1])),m}function P(r,p,a){const c=a??new e(2);return c[0]=r[0]+p[0],c[1]=r[1]+p[1],c}function j(r,p,a,c){const m=c??new e(2);return m[0]=r[0]+p[0]*a,m[1]=r[1]+p[1]*a,m}function K(r,p){const a=r[0],c=r[1],m=p[0],C=p[1],V=Math.sqrt(a*a+c*c),g=Math.sqrt(m*m+C*C),v=V*g,x=v&&we(r,p)/v;return Math.acos(x)}function Y(r,p,a){const c=a??new e(2);return c[0]=r[0]-p[0],c[1]=r[1]-p[1],c}const ut=Y;function et(r,p){return Math.abs(r[0]-p[0])<wt&&Math.abs(r[1]-p[1])<wt}function rt(r,p){return r[0]===p[0]&&r[1]===p[1]}function M(r,p,a,c){const m=c??new e(2);return m[0]=r[0]+a*(p[0]-r[0]),m[1]=r[1]+a*(p[1]-r[1]),m}function Z(r,p,a,c){const m=c??new e(2);return m[0]=r[0]+a[0]*(p[0]-r[0]),m[1]=r[1]+a[1]*(p[1]-r[1]),m}function Q(r,p,a){const c=a??new e(2);return c[0]=Math.max(r[0],p[0]),c[1]=Math.max(r[1],p[1]),c}function tt(r,p,a){const c=a??new e(2);return c[0]=Math.min(r[0],p[0]),c[1]=Math.min(r[1],p[1]),c}function lt(r,p,a){const c=a??new e(2);return c[0]=r[0]*p,c[1]=r[1]*p,c}const ht=lt;function pt(r,p,a){const c=a??new e(2);return c[0]=r[0]/p,c[1]=r[1]/p,c}function st(r,p){const a=p??new e(2);return a[0]=1/r[0],a[1]=1/r[1],a}const jt=st;function Ft(r,p,a){const c=a??new e(3),m=r[0]*p[1]-r[1]*p[0];return c[0]=0,c[1]=0,c[2]=m,c}function we(r,p){return r[0]*p[0]+r[1]*p[1]}function Wt(r){const p=r[0],a=r[1];return Math.sqrt(p*p+a*a)}const Fe=Wt;function kt(r){const p=r[0],a=r[1];return p*p+a*a}const zt=kt;function mt(r,p){const a=r[0]-p[0],c=r[1]-p[1];return Math.sqrt(a*a+c*c)}const Se=mt;function le(r,p){const a=r[0]-p[0],c=r[1]-p[1];return a*a+c*c}const xe=le;function Kt(r,p){const a=p??new e(2),c=r[0],m=r[1],C=Math.sqrt(c*c+m*m);return C>1e-5?(a[0]=c/C,a[1]=m/C):(a[0]=0,a[1]=0),a}function Te(r,p){const a=p??new e(2);return a[0]=-r[0],a[1]=-r[1],a}function Pt(r,p){const a=p??new e(2);return a[0]=r[0],a[1]=r[1],a}const $e=Pt;function me(r,p,a){const c=a??new e(2);return c[0]=r[0]*p[0],c[1]=r[1]*p[1],c}const ze=me;function te(r,p,a){const c=a??new e(2);return c[0]=r[0]/p[0],c[1]=r[1]/p[1],c}const Ce=te;function ye(r=1,p){const a=p??new e(2),c=Math.random()*2*Math.PI;return a[0]=Math.cos(c)*r,a[1]=Math.sin(c)*r,a}function l(r){const p=r??new e(2);return p[0]=0,p[1]=0,p}function A(r,p,a){const c=a??new e(2),m=r[0],C=r[1];return c[0]=m*p[0]+C*p[4]+p[12],c[1]=m*p[1]+C*p[5]+p[13],c}function i(r,p,a){const c=a??new e(2),m=r[0],C=r[1];return c[0]=p[0]*m+p[4]*C+p[8],c[1]=p[1]*m+p[5]*C+p[9],c}function f(r,p,a,c){const m=c??new e(2),C=r[0]-p[0],V=r[1]-p[1],g=Math.sin(a),v=Math.cos(a);return m[0]=C*v-V*g+p[0],m[1]=C*g+V*v+p[1],m}function y(r,p,a){const c=a??new e(2);return Kt(r,c),lt(c,p,c)}function k(r,p,a){const c=a??new e(2);return Wt(r)>p?y(r,p,c):Pt(r,c)}function L(r,p,a){const c=a??new e(2);return M(r,p,.5,c)}return{create:t,fromValues:n,set:u,ceil:h,floor:_,round:b,clamp:z,add:P,addScaled:j,angle:K,subtract:Y,sub:ut,equalsApproximately:et,equals:rt,lerp:M,lerpV:Z,max:Q,min:tt,mulScalar:lt,scale:ht,divScalar:pt,inverse:st,invert:jt,cross:Ft,dot:we,length:Wt,len:Fe,lengthSq:kt,lenSq:zt,distance:mt,dist:Se,distanceSq:le,distSq:xe,normalize:Kt,negate:Te,copy:Pt,clone:$e,multiply:me,mul:ze,divide:te,div:Ce,random:ye,zero:l,transformMat4:A,transformMat3:i,rotate:f,setLength:y,truncate:k,midpoint:L}}const ju=new Map;function Sa(e){let t=ju.get(e);return t||(t=Jl(e),ju.set(e,t)),t}function Ql(e){function t(g,v,x){const B=new e(3);return g!==void 0&&(B[0]=g,v!==void 0&&(B[1]=v,x!==void 0&&(B[2]=x))),B}const n=t;function u(g,v,x,B){const O=B??new e(3);return O[0]=g,O[1]=v,O[2]=x,O}function h(g,v){const x=v??new e(3);return x[0]=Math.ceil(g[0]),x[1]=Math.ceil(g[1]),x[2]=Math.ceil(g[2]),x}function _(g,v){const x=v??new e(3);return x[0]=Math.floor(g[0]),x[1]=Math.floor(g[1]),x[2]=Math.floor(g[2]),x}function b(g,v){const x=v??new e(3);return x[0]=Math.round(g[0]),x[1]=Math.round(g[1]),x[2]=Math.round(g[2]),x}function z(g,v=0,x=1,B){const O=B??new e(3);return O[0]=Math.min(x,Math.max(v,g[0])),O[1]=Math.min(x,Math.max(v,g[1])),O[2]=Math.min(x,Math.max(v,g[2])),O}function P(g,v,x){const B=x??new e(3);return B[0]=g[0]+v[0],B[1]=g[1]+v[1],B[2]=g[2]+v[2],B}function j(g,v,x,B){const O=B??new e(3);return O[0]=g[0]+v[0]*x,O[1]=g[1]+v[1]*x,O[2]=g[2]+v[2]*x,O}function K(g,v){const x=g[0],B=g[1],O=g[2],U=v[0],R=v[1],ct=v[2],gt=Math.sqrt(x*x+B*B+O*O),it=Math.sqrt(U*U+R*R+ct*ct),ft=gt*it,_t=ft&&we(g,v)/ft;return Math.acos(_t)}function Y(g,v,x){const B=x??new e(3);return B[0]=g[0]-v[0],B[1]=g[1]-v[1],B[2]=g[2]-v[2],B}const ut=Y;function et(g,v){return Math.abs(g[0]-v[0])<wt&&Math.abs(g[1]-v[1])<wt&&Math.abs(g[2]-v[2])<wt}function rt(g,v){return g[0]===v[0]&&g[1]===v[1]&&g[2]===v[2]}function M(g,v,x,B){const O=B??new e(3);return O[0]=g[0]+x*(v[0]-g[0]),O[1]=g[1]+x*(v[1]-g[1]),O[2]=g[2]+x*(v[2]-g[2]),O}function Z(g,v,x,B){const O=B??new e(3);return O[0]=g[0]+x[0]*(v[0]-g[0]),O[1]=g[1]+x[1]*(v[1]-g[1]),O[2]=g[2]+x[2]*(v[2]-g[2]),O}function Q(g,v,x){const B=x??new e(3);return B[0]=Math.max(g[0],v[0]),B[1]=Math.max(g[1],v[1]),B[2]=Math.max(g[2],v[2]),B}function tt(g,v,x){const B=x??new e(3);return B[0]=Math.min(g[0],v[0]),B[1]=Math.min(g[1],v[1]),B[2]=Math.min(g[2],v[2]),B}function lt(g,v,x){const B=x??new e(3);return B[0]=g[0]*v,B[1]=g[1]*v,B[2]=g[2]*v,B}const ht=lt;function pt(g,v,x){const B=x??new e(3);return B[0]=g[0]/v,B[1]=g[1]/v,B[2]=g[2]/v,B}function st(g,v){const x=v??new e(3);return x[0]=1/g[0],x[1]=1/g[1],x[2]=1/g[2],x}const jt=st;function Ft(g,v,x){const B=x??new e(3),O=g[2]*v[0]-g[0]*v[2],U=g[0]*v[1]-g[1]*v[0];return B[0]=g[1]*v[2]-g[2]*v[1],B[1]=O,B[2]=U,B}function we(g,v){return g[0]*v[0]+g[1]*v[1]+g[2]*v[2]}function Wt(g){const v=g[0],x=g[1],B=g[2];return Math.sqrt(v*v+x*x+B*B)}const Fe=Wt;function kt(g){const v=g[0],x=g[1],B=g[2];return v*v+x*x+B*B}const zt=kt;function mt(g,v){const x=g[0]-v[0],B=g[1]-v[1],O=g[2]-v[2];return Math.sqrt(x*x+B*B+O*O)}const Se=mt;function le(g,v){const x=g[0]-v[0],B=g[1]-v[1],O=g[2]-v[2];return x*x+B*B+O*O}const xe=le;function Kt(g,v){const x=v??new e(3),B=g[0],O=g[1],U=g[2],R=Math.sqrt(B*B+O*O+U*U);return R>1e-5?(x[0]=B/R,x[1]=O/R,x[2]=U/R):(x[0]=0,x[1]=0,x[2]=0),x}function Te(g,v){const x=v??new e(3);return x[0]=-g[0],x[1]=-g[1],x[2]=-g[2],x}function Pt(g,v){const x=v??new e(3);return x[0]=g[0],x[1]=g[1],x[2]=g[2],x}const $e=Pt;function me(g,v,x){const B=x??new e(3);return B[0]=g[0]*v[0],B[1]=g[1]*v[1],B[2]=g[2]*v[2],B}const ze=me;function te(g,v,x){const B=x??new e(3);return B[0]=g[0]/v[0],B[1]=g[1]/v[1],B[2]=g[2]/v[2],B}const Ce=te;function ye(g=1,v){const x=v??new e(3),B=Math.random()*2*Math.PI,O=Math.random()*2-1,U=Math.sqrt(1-O*O)*g;return x[0]=Math.cos(B)*U,x[1]=Math.sin(B)*U,x[2]=O*g,x}function l(g){const v=g??new e(3);return v[0]=0,v[1]=0,v[2]=0,v}function A(g,v,x){const B=x??new e(3),O=g[0],U=g[1],R=g[2],ct=v[3]*O+v[7]*U+v[11]*R+v[15]||1;return B[0]=(v[0]*O+v[4]*U+v[8]*R+v[12])/ct,B[1]=(v[1]*O+v[5]*U+v[9]*R+v[13])/ct,B[2]=(v[2]*O+v[6]*U+v[10]*R+v[14])/ct,B}function i(g,v,x){const B=x??new e(3),O=g[0],U=g[1],R=g[2];return B[0]=O*v[0*4+0]+U*v[1*4+0]+R*v[2*4+0],B[1]=O*v[0*4+1]+U*v[1*4+1]+R*v[2*4+1],B[2]=O*v[0*4+2]+U*v[1*4+2]+R*v[2*4+2],B}function f(g,v,x){const B=x??new e(3),O=g[0],U=g[1],R=g[2];return B[0]=O*v[0]+U*v[4]+R*v[8],B[1]=O*v[1]+U*v[5]+R*v[9],B[2]=O*v[2]+U*v[6]+R*v[10],B}function y(g,v,x){const B=x??new e(3),O=v[0],U=v[1],R=v[2],ct=v[3]*2,gt=g[0],it=g[1],ft=g[2],_t=U*ft-R*it,yt=R*gt-O*ft,Ot=O*it-U*gt;return B[0]=gt+_t*ct+(U*Ot-R*yt)*2,B[1]=it+yt*ct+(R*_t-O*Ot)*2,B[2]=ft+Ot*ct+(O*yt-U*_t)*2,B}function k(g,v){const x=v??new e(3);return x[0]=g[12],x[1]=g[13],x[2]=g[14],x}function L(g,v,x){const B=x??new e(3),O=v*4;return B[0]=g[O+0],B[1]=g[O+1],B[2]=g[O+2],B}function r(g,v){const x=v??new e(3),B=g[0],O=g[1],U=g[2],R=g[4],ct=g[5],gt=g[6],it=g[8],ft=g[9],_t=g[10];return x[0]=Math.sqrt(B*B+O*O+U*U),x[1]=Math.sqrt(R*R+ct*ct+gt*gt),x[2]=Math.sqrt(it*it+ft*ft+_t*_t),x}function p(g,v,x,B){const O=B??new e(3),U=[],R=[];return U[0]=g[0]-v[0],U[1]=g[1]-v[1],U[2]=g[2]-v[2],R[0]=U[0],R[1]=U[1]*Math.cos(x)-U[2]*Math.sin(x),R[2]=U[1]*Math.sin(x)+U[2]*Math.cos(x),O[0]=R[0]+v[0],O[1]=R[1]+v[1],O[2]=R[2]+v[2],O}function a(g,v,x,B){const O=B??new e(3),U=[],R=[];return U[0]=g[0]-v[0],U[1]=g[1]-v[1],U[2]=g[2]-v[2],R[0]=U[2]*Math.sin(x)+U[0]*Math.cos(x),R[1]=U[1],R[2]=U[2]*Math.cos(x)-U[0]*Math.sin(x),O[0]=R[0]+v[0],O[1]=R[1]+v[1],O[2]=R[2]+v[2],O}function c(g,v,x,B){const O=B??new e(3),U=[],R=[];return U[0]=g[0]-v[0],U[1]=g[1]-v[1],U[2]=g[2]-v[2],R[0]=U[0]*Math.cos(x)-U[1]*Math.sin(x),R[1]=U[0]*Math.sin(x)+U[1]*Math.cos(x),R[2]=U[2],O[0]=R[0]+v[0],O[1]=R[1]+v[1],O[2]=R[2]+v[2],O}function m(g,v,x){const B=x??new e(3);return Kt(g,B),lt(B,v,B)}function C(g,v,x){const B=x??new e(3);return Wt(g)>v?m(g,v,B):Pt(g,B)}function V(g,v,x){const B=x??new e(3);return M(g,v,.5,B)}return{create:t,fromValues:n,set:u,ceil:h,floor:_,round:b,clamp:z,add:P,addScaled:j,angle:K,subtract:Y,sub:ut,equalsApproximately:et,equals:rt,lerp:M,lerpV:Z,max:Q,min:tt,mulScalar:lt,scale:ht,divScalar:pt,inverse:st,invert:jt,cross:Ft,dot:we,length:Wt,len:Fe,lengthSq:kt,lenSq:zt,distance:mt,dist:Se,distanceSq:le,distSq:xe,normalize:Kt,negate:Te,copy:Pt,clone:$e,multiply:me,mul:ze,divide:te,div:Ce,random:ye,zero:l,transformMat4:A,transformMat4Upper3x3:i,transformMat3:f,transformQuat:y,getTranslation:k,getAxis:L,getScaling:r,rotateX:p,rotateY:a,rotateZ:c,setLength:m,truncate:C,midpoint:V}}const Gu=new Map;function Fr(e){let t=Gu.get(e);return t||(t=Ql(e),Gu.set(e,t)),t}function Kl(e){const t=Sa(e),n=Fr(e);function u(l,A,i,f,y,k,L,r,p){const a=new e(12);return a[3]=0,a[7]=0,a[11]=0,l!==void 0&&(a[0]=l,A!==void 0&&(a[1]=A,i!==void 0&&(a[2]=i,f!==void 0&&(a[4]=f,y!==void 0&&(a[5]=y,k!==void 0&&(a[6]=k,L!==void 0&&(a[8]=L,r!==void 0&&(a[9]=r,p!==void 0&&(a[10]=p))))))))),a}function h(l,A,i,f,y,k,L,r,p,a){const c=a??new e(12);return c[0]=l,c[1]=A,c[2]=i,c[3]=0,c[4]=f,c[5]=y,c[6]=k,c[7]=0,c[8]=L,c[9]=r,c[10]=p,c[11]=0,c}function _(l,A){const i=A??new e(12);return i[0]=l[0],i[1]=l[1],i[2]=l[2],i[3]=0,i[4]=l[4],i[5]=l[5],i[6]=l[6],i[7]=0,i[8]=l[8],i[9]=l[9],i[10]=l[10],i[11]=0,i}function b(l,A){const i=A??new e(12),f=l[0],y=l[1],k=l[2],L=l[3],r=f+f,p=y+y,a=k+k,c=f*r,m=y*r,C=y*p,V=k*r,g=k*p,v=k*a,x=L*r,B=L*p,O=L*a;return i[0]=1-C-v,i[1]=m+O,i[2]=V-B,i[3]=0,i[4]=m-O,i[5]=1-c-v,i[6]=g+x,i[7]=0,i[8]=V+B,i[9]=g-x,i[10]=1-c-C,i[11]=0,i}function z(l,A){const i=A??new e(12);return i[0]=-l[0],i[1]=-l[1],i[2]=-l[2],i[4]=-l[4],i[5]=-l[5],i[6]=-l[6],i[8]=-l[8],i[9]=-l[9],i[10]=-l[10],i}function P(l,A){const i=A??new e(12);return i[0]=l[0],i[1]=l[1],i[2]=l[2],i[4]=l[4],i[5]=l[5],i[6]=l[6],i[8]=l[8],i[9]=l[9],i[10]=l[10],i}const j=P;function K(l,A){return Math.abs(l[0]-A[0])<wt&&Math.abs(l[1]-A[1])<wt&&Math.abs(l[2]-A[2])<wt&&Math.abs(l[4]-A[4])<wt&&Math.abs(l[5]-A[5])<wt&&Math.abs(l[6]-A[6])<wt&&Math.abs(l[8]-A[8])<wt&&Math.abs(l[9]-A[9])<wt&&Math.abs(l[10]-A[10])<wt}function Y(l,A){return l[0]===A[0]&&l[1]===A[1]&&l[2]===A[2]&&l[4]===A[4]&&l[5]===A[5]&&l[6]===A[6]&&l[8]===A[8]&&l[9]===A[9]&&l[10]===A[10]}function ut(l){const A=l??new e(12);return A[0]=1,A[1]=0,A[2]=0,A[4]=0,A[5]=1,A[6]=0,A[8]=0,A[9]=0,A[10]=1,A}function et(l,A){const i=A??new e(12);if(i===l){let C;return C=l[1],l[1]=l[4],l[4]=C,C=l[2],l[2]=l[8],l[8]=C,C=l[6],l[6]=l[9],l[9]=C,i}const f=l[0*4+0],y=l[0*4+1],k=l[0*4+2],L=l[1*4+0],r=l[1*4+1],p=l[1*4+2],a=l[2*4+0],c=l[2*4+1],m=l[2*4+2];return i[0]=f,i[1]=L,i[2]=a,i[4]=y,i[5]=r,i[6]=c,i[8]=k,i[9]=p,i[10]=m,i}function rt(l,A){const i=A??new e(12),f=l[0*4+0],y=l[0*4+1],k=l[0*4+2],L=l[1*4+0],r=l[1*4+1],p=l[1*4+2],a=l[2*4+0],c=l[2*4+1],m=l[2*4+2],C=m*r-p*c,V=-m*L+p*a,g=c*L-r*a,v=1/(f*C+y*V+k*g);return i[0]=C*v,i[1]=(-m*y+k*c)*v,i[2]=(p*y-k*r)*v,i[4]=V*v,i[5]=(m*f-k*a)*v,i[6]=(-p*f+k*L)*v,i[8]=g*v,i[9]=(-c*f+y*a)*v,i[10]=(r*f-y*L)*v,i}function M(l){const A=l[0],i=l[0*4+1],f=l[0*4+2],y=l[1*4+0],k=l[1*4+1],L=l[1*4+2],r=l[2*4+0],p=l[2*4+1],a=l[2*4+2];return A*(k*a-p*L)-y*(i*a-p*f)+r*(i*L-k*f)}const Z=rt;function Q(l,A,i){const f=i??new e(12),y=l[0],k=l[1],L=l[2],r=l[4],p=l[5],a=l[6],c=l[8],m=l[9],C=l[10],V=A[0],g=A[1],v=A[2],x=A[4],B=A[5],O=A[6],U=A[8],R=A[9],ct=A[10];return f[0]=y*V+r*g+c*v,f[1]=k*V+p*g+m*v,f[2]=L*V+a*g+C*v,f[4]=y*x+r*B+c*O,f[5]=k*x+p*B+m*O,f[6]=L*x+a*B+C*O,f[8]=y*U+r*R+c*ct,f[9]=k*U+p*R+m*ct,f[10]=L*U+a*R+C*ct,f}const tt=Q;function lt(l,A,i){const f=i??ut();return l!==f&&(f[0]=l[0],f[1]=l[1],f[2]=l[2],f[4]=l[4],f[5]=l[5],f[6]=l[6]),f[8]=A[0],f[9]=A[1],f[10]=1,f}function ht(l,A){const i=A??t.create();return i[0]=l[8],i[1]=l[9],i}function pt(l,A,i){const f=i??t.create(),y=A*4;return f[0]=l[y+0],f[1]=l[y+1],f}function st(l,A,i,f){const y=f===l?l:P(l,f),k=i*4;return y[k+0]=A[0],y[k+1]=A[1],y}function jt(l,A){const i=A??t.create(),f=l[0],y=l[1],k=l[4],L=l[5];return i[0]=Math.sqrt(f*f+y*y),i[1]=Math.sqrt(k*k+L*L),i}function Ft(l,A){const i=A??n.create(),f=l[0],y=l[1],k=l[2],L=l[4],r=l[5],p=l[6],a=l[8],c=l[9],m=l[10];return i[0]=Math.sqrt(f*f+y*y+k*k),i[1]=Math.sqrt(L*L+r*r+p*p),i[2]=Math.sqrt(a*a+c*c+m*m),i}function we(l,A){const i=A??new e(12);return i[0]=1,i[1]=0,i[2]=0,i[4]=0,i[5]=1,i[6]=0,i[8]=l[0],i[9]=l[1],i[10]=1,i}function Wt(l,A,i){const f=i??new e(12),y=A[0],k=A[1],L=l[0],r=l[1],p=l[2],a=l[1*4+0],c=l[1*4+1],m=l[1*4+2],C=l[2*4+0],V=l[2*4+1],g=l[2*4+2];return l!==f&&(f[0]=L,f[1]=r,f[2]=p,f[4]=a,f[5]=c,f[6]=m),f[8]=L*y+a*k+C,f[9]=r*y+c*k+V,f[10]=p*y+m*k+g,f}function Fe(l,A){const i=A??new e(12),f=Math.cos(l),y=Math.sin(l);return i[0]=f,i[1]=y,i[2]=0,i[4]=-y,i[5]=f,i[6]=0,i[8]=0,i[9]=0,i[10]=1,i}function kt(l,A,i){const f=i??new e(12),y=l[0*4+0],k=l[0*4+1],L=l[0*4+2],r=l[1*4+0],p=l[1*4+1],a=l[1*4+2],c=Math.cos(A),m=Math.sin(A);return f[0]=c*y+m*r,f[1]=c*k+m*p,f[2]=c*L+m*a,f[4]=c*r-m*y,f[5]=c*p-m*k,f[6]=c*a-m*L,l!==f&&(f[8]=l[8],f[9]=l[9],f[10]=l[10]),f}function zt(l,A){const i=A??new e(12),f=Math.cos(l),y=Math.sin(l);return i[0]=1,i[1]=0,i[2]=0,i[4]=0,i[5]=f,i[6]=y,i[8]=0,i[9]=-y,i[10]=f,i}function mt(l,A,i){const f=i??new e(12),y=l[4],k=l[5],L=l[6],r=l[8],p=l[9],a=l[10],c=Math.cos(A),m=Math.sin(A);return f[4]=c*y+m*r,f[5]=c*k+m*p,f[6]=c*L+m*a,f[8]=c*r-m*y,f[9]=c*p-m*k,f[10]=c*a-m*L,l!==f&&(f[0]=l[0],f[1]=l[1],f[2]=l[2]),f}function Se(l,A){const i=A??new e(12),f=Math.cos(l),y=Math.sin(l);return i[0]=f,i[1]=0,i[2]=-y,i[4]=0,i[5]=1,i[6]=0,i[8]=y,i[9]=0,i[10]=f,i}function le(l,A,i){const f=i??new e(12),y=l[0*4+0],k=l[0*4+1],L=l[0*4+2],r=l[2*4+0],p=l[2*4+1],a=l[2*4+2],c=Math.cos(A),m=Math.sin(A);return f[0]=c*y-m*r,f[1]=c*k-m*p,f[2]=c*L-m*a,f[8]=c*r+m*y,f[9]=c*p+m*k,f[10]=c*a+m*L,l!==f&&(f[4]=l[4],f[5]=l[5],f[6]=l[6]),f}const xe=Fe,Kt=kt;function Te(l,A){const i=A??new e(12);return i[0]=l[0],i[1]=0,i[2]=0,i[4]=0,i[5]=l[1],i[6]=0,i[8]=0,i[9]=0,i[10]=1,i}function Pt(l,A,i){const f=i??new e(12),y=A[0],k=A[1];return f[0]=y*l[0*4+0],f[1]=y*l[0*4+1],f[2]=y*l[0*4+2],f[4]=k*l[1*4+0],f[5]=k*l[1*4+1],f[6]=k*l[1*4+2],l!==f&&(f[8]=l[8],f[9]=l[9],f[10]=l[10]),f}function $e(l,A){const i=A??new e(12);return i[0]=l[0],i[1]=0,i[2]=0,i[4]=0,i[5]=l[1],i[6]=0,i[8]=0,i[9]=0,i[10]=l[2],i}function me(l,A,i){const f=i??new e(12),y=A[0],k=A[1],L=A[2];return f[0]=y*l[0*4+0],f[1]=y*l[0*4+1],f[2]=y*l[0*4+2],f[4]=k*l[1*4+0],f[5]=k*l[1*4+1],f[6]=k*l[1*4+2],f[8]=L*l[2*4+0],f[9]=L*l[2*4+1],f[10]=L*l[2*4+2],f}function ze(l,A){const i=A??new e(12);return i[0]=l,i[1]=0,i[2]=0,i[4]=0,i[5]=l,i[6]=0,i[8]=0,i[9]=0,i[10]=1,i}function te(l,A,i){const f=i??new e(12);return f[0]=A*l[0*4+0],f[1]=A*l[0*4+1],f[2]=A*l[0*4+2],f[4]=A*l[1*4+0],f[5]=A*l[1*4+1],f[6]=A*l[1*4+2],l!==f&&(f[8]=l[8],f[9]=l[9],f[10]=l[10]),f}function Ce(l,A){const i=A??new e(12);return i[0]=l,i[1]=0,i[2]=0,i[4]=0,i[5]=l,i[6]=0,i[8]=0,i[9]=0,i[10]=l,i}function ye(l,A,i){const f=i??new e(12);return f[0]=A*l[0*4+0],f[1]=A*l[0*4+1],f[2]=A*l[0*4+2],f[4]=A*l[1*4+0],f[5]=A*l[1*4+1],f[6]=A*l[1*4+2],f[8]=A*l[2*4+0],f[9]=A*l[2*4+1],f[10]=A*l[2*4+2],f}return{clone:j,create:u,set:h,fromMat4:_,fromQuat:b,negate:z,copy:P,equalsApproximately:K,equals:Y,identity:ut,transpose:et,inverse:rt,invert:Z,determinant:M,mul:tt,multiply:Q,setTranslation:lt,getTranslation:ht,getAxis:pt,setAxis:st,getScaling:jt,get3DScaling:Ft,translation:we,translate:Wt,rotation:Fe,rotate:kt,rotationX:zt,rotateX:mt,rotationY:Se,rotateY:le,rotationZ:xe,rotateZ:Kt,scaling:Te,scale:Pt,uniformScaling:ze,uniformScale:te,scaling3D:$e,scale3D:me,uniformScaling3D:Ce,uniformScale3D:ye}}const Hu=new Map;function tf(e){let t=Hu.get(e);return t||(t=Kl(e),Hu.set(e,t)),t}function ef(e){const t=Fr(e);function n(r,p,a,c,m,C,V,g,v,x,B,O,U,R,ct,gt){const it=new e(16);return r!==void 0&&(it[0]=r,p!==void 0&&(it[1]=p,a!==void 0&&(it[2]=a,c!==void 0&&(it[3]=c,m!==void 0&&(it[4]=m,C!==void 0&&(it[5]=C,V!==void 0&&(it[6]=V,g!==void 0&&(it[7]=g,v!==void 0&&(it[8]=v,x!==void 0&&(it[9]=x,B!==void 0&&(it[10]=B,O!==void 0&&(it[11]=O,U!==void 0&&(it[12]=U,R!==void 0&&(it[13]=R,ct!==void 0&&(it[14]=ct,gt!==void 0&&(it[15]=gt)))))))))))))))),it}function u(r,p,a,c,m,C,V,g,v,x,B,O,U,R,ct,gt,it){const ft=it??new e(16);return ft[0]=r,ft[1]=p,ft[2]=a,ft[3]=c,ft[4]=m,ft[5]=C,ft[6]=V,ft[7]=g,ft[8]=v,ft[9]=x,ft[10]=B,ft[11]=O,ft[12]=U,ft[13]=R,ft[14]=ct,ft[15]=gt,ft}function h(r,p){const a=p??new e(16);return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=0,a[4]=r[4],a[5]=r[5],a[6]=r[6],a[7]=0,a[8]=r[8],a[9]=r[9],a[10]=r[10],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function _(r,p){const a=p??new e(16),c=r[0],m=r[1],C=r[2],V=r[3],g=c+c,v=m+m,x=C+C,B=c*g,O=m*g,U=m*v,R=C*g,ct=C*v,gt=C*x,it=V*g,ft=V*v,_t=V*x;return a[0]=1-U-gt,a[1]=O+_t,a[2]=R-ft,a[3]=0,a[4]=O-_t,a[5]=1-B-gt,a[6]=ct+it,a[7]=0,a[8]=R+ft,a[9]=ct-it,a[10]=1-B-U,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function b(r,p){const a=p??new e(16);return a[0]=-r[0],a[1]=-r[1],a[2]=-r[2],a[3]=-r[3],a[4]=-r[4],a[5]=-r[5],a[6]=-r[6],a[7]=-r[7],a[8]=-r[8],a[9]=-r[9],a[10]=-r[10],a[11]=-r[11],a[12]=-r[12],a[13]=-r[13],a[14]=-r[14],a[15]=-r[15],a}function z(r,p){const a=p??new e(16);return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[4]=r[4],a[5]=r[5],a[6]=r[6],a[7]=r[7],a[8]=r[8],a[9]=r[9],a[10]=r[10],a[11]=r[11],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15],a}const P=z;function j(r,p){return Math.abs(r[0]-p[0])<wt&&Math.abs(r[1]-p[1])<wt&&Math.abs(r[2]-p[2])<wt&&Math.abs(r[3]-p[3])<wt&&Math.abs(r[4]-p[4])<wt&&Math.abs(r[5]-p[5])<wt&&Math.abs(r[6]-p[6])<wt&&Math.abs(r[7]-p[7])<wt&&Math.abs(r[8]-p[8])<wt&&Math.abs(r[9]-p[9])<wt&&Math.abs(r[10]-p[10])<wt&&Math.abs(r[11]-p[11])<wt&&Math.abs(r[12]-p[12])<wt&&Math.abs(r[13]-p[13])<wt&&Math.abs(r[14]-p[14])<wt&&Math.abs(r[15]-p[15])<wt}function K(r,p){return r[0]===p[0]&&r[1]===p[1]&&r[2]===p[2]&&r[3]===p[3]&&r[4]===p[4]&&r[5]===p[5]&&r[6]===p[6]&&r[7]===p[7]&&r[8]===p[8]&&r[9]===p[9]&&r[10]===p[10]&&r[11]===p[11]&&r[12]===p[12]&&r[13]===p[13]&&r[14]===p[14]&&r[15]===p[15]}function Y(r){const p=r??new e(16);return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=1,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}function ut(r,p){const a=p??new e(16);if(a===r){let yt;return yt=r[1],r[1]=r[4],r[4]=yt,yt=r[2],r[2]=r[8],r[8]=yt,yt=r[3],r[3]=r[12],r[12]=yt,yt=r[6],r[6]=r[9],r[9]=yt,yt=r[7],r[7]=r[13],r[13]=yt,yt=r[11],r[11]=r[14],r[14]=yt,a}const c=r[0*4+0],m=r[0*4+1],C=r[0*4+2],V=r[0*4+3],g=r[1*4+0],v=r[1*4+1],x=r[1*4+2],B=r[1*4+3],O=r[2*4+0],U=r[2*4+1],R=r[2*4+2],ct=r[2*4+3],gt=r[3*4+0],it=r[3*4+1],ft=r[3*4+2],_t=r[3*4+3];return a[0]=c,a[1]=g,a[2]=O,a[3]=gt,a[4]=m,a[5]=v,a[6]=U,a[7]=it,a[8]=C,a[9]=x,a[10]=R,a[11]=ft,a[12]=V,a[13]=B,a[14]=ct,a[15]=_t,a}function et(r,p){const a=p??new e(16),c=r[0*4+0],m=r[0*4+1],C=r[0*4+2],V=r[0*4+3],g=r[1*4+0],v=r[1*4+1],x=r[1*4+2],B=r[1*4+3],O=r[2*4+0],U=r[2*4+1],R=r[2*4+2],ct=r[2*4+3],gt=r[3*4+0],it=r[3*4+1],ft=r[3*4+2],_t=r[3*4+3],yt=R*_t,Ot=ft*ct,Gt=x*_t,Ht=ft*B,Yt=x*ct,Qt=R*B,ee=C*_t,ne=ft*V,re=C*ct,se=R*V,fe=C*B,he=x*V,de=O*it,pe=gt*U,be=g*it,Ae=gt*v,ke=g*U,kn=O*v,En=c*it,an=gt*m,on=c*U,Fn=O*m,xn=c*v,Cn=g*m,cn=yt*v+Ht*U+Yt*it-(Ot*v+Gt*U+Qt*it),or=Ot*m+ee*U+se*it-(yt*m+ne*U+re*it),Wn=Gt*m+ne*v+fe*it-(Ht*m+ee*v+he*it),ir=Qt*m+re*v+he*U-(Yt*m+se*v+fe*U),ue=1/(c*cn+g*or+O*Wn+gt*ir);return a[0]=ue*cn,a[1]=ue*or,a[2]=ue*Wn,a[3]=ue*ir,a[4]=ue*(Ot*g+Gt*O+Qt*gt-(yt*g+Ht*O+Yt*gt)),a[5]=ue*(yt*c+ne*O+re*gt-(Ot*c+ee*O+se*gt)),a[6]=ue*(Ht*c+ee*g+he*gt-(Gt*c+ne*g+fe*gt)),a[7]=ue*(Yt*c+se*g+fe*O-(Qt*c+re*g+he*O)),a[8]=ue*(de*B+Ae*ct+ke*_t-(pe*B+be*ct+kn*_t)),a[9]=ue*(pe*V+En*ct+Fn*_t-(de*V+an*ct+on*_t)),a[10]=ue*(be*V+an*B+xn*_t-(Ae*V+En*B+Cn*_t)),a[11]=ue*(kn*V+on*B+Cn*ct-(ke*V+Fn*B+xn*ct)),a[12]=ue*(be*R+kn*ft+pe*x-(ke*ft+de*x+Ae*R)),a[13]=ue*(on*ft+de*C+an*R-(En*R+Fn*ft+pe*C)),a[14]=ue*(En*x+Cn*ft+Ae*C-(xn*ft+be*C+an*x)),a[15]=ue*(xn*R+ke*C+Fn*x-(on*x+Cn*R+kn*C)),a}function rt(r){const p=r[0],a=r[0*4+1],c=r[0*4+2],m=r[0*4+3],C=r[1*4+0],V=r[1*4+1],g=r[1*4+2],v=r[1*4+3],x=r[2*4+0],B=r[2*4+1],O=r[2*4+2],U=r[2*4+3],R=r[3*4+0],ct=r[3*4+1],gt=r[3*4+2],it=r[3*4+3],ft=O*it,_t=gt*U,yt=g*it,Ot=gt*v,Gt=g*U,Ht=O*v,Yt=c*it,Qt=gt*m,ee=c*U,ne=O*m,re=c*v,se=g*m,fe=ft*V+Ot*B+Gt*ct-(_t*V+yt*B+Ht*ct),he=_t*a+Yt*B+ne*ct-(ft*a+Qt*B+ee*ct),de=yt*a+Qt*V+re*ct-(Ot*a+Yt*V+se*ct),pe=Ht*a+ee*V+se*B-(Gt*a+ne*V+re*B);return p*fe+C*he+x*de+R*pe}const M=et;function Z(r,p,a){const c=a??new e(16),m=r[0],C=r[1],V=r[2],g=r[3],v=r[4],x=r[5],B=r[6],O=r[7],U=r[8],R=r[9],ct=r[10],gt=r[11],it=r[12],ft=r[13],_t=r[14],yt=r[15],Ot=p[0],Gt=p[1],Ht=p[2],Yt=p[3],Qt=p[4],ee=p[5],ne=p[6],re=p[7],se=p[8],fe=p[9],he=p[10],de=p[11],pe=p[12],be=p[13],Ae=p[14],ke=p[15];return c[0]=m*Ot+v*Gt+U*Ht+it*Yt,c[1]=C*Ot+x*Gt+R*Ht+ft*Yt,c[2]=V*Ot+B*Gt+ct*Ht+_t*Yt,c[3]=g*Ot+O*Gt+gt*Ht+yt*Yt,c[4]=m*Qt+v*ee+U*ne+it*re,c[5]=C*Qt+x*ee+R*ne+ft*re,c[6]=V*Qt+B*ee+ct*ne+_t*re,c[7]=g*Qt+O*ee+gt*ne+yt*re,c[8]=m*se+v*fe+U*he+it*de,c[9]=C*se+x*fe+R*he+ft*de,c[10]=V*se+B*fe+ct*he+_t*de,c[11]=g*se+O*fe+gt*he+yt*de,c[12]=m*pe+v*be+U*Ae+it*ke,c[13]=C*pe+x*be+R*Ae+ft*ke,c[14]=V*pe+B*be+ct*Ae+_t*ke,c[15]=g*pe+O*be+gt*Ae+yt*ke,c}const Q=Z;function tt(r,p,a){const c=a??Y();return r!==c&&(c[0]=r[0],c[1]=r[1],c[2]=r[2],c[3]=r[3],c[4]=r[4],c[5]=r[5],c[6]=r[6],c[7]=r[7],c[8]=r[8],c[9]=r[9],c[10]=r[10],c[11]=r[11]),c[12]=p[0],c[13]=p[1],c[14]=p[2],c[15]=1,c}function lt(r,p){const a=p??t.create();return a[0]=r[12],a[1]=r[13],a[2]=r[14],a}function ht(r,p,a){const c=a??t.create(),m=p*4;return c[0]=r[m+0],c[1]=r[m+1],c[2]=r[m+2],c}function pt(r,p,a,c){const m=c===r?c:z(r,c),C=a*4;return m[C+0]=p[0],m[C+1]=p[1],m[C+2]=p[2],m}function st(r,p){const a=p??t.create(),c=r[0],m=r[1],C=r[2],V=r[4],g=r[5],v=r[6],x=r[8],B=r[9],O=r[10];return a[0]=Math.sqrt(c*c+m*m+C*C),a[1]=Math.sqrt(V*V+g*g+v*v),a[2]=Math.sqrt(x*x+B*B+O*O),a}function jt(r,p,a,c,m){const C=m??new e(16),V=Math.tan(Math.PI*.5-.5*r);if(C[0]=V/p,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=V,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=-1,C[12]=0,C[13]=0,C[15]=0,Number.isFinite(c)){const g=1/(a-c);C[10]=c*g,C[14]=c*a*g}else C[10]=-1,C[14]=-a;return C}function Ft(r,p,a,c=1/0,m){const C=m??new e(16),V=1/Math.tan(r*.5);if(C[0]=V/p,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=V,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=-1,C[12]=0,C[13]=0,C[15]=0,c===1/0)C[10]=0,C[14]=a;else{const g=1/(c-a);C[10]=a*g,C[14]=c*a*g}return C}function we(r,p,a,c,m,C,V){const g=V??new e(16);return g[0]=2/(p-r),g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=2/(c-a),g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1/(m-C),g[11]=0,g[12]=(p+r)/(r-p),g[13]=(c+a)/(a-c),g[14]=m/(m-C),g[15]=1,g}function Wt(r,p,a,c,m,C,V){const g=V??new e(16),v=p-r,x=c-a,B=m-C;return g[0]=2*m/v,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=2*m/x,g[6]=0,g[7]=0,g[8]=(r+p)/v,g[9]=(c+a)/x,g[10]=C/B,g[11]=-1,g[12]=0,g[13]=0,g[14]=m*C/B,g[15]=0,g}function Fe(r,p,a,c,m,C=1/0,V){const g=V??new e(16),v=p-r,x=c-a;if(g[0]=2*m/v,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=2*m/x,g[6]=0,g[7]=0,g[8]=(r+p)/v,g[9]=(c+a)/x,g[11]=-1,g[12]=0,g[13]=0,g[15]=0,C===1/0)g[10]=0,g[14]=m;else{const B=1/(C-m);g[10]=m*B,g[14]=C*m*B}return g}const kt=t.create(),zt=t.create(),mt=t.create();function Se(r,p,a,c){const m=c??new e(16);return t.normalize(t.subtract(p,r,mt),mt),t.normalize(t.cross(a,mt,kt),kt),t.normalize(t.cross(mt,kt,zt),zt),m[0]=kt[0],m[1]=kt[1],m[2]=kt[2],m[3]=0,m[4]=zt[0],m[5]=zt[1],m[6]=zt[2],m[7]=0,m[8]=mt[0],m[9]=mt[1],m[10]=mt[2],m[11]=0,m[12]=r[0],m[13]=r[1],m[14]=r[2],m[15]=1,m}function le(r,p,a,c){const m=c??new e(16);return t.normalize(t.subtract(r,p,mt),mt),t.normalize(t.cross(a,mt,kt),kt),t.normalize(t.cross(mt,kt,zt),zt),m[0]=kt[0],m[1]=kt[1],m[2]=kt[2],m[3]=0,m[4]=zt[0],m[5]=zt[1],m[6]=zt[2],m[7]=0,m[8]=mt[0],m[9]=mt[1],m[10]=mt[2],m[11]=0,m[12]=r[0],m[13]=r[1],m[14]=r[2],m[15]=1,m}function xe(r,p,a,c){const m=c??new e(16);return t.normalize(t.subtract(r,p,mt),mt),t.normalize(t.cross(a,mt,kt),kt),t.normalize(t.cross(mt,kt,zt),zt),m[0]=kt[0],m[1]=zt[0],m[2]=mt[0],m[3]=0,m[4]=kt[1],m[5]=zt[1],m[6]=mt[1],m[7]=0,m[8]=kt[2],m[9]=zt[2],m[10]=mt[2],m[11]=0,m[12]=-(kt[0]*r[0]+kt[1]*r[1]+kt[2]*r[2]),m[13]=-(zt[0]*r[0]+zt[1]*r[1]+zt[2]*r[2]),m[14]=-(mt[0]*r[0]+mt[1]*r[1]+mt[2]*r[2]),m[15]=1,m}function Kt(r,p){const a=p??new e(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=r[0],a[13]=r[1],a[14]=r[2],a[15]=1,a}function Te(r,p,a){const c=a??new e(16),m=p[0],C=p[1],V=p[2],g=r[0],v=r[1],x=r[2],B=r[3],O=r[1*4+0],U=r[1*4+1],R=r[1*4+2],ct=r[1*4+3],gt=r[2*4+0],it=r[2*4+1],ft=r[2*4+2],_t=r[2*4+3],yt=r[3*4+0],Ot=r[3*4+1],Gt=r[3*4+2],Ht=r[3*4+3];return r!==c&&(c[0]=g,c[1]=v,c[2]=x,c[3]=B,c[4]=O,c[5]=U,c[6]=R,c[7]=ct,c[8]=gt,c[9]=it,c[10]=ft,c[11]=_t),c[12]=g*m+O*C+gt*V+yt,c[13]=v*m+U*C+it*V+Ot,c[14]=x*m+R*C+ft*V+Gt,c[15]=B*m+ct*C+_t*V+Ht,c}function Pt(r,p){const a=p??new e(16),c=Math.cos(r),m=Math.sin(r);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=c,a[6]=m,a[7]=0,a[8]=0,a[9]=-m,a[10]=c,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function $e(r,p,a){const c=a??new e(16),m=r[4],C=r[5],V=r[6],g=r[7],v=r[8],x=r[9],B=r[10],O=r[11],U=Math.cos(p),R=Math.sin(p);return c[4]=U*m+R*v,c[5]=U*C+R*x,c[6]=U*V+R*B,c[7]=U*g+R*O,c[8]=U*v-R*m,c[9]=U*x-R*C,c[10]=U*B-R*V,c[11]=U*O-R*g,r!==c&&(c[0]=r[0],c[1]=r[1],c[2]=r[2],c[3]=r[3],c[12]=r[12],c[13]=r[13],c[14]=r[14],c[15]=r[15]),c}function me(r,p){const a=p??new e(16),c=Math.cos(r),m=Math.sin(r);return a[0]=c,a[1]=0,a[2]=-m,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=m,a[9]=0,a[10]=c,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function ze(r,p,a){const c=a??new e(16),m=r[0*4+0],C=r[0*4+1],V=r[0*4+2],g=r[0*4+3],v=r[2*4+0],x=r[2*4+1],B=r[2*4+2],O=r[2*4+3],U=Math.cos(p),R=Math.sin(p);return c[0]=U*m-R*v,c[1]=U*C-R*x,c[2]=U*V-R*B,c[3]=U*g-R*O,c[8]=U*v+R*m,c[9]=U*x+R*C,c[10]=U*B+R*V,c[11]=U*O+R*g,r!==c&&(c[4]=r[4],c[5]=r[5],c[6]=r[6],c[7]=r[7],c[12]=r[12],c[13]=r[13],c[14]=r[14],c[15]=r[15]),c}function te(r,p){const a=p??new e(16),c=Math.cos(r),m=Math.sin(r);return a[0]=c,a[1]=m,a[2]=0,a[3]=0,a[4]=-m,a[5]=c,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Ce(r,p,a){const c=a??new e(16),m=r[0*4+0],C=r[0*4+1],V=r[0*4+2],g=r[0*4+3],v=r[1*4+0],x=r[1*4+1],B=r[1*4+2],O=r[1*4+3],U=Math.cos(p),R=Math.sin(p);return c[0]=U*m+R*v,c[1]=U*C+R*x,c[2]=U*V+R*B,c[3]=U*g+R*O,c[4]=U*v-R*m,c[5]=U*x-R*C,c[6]=U*B-R*V,c[7]=U*O-R*g,r!==c&&(c[8]=r[8],c[9]=r[9],c[10]=r[10],c[11]=r[11],c[12]=r[12],c[13]=r[13],c[14]=r[14],c[15]=r[15]),c}function ye(r,p,a){const c=a??new e(16);let m=r[0],C=r[1],V=r[2];const g=Math.sqrt(m*m+C*C+V*V);m/=g,C/=g,V/=g;const v=m*m,x=C*C,B=V*V,O=Math.cos(p),U=Math.sin(p),R=1-O;return c[0]=v+(1-v)*O,c[1]=m*C*R+V*U,c[2]=m*V*R-C*U,c[3]=0,c[4]=m*C*R-V*U,c[5]=x+(1-x)*O,c[6]=C*V*R+m*U,c[7]=0,c[8]=m*V*R+C*U,c[9]=C*V*R-m*U,c[10]=B+(1-B)*O,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}const l=ye;function A(r,p,a,c){const m=c??new e(16);let C=p[0],V=p[1],g=p[2];const v=Math.sqrt(C*C+V*V+g*g);C/=v,V/=v,g/=v;const x=C*C,B=V*V,O=g*g,U=Math.cos(a),R=Math.sin(a),ct=1-U,gt=x+(1-x)*U,it=C*V*ct+g*R,ft=C*g*ct-V*R,_t=C*V*ct-g*R,yt=B+(1-B)*U,Ot=V*g*ct+C*R,Gt=C*g*ct+V*R,Ht=V*g*ct-C*R,Yt=O+(1-O)*U,Qt=r[0],ee=r[1],ne=r[2],re=r[3],se=r[4],fe=r[5],he=r[6],de=r[7],pe=r[8],be=r[9],Ae=r[10],ke=r[11];return m[0]=gt*Qt+it*se+ft*pe,m[1]=gt*ee+it*fe+ft*be,m[2]=gt*ne+it*he+ft*Ae,m[3]=gt*re+it*de+ft*ke,m[4]=_t*Qt+yt*se+Ot*pe,m[5]=_t*ee+yt*fe+Ot*be,m[6]=_t*ne+yt*he+Ot*Ae,m[7]=_t*re+yt*de+Ot*ke,m[8]=Gt*Qt+Ht*se+Yt*pe,m[9]=Gt*ee+Ht*fe+Yt*be,m[10]=Gt*ne+Ht*he+Yt*Ae,m[11]=Gt*re+Ht*de+Yt*ke,r!==m&&(m[12]=r[12],m[13]=r[13],m[14]=r[14],m[15]=r[15]),m}const i=A;function f(r,p){const a=p??new e(16);return a[0]=r[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=r[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=r[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function y(r,p,a){const c=a??new e(16),m=p[0],C=p[1],V=p[2];return c[0]=m*r[0*4+0],c[1]=m*r[0*4+1],c[2]=m*r[0*4+2],c[3]=m*r[0*4+3],c[4]=C*r[1*4+0],c[5]=C*r[1*4+1],c[6]=C*r[1*4+2],c[7]=C*r[1*4+3],c[8]=V*r[2*4+0],c[9]=V*r[2*4+1],c[10]=V*r[2*4+2],c[11]=V*r[2*4+3],r!==c&&(c[12]=r[12],c[13]=r[13],c[14]=r[14],c[15]=r[15]),c}function k(r,p){const a=p??new e(16);return a[0]=r,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=r,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=r,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function L(r,p,a){const c=a??new e(16);return c[0]=p*r[0*4+0],c[1]=p*r[0*4+1],c[2]=p*r[0*4+2],c[3]=p*r[0*4+3],c[4]=p*r[1*4+0],c[5]=p*r[1*4+1],c[6]=p*r[1*4+2],c[7]=p*r[1*4+3],c[8]=p*r[2*4+0],c[9]=p*r[2*4+1],c[10]=p*r[2*4+2],c[11]=p*r[2*4+3],r!==c&&(c[12]=r[12],c[13]=r[13],c[14]=r[14],c[15]=r[15]),c}return{create:n,set:u,fromMat3:h,fromQuat:_,negate:b,copy:z,clone:P,equalsApproximately:j,equals:K,identity:Y,transpose:ut,inverse:et,determinant:rt,invert:M,multiply:Z,mul:Q,setTranslation:tt,getTranslation:lt,getAxis:ht,setAxis:pt,getScaling:st,perspective:jt,perspectiveReverseZ:Ft,ortho:we,frustum:Wt,frustumReverseZ:Fe,aim:Se,cameraAim:le,lookAt:xe,translation:Kt,translate:Te,rotationX:Pt,rotateX:$e,rotationY:me,rotateY:ze,rotationZ:te,rotateZ:Ce,axisRotation:ye,rotation:l,axisRotate:A,rotate:i,scaling:f,scale:y,uniformScaling:k,uniformScale:L}}const Zu=new Map;function nf(e){let t=Zu.get(e);return t||(t=ef(e),Zu.set(e,t)),t}function rf(e){const t=Fr(e);function n(l,A,i,f){const y=new e(4);return l!==void 0&&(y[0]=l,A!==void 0&&(y[1]=A,i!==void 0&&(y[2]=i,f!==void 0&&(y[3]=f)))),y}const u=n;function h(l,A,i,f,y){const k=y??new e(4);return k[0]=l,k[1]=A,k[2]=i,k[3]=f,k}function _(l,A,i){const f=i??new e(4),y=A*.5,k=Math.sin(y);return f[0]=k*l[0],f[1]=k*l[1],f[2]=k*l[2],f[3]=Math.cos(y),f}function b(l,A){const i=A??t.create(3),f=Math.acos(l[3])*2,y=Math.sin(f*.5);return y>wt?(i[0]=l[0]/y,i[1]=l[1]/y,i[2]=l[2]/y):(i[0]=1,i[1]=0,i[2]=0),{angle:f,axis:i}}function z(l,A){const i=Wt(l,A);return Math.acos(2*i*i-1)}function P(l,A,i){const f=i??new e(4),y=l[0],k=l[1],L=l[2],r=l[3],p=A[0],a=A[1],c=A[2],m=A[3];return f[0]=y*m+r*p+k*c-L*a,f[1]=k*m+r*a+L*p-y*c,f[2]=L*m+r*c+y*a-k*p,f[3]=r*m-y*p-k*a-L*c,f}const j=P;function K(l,A,i){const f=i??new e(4),y=A*.5,k=l[0],L=l[1],r=l[2],p=l[3],a=Math.sin(y),c=Math.cos(y);return f[0]=k*c+p*a,f[1]=L*c+r*a,f[2]=r*c-L*a,f[3]=p*c-k*a,f}function Y(l,A,i){const f=i??new e(4),y=A*.5,k=l[0],L=l[1],r=l[2],p=l[3],a=Math.sin(y),c=Math.cos(y);return f[0]=k*c-r*a,f[1]=L*c+p*a,f[2]=r*c+k*a,f[3]=p*c-L*a,f}function ut(l,A,i){const f=i??new e(4),y=A*.5,k=l[0],L=l[1],r=l[2],p=l[3],a=Math.sin(y),c=Math.cos(y);return f[0]=k*c+L*a,f[1]=L*c-k*a,f[2]=r*c+p*a,f[3]=p*c-r*a,f}function et(l,A,i,f){const y=f??new e(4),k=l[0],L=l[1],r=l[2],p=l[3];let a=A[0],c=A[1],m=A[2],C=A[3],V=k*a+L*c+r*m+p*C;V<0&&(V=-V,a=-a,c=-c,m=-m,C=-C);let g,v;if(1-V>wt){const x=Math.acos(V),B=Math.sin(x);g=Math.sin((1-i)*x)/B,v=Math.sin(i*x)/B}else g=1-i,v=i;return y[0]=g*k+v*a,y[1]=g*L+v*c,y[2]=g*r+v*m,y[3]=g*p+v*C,y}function rt(l,A){const i=A??new e(4),f=l[0],y=l[1],k=l[2],L=l[3],r=f*f+y*y+k*k+L*L,p=r?1/r:0;return i[0]=-f*p,i[1]=-y*p,i[2]=-k*p,i[3]=L*p,i}function M(l,A){const i=A??new e(4);return i[0]=-l[0],i[1]=-l[1],i[2]=-l[2],i[3]=l[3],i}function Z(l,A){const i=A??new e(4),f=l[0]+l[5]+l[10];if(f>0){const y=Math.sqrt(f+1);i[3]=.5*y;const k=.5/y;i[0]=(l[6]-l[9])*k,i[1]=(l[8]-l[2])*k,i[2]=(l[1]-l[4])*k}else{let y=0;l[5]>l[0]&&(y=1),l[10]>l[y*4+y]&&(y=2);const k=(y+1)%3,L=(y+2)%3,r=Math.sqrt(l[y*4+y]-l[k*4+k]-l[L*4+L]+1);i[y]=.5*r;const p=.5/r;i[3]=(l[k*4+L]-l[L*4+k])*p,i[k]=(l[k*4+y]+l[y*4+k])*p,i[L]=(l[L*4+y]+l[y*4+L])*p}return i}function Q(l,A,i,f,y){const k=y??new e(4),L=l*.5,r=A*.5,p=i*.5,a=Math.sin(L),c=Math.cos(L),m=Math.sin(r),C=Math.cos(r),V=Math.sin(p),g=Math.cos(p);switch(f){case"xyz":k[0]=a*C*g+c*m*V,k[1]=c*m*g-a*C*V,k[2]=c*C*V+a*m*g,k[3]=c*C*g-a*m*V;break;case"xzy":k[0]=a*C*g-c*m*V,k[1]=c*m*g-a*C*V,k[2]=c*C*V+a*m*g,k[3]=c*C*g+a*m*V;break;case"yxz":k[0]=a*C*g+c*m*V,k[1]=c*m*g-a*C*V,k[2]=c*C*V-a*m*g,k[3]=c*C*g+a*m*V;break;case"yzx":k[0]=a*C*g+c*m*V,k[1]=c*m*g+a*C*V,k[2]=c*C*V-a*m*g,k[3]=c*C*g-a*m*V;break;case"zxy":k[0]=a*C*g-c*m*V,k[1]=c*m*g+a*C*V,k[2]=c*C*V+a*m*g,k[3]=c*C*g-a*m*V;break;case"zyx":k[0]=a*C*g-c*m*V,k[1]=c*m*g+a*C*V,k[2]=c*C*V-a*m*g,k[3]=c*C*g+a*m*V;break;default:throw new Error(`Unknown rotation order: ${f}`)}return k}function tt(l,A){const i=A??new e(4);return i[0]=l[0],i[1]=l[1],i[2]=l[2],i[3]=l[3],i}const lt=tt;function ht(l,A,i){const f=i??new e(4);return f[0]=l[0]+A[0],f[1]=l[1]+A[1],f[2]=l[2]+A[2],f[3]=l[3]+A[3],f}function pt(l,A,i){const f=i??new e(4);return f[0]=l[0]-A[0],f[1]=l[1]-A[1],f[2]=l[2]-A[2],f[3]=l[3]-A[3],f}const st=pt;function jt(l,A,i){const f=i??new e(4);return f[0]=l[0]*A,f[1]=l[1]*A,f[2]=l[2]*A,f[3]=l[3]*A,f}const Ft=jt;function we(l,A,i){const f=i??new e(4);return f[0]=l[0]/A,f[1]=l[1]/A,f[2]=l[2]/A,f[3]=l[3]/A,f}function Wt(l,A){return l[0]*A[0]+l[1]*A[1]+l[2]*A[2]+l[3]*A[3]}function Fe(l,A,i,f){const y=f??new e(4);return y[0]=l[0]+i*(A[0]-l[0]),y[1]=l[1]+i*(A[1]-l[1]),y[2]=l[2]+i*(A[2]-l[2]),y[3]=l[3]+i*(A[3]-l[3]),y}function kt(l){const A=l[0],i=l[1],f=l[2],y=l[3];return Math.sqrt(A*A+i*i+f*f+y*y)}const zt=kt;function mt(l){const A=l[0],i=l[1],f=l[2],y=l[3];return A*A+i*i+f*f+y*y}const Se=mt;function le(l,A){const i=A??new e(4),f=l[0],y=l[1],k=l[2],L=l[3],r=Math.sqrt(f*f+y*y+k*k+L*L);return r>1e-5?(i[0]=f/r,i[1]=y/r,i[2]=k/r,i[3]=L/r):(i[0]=0,i[1]=0,i[2]=0,i[3]=1),i}function xe(l,A){return Math.abs(l[0]-A[0])<wt&&Math.abs(l[1]-A[1])<wt&&Math.abs(l[2]-A[2])<wt&&Math.abs(l[3]-A[3])<wt}function Kt(l,A){return l[0]===A[0]&&l[1]===A[1]&&l[2]===A[2]&&l[3]===A[3]}function Te(l){const A=l??new e(4);return A[0]=0,A[1]=0,A[2]=0,A[3]=1,A}const Pt=t.create(),$e=t.create(),me=t.create();function ze(l,A,i){const f=i??new e(4),y=t.dot(l,A);return y<-.999999?(t.cross($e,l,Pt),t.len(Pt)<1e-6&&t.cross(me,l,Pt),t.normalize(Pt,Pt),_(Pt,Math.PI,f),f):y>.999999?(f[0]=0,f[1]=0,f[2]=0,f[3]=1,f):(t.cross(l,A,Pt),f[0]=Pt[0],f[1]=Pt[1],f[2]=Pt[2],f[3]=1+y,le(f,f))}const te=new e(4),Ce=new e(4);function ye(l,A,i,f,y,k){const L=k??new e(4);return et(l,f,y,te),et(A,i,y,Ce),et(te,Ce,2*y*(1-y),L),L}return{create:n,fromValues:u,set:h,fromAxisAngle:_,toAxisAngle:b,angle:z,multiply:P,mul:j,rotateX:K,rotateY:Y,rotateZ:ut,slerp:et,inverse:rt,conjugate:M,fromMat:Z,fromEuler:Q,copy:tt,clone:lt,add:ht,subtract:pt,sub:st,mulScalar:jt,scale:Ft,divScalar:we,dot:Wt,lerp:Fe,length:kt,len:zt,lengthSq:mt,lenSq:Se,normalize:le,equalsApproximately:xe,equals:Kt,identity:Te,rotationTo:ze,sqlerp:ye}}const Wu=new Map;function sf(e){let t=Wu.get(e);return t||(t=rf(e),Wu.set(e,t)),t}function uf(e){function t(i,f,y,k){const L=new e(4);return i!==void 0&&(L[0]=i,f!==void 0&&(L[1]=f,y!==void 0&&(L[2]=y,k!==void 0&&(L[3]=k)))),L}const n=t;function u(i,f,y,k,L){const r=L??new e(4);return r[0]=i,r[1]=f,r[2]=y,r[3]=k,r}function h(i,f){const y=f??new e(4);return y[0]=Math.ceil(i[0]),y[1]=Math.ceil(i[1]),y[2]=Math.ceil(i[2]),y[3]=Math.ceil(i[3]),y}function _(i,f){const y=f??new e(4);return y[0]=Math.floor(i[0]),y[1]=Math.floor(i[1]),y[2]=Math.floor(i[2]),y[3]=Math.floor(i[3]),y}function b(i,f){const y=f??new e(4);return y[0]=Math.round(i[0]),y[1]=Math.round(i[1]),y[2]=Math.round(i[2]),y[3]=Math.round(i[3]),y}function z(i,f=0,y=1,k){const L=k??new e(4);return L[0]=Math.min(y,Math.max(f,i[0])),L[1]=Math.min(y,Math.max(f,i[1])),L[2]=Math.min(y,Math.max(f,i[2])),L[3]=Math.min(y,Math.max(f,i[3])),L}function P(i,f,y){const k=y??new e(4);return k[0]=i[0]+f[0],k[1]=i[1]+f[1],k[2]=i[2]+f[2],k[3]=i[3]+f[3],k}function j(i,f,y,k){const L=k??new e(4);return L[0]=i[0]+f[0]*y,L[1]=i[1]+f[1]*y,L[2]=i[2]+f[2]*y,L[3]=i[3]+f[3]*y,L}function K(i,f,y){const k=y??new e(4);return k[0]=i[0]-f[0],k[1]=i[1]-f[1],k[2]=i[2]-f[2],k[3]=i[3]-f[3],k}const Y=K;function ut(i,f){return Math.abs(i[0]-f[0])<wt&&Math.abs(i[1]-f[1])<wt&&Math.abs(i[2]-f[2])<wt&&Math.abs(i[3]-f[3])<wt}function et(i,f){return i[0]===f[0]&&i[1]===f[1]&&i[2]===f[2]&&i[3]===f[3]}function rt(i,f,y,k){const L=k??new e(4);return L[0]=i[0]+y*(f[0]-i[0]),L[1]=i[1]+y*(f[1]-i[1]),L[2]=i[2]+y*(f[2]-i[2]),L[3]=i[3]+y*(f[3]-i[3]),L}function M(i,f,y,k){const L=k??new e(4);return L[0]=i[0]+y[0]*(f[0]-i[0]),L[1]=i[1]+y[1]*(f[1]-i[1]),L[2]=i[2]+y[2]*(f[2]-i[2]),L[3]=i[3]+y[3]*(f[3]-i[3]),L}function Z(i,f,y){const k=y??new e(4);return k[0]=Math.max(i[0],f[0]),k[1]=Math.max(i[1],f[1]),k[2]=Math.max(i[2],f[2]),k[3]=Math.max(i[3],f[3]),k}function Q(i,f,y){const k=y??new e(4);return k[0]=Math.min(i[0],f[0]),k[1]=Math.min(i[1],f[1]),k[2]=Math.min(i[2],f[2]),k[3]=Math.min(i[3],f[3]),k}function tt(i,f,y){const k=y??new e(4);return k[0]=i[0]*f,k[1]=i[1]*f,k[2]=i[2]*f,k[3]=i[3]*f,k}const lt=tt;function ht(i,f,y){const k=y??new e(4);return k[0]=i[0]/f,k[1]=i[1]/f,k[2]=i[2]/f,k[3]=i[3]/f,k}function pt(i,f){const y=f??new e(4);return y[0]=1/i[0],y[1]=1/i[1],y[2]=1/i[2],y[3]=1/i[3],y}const st=pt;function jt(i,f){return i[0]*f[0]+i[1]*f[1]+i[2]*f[2]+i[3]*f[3]}function Ft(i){const f=i[0],y=i[1],k=i[2],L=i[3];return Math.sqrt(f*f+y*y+k*k+L*L)}const we=Ft;function Wt(i){const f=i[0],y=i[1],k=i[2],L=i[3];return f*f+y*y+k*k+L*L}const Fe=Wt;function kt(i,f){const y=i[0]-f[0],k=i[1]-f[1],L=i[2]-f[2],r=i[3]-f[3];return Math.sqrt(y*y+k*k+L*L+r*r)}const zt=kt;function mt(i,f){const y=i[0]-f[0],k=i[1]-f[1],L=i[2]-f[2],r=i[3]-f[3];return y*y+k*k+L*L+r*r}const Se=mt;function le(i,f){const y=f??new e(4),k=i[0],L=i[1],r=i[2],p=i[3],a=Math.sqrt(k*k+L*L+r*r+p*p);return a>1e-5?(y[0]=k/a,y[1]=L/a,y[2]=r/a,y[3]=p/a):(y[0]=0,y[1]=0,y[2]=0,y[3]=0),y}function xe(i,f){const y=f??new e(4);return y[0]=-i[0],y[1]=-i[1],y[2]=-i[2],y[3]=-i[3],y}function Kt(i,f){const y=f??new e(4);return y[0]=i[0],y[1]=i[1],y[2]=i[2],y[3]=i[3],y}const Te=Kt;function Pt(i,f,y){const k=y??new e(4);return k[0]=i[0]*f[0],k[1]=i[1]*f[1],k[2]=i[2]*f[2],k[3]=i[3]*f[3],k}const $e=Pt;function me(i,f,y){const k=y??new e(4);return k[0]=i[0]/f[0],k[1]=i[1]/f[1],k[2]=i[2]/f[2],k[3]=i[3]/f[3],k}const ze=me;function te(i){const f=i??new e(4);return f[0]=0,f[1]=0,f[2]=0,f[3]=0,f}function Ce(i,f,y){const k=y??new e(4),L=i[0],r=i[1],p=i[2],a=i[3];return k[0]=f[0]*L+f[4]*r+f[8]*p+f[12]*a,k[1]=f[1]*L+f[5]*r+f[9]*p+f[13]*a,k[2]=f[2]*L+f[6]*r+f[10]*p+f[14]*a,k[3]=f[3]*L+f[7]*r+f[11]*p+f[15]*a,k}function ye(i,f,y){const k=y??new e(4);return le(i,k),tt(k,f,k)}function l(i,f,y){const k=y??new e(4);return Ft(i)>f?ye(i,f,k):Kt(i,k)}function A(i,f,y){const k=y??new e(4);return rt(i,f,.5,k)}return{create:t,fromValues:n,set:u,ceil:h,floor:_,round:b,clamp:z,add:P,addScaled:j,subtract:K,sub:Y,equalsApproximately:ut,equals:et,lerp:rt,lerpV:M,max:Z,min:Q,mulScalar:tt,scale:lt,divScalar:ht,inverse:pt,invert:st,dot:jt,length:Ft,len:we,lengthSq:Wt,lenSq:Fe,distance:kt,dist:zt,distanceSq:mt,distSq:Se,normalize:le,negate:xe,copy:Kt,clone:Te,multiply:Pt,mul:$e,divide:me,div:ze,zero:te,transformMat4:Ce,setLength:ye,truncate:l,midpoint:A}}const Yu=new Map;function af(e){let t=Yu.get(e);return t||(t=uf(e),Yu.set(e,t)),t}function ys(e,t,n,u,h,_){return{mat3:tf(e),mat4:nf(t),quat:sf(n),vec2:Sa(u),vec3:Fr(h),vec4:af(_)}}const{mat3:P1,mat4:We,quat:O1,vec2:L1,vec3:V1,vec4:U1}=ys(Float32Array,Float32Array,Float32Array,Float32Array,Float32Array,Float32Array);ys(Float64Array,Float64Array,Float64Array,Float64Array,Float64Array,Float64Array);ys(Xl,Array,Array,Array,Array,Array);const of=e=>t=>(...n)=>(...u)=>{const h=e(n,u);return t(...h)},cf=e=>t=>(...n)=>(...u)=>t(...e(n,u));function lf(e){return!Array.isArray(e)}function Ta(e){return Array.isArray(e)&&lf(e[0])}function ff(e){return Array.isArray(e)&&Ta(e[0])}const hf=e=>t=>(...n)=>e(t(...n)),Qn=e=>(...t)=>(...n)=>e(...t.map(u=>u(...n))),sn={from(e){return e},full(e){return()=>e},zeros(){return sn.full(0)},ones(){return sn.full(1)},assign(e,t){return(...n)=>t(...n)??e(...n)},map:hf,mapN:Qn,mapIndices(e){return t=>(...n)=>t(...e(n))},mask(e){return t=>(...n)=>e(...n)?t(...n):void 0},curry:of(xl),partial:cf(fl),getAxis(e){const t=bl(e);return n=>u=>sn.partial(u)(...t(n))},add:Qn(ya),sub:Qn(ba),mul:Qn(Aa),div:Qn(ka)},df={...sn,fromEager(e){return()=>e},fromValue(e){return()=>e},toEager(e){return e}},$a={...sn,fromEager(e){return t=>e==null?void 0:e[t]},fromValue(e){return Ta(e)?$a.fromEager(e):df.fromValue(e)},toEager(e){return t=>bn(n=>e(n),t)},iota(){return e=>e},unit(e){return t=>e==t?1:0},slices(e,t){return n=>e<=n&&n<t},reduce(e,t,n){return u=>{let h=n;for(let _ of u)h=t(h,e(_));return h}}},On={...sn,fromEager(e){return(t,n)=>{var u;return(u=e==null?void 0:e[t])==null?void 0:u[n]}},fromValue(e){return ff(e)?On.fromEager(e):$a.fromValue(e)},toEager(e){return(t,n)=>bn(u=>bn(h=>e(u,h),t),n)},getRow:sn.getAxis(0),getCol:sn.getAxis(1),I(){return(e,t)=>e==t?1:0},t(e){return On.assign(On.I(),(t,n)=>t==0&&n>0?e(n-1):void 0)},s(e){return On.assign(On.I(),(t,n)=>t==n&&n>0?e(n-1):void 0)},ts(e,t){return(n,u)=>n==0&&u==0?1:n==0?e(u-1):n==u?t(u-1):0},st(e,t){return On.I()}},ve={...We,adapt(e,t){return t=t??We.identity(),t[3*1+0*4]=e[0*1+3*4],t[1*1+0*4]=e[1*1+3*4],t[2*1+0*4]=e[2*1+3*4],t[0*1+0*4]=e[3*1+3*4],t[3*1+1*4]=e[0*1+1*4],t[1*1+1*4]=e[1*1+1*4],t[2*1+1*4]=e[2*1+1*4],t[0*1+1*4]=e[3*1+1*4],t[3*1+2*4]=e[0*1+2*4],t[1*1+2*4]=e[1*1+2*4],t[2*1+2*4]=e[2*1+2*4],t[0*1+2*4]=e[3*1+2*4],t[3*1+3*4]=e[0*1+0*4],t[1*1+3*4]=e[1*1+0*4],t[2*1+3*4]=e[2*1+0*4],t[0*1+3*4]=e[3*1+0*4],t},translation(e,t){return t=t??We.identity(),t[1*1+0*4]=e[0],t[2*1+0*4]=e[1],t[3*1+0*4]=e[2],t},translate(e,t,n){return n=n??We.identity(),n[1*1+0*4]=e[1*1+0*4]+t[0],n[2*1+0*4]=e[2*1+0*4]+t[1],n[3*1+0*4]=e[3*1+0*4]+t[2],n},scaling(e,t){return t=t??We.identity(),t[1*1+1*4]=e[0],t[2*1+2*4]=e[1],t[3*1+3*4]=e[2],t},scale(e,t,n){return n=n??We.identity(),n[1*1+1*4]=e[1*1+1*4]*t[0],n[2*1+2*4]=e[2*1+2*4]*t[1],n[3*1+3*4]=e[3*1+3*4]*t[2],n},ts(e,t,n){return n=n??ve.identity(),ve.translate(n,e,n),ve.scale(n,t,n),n},st(e,t,n){return n=n??ve.identity(),ve.scale(n,e,n),ve.translate(n,t,n),n},rotationX(e,t){const n=We.rotationX(e);return ve.adapt(n,t)},rotationY(e,t){const n=We.rotationY(e);return ve.adapt(n,t)},rotationZ(e,t){const n=We.rotationZ(e);return ve.adapt(n,t)},rotateX(e,t,n){return ve.mul(e,ve.rotationX(t),n)},rotateY(e,t,n){return ve.mul(e,ve.rotationY(t),n)},rotateZ(e,t,n){return ve.mul(e,ve.rotationZ(t),n)}},R1=e=>{const t=Ou(ml(e[0],e[1]),2),n=Ou(vl(e[0],e[1]),2);return ve.st(n,t)},j1=(e,t)=>{const n=e.__vccOpts||e;for(const[u,h]of t)n[u]=h;return n};async function pf(e,t,n={},u={}){let h=null;const _=et=>{let rt,M,Z;return et.devicePixelContentBoxSize?(rt=et.devicePixelContentBoxSize[0].inlineSize,M=et.devicePixelContentBoxSize[0].blockSize,Z=1):(rt=et.contentRect.width,M=et.contentRect.height,Z=window.devicePixelRatio),[Math.round(rt*Z),Math.round(M*Z)]},b=(et,rt)=>{const[M,Z]=rt,Q=et.width!==M||et.height!==Z;return Q&&(et.width=M,et.height=Z),Q},{pause:z,resume:P}=N0(et=>{var rt;if(h){if(u.autoResize){const M=e.value;b(M,h.display)}(rt=t.onRender)==null||rt.call(t,{...h,...et})}},{immediate:!1});q0(e,et=>{var rt;h&&(h.display=_(et[0]),(rt=t.onResize)==null||rt.call(t,{...h,entries:et}))});for(const[et,rt]of Object.entries(n))P0(e,et,rt);if(jn(()=>{var et;Y(),h&&((et=t.onCreate)==null||et.call(t,h),P())}),O0(()=>{var et;h&&(z(),(et=t.onDelete)==null||et.call(t,h)),ut()}),!navigator.gpu)return console.log("WebGPU not supported."),!1;const j=await navigator.gpu.requestAdapter();if(!j)return console.log("Invalid adapter."),!1;const K=await j.requestDevice();if(!K)return console.log("Invalid device."),!1;const Y=()=>{console.log("useWebGpu::initialize");const et=e.value;if(!et){console.log("Invalid canvas.");return}const rt=et.getContext("webgpu");if(!rt){console.log("Invalid context.");return}const M=navigator.gpu.getPreferredCanvasFormat(),{alphaMode:Z}=u;rt.configure({device:K,format:M,alphaMode:Z});const{width:Q,height:tt}=et.getBoundingClientRect();h={adapter:j,device:K,context:rt,format:M,display:[Q,tt]}},ut=()=>{console.log("useWebGpu::finalize"),h=null};return!0}const gf=["width","height"],Df={key:1,class:"flex items-center justify-center"},G1=Ge({__name:"WebGpuCanvas",props:{renderer:{},options:{default:()=>({size:[1920,1080]})},listeners:{default:()=>({})}},async setup(e){let t,n;const u=e,h=_e(()=>{var P;return((P=u.options.size)==null?void 0:P[0])??1920}),_=_e(()=>{var P;return((P=u.options.size)==null?void 0:P[1])??1080}),b=Ne(),z=Ne(!0);return z.value=([t,n]=L0(()=>pf(b,u.renderer,u.listeners,u.options)),t=await t,n(),t),(P,j)=>z.value?(wn(),yn("canvas",{key:0,ref_key:"canvasRef",ref:b,class:"cursor-default",width:h.value,height:_.value,tabindex:"1"},null,8,gf)):(wn(),yn("div",Df,"WebGPU not supported."))}});var _f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var za={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(e,t){(function(n,u){e.exports=u()})(_f,function(){for(var n=function(s,o,d){return o===void 0&&(o=0),d===void 0&&(d=1),s<o?o:s>d?d:s},u=n,h=function(s){s._clipped=!1,s._unclipped=s.slice(0);for(var o=0;o<=3;o++)o<3?((s[o]<0||s[o]>255)&&(s._clipped=!0),s[o]=u(s[o],0,255)):o===3&&(s[o]=u(s[o],0,1));return s},_={},b=0,z=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];b<z.length;b+=1){var P=z[b];_["[object "+P+"]"]=P.toLowerCase()}var j=function(s){return _[Object.prototype.toString.call(s)]||"object"},K=j,Y=function(s,o){return o===void 0&&(o=null),s.length>=3?Array.prototype.slice.call(s):K(s[0])=="object"&&o?o.split("").filter(function(d){return s[0][d]!==void 0}).map(function(d){return s[0][d]}):s[0]},ut=j,et=function(s){if(s.length<2)return null;var o=s.length-1;return ut(s[o])=="string"?s[o].toLowerCase():null},rt=Math.PI,M={clip_rgb:h,limit:n,type:j,unpack:Y,last:et,PI:rt,TWOPI:rt*2,PITHIRD:rt/3,DEG2RAD:rt/180,RAD2DEG:180/rt},Z={format:{},autodetect:[]},Q=M.last,tt=M.clip_rgb,lt=M.type,ht=Z,pt=function(){for(var o=[],d=arguments.length;d--;)o[d]=arguments[d];var w=this;if(lt(o[0])==="object"&&o[0].constructor&&o[0].constructor===this.constructor)return o[0];var F=Q(o),S=!1;if(!F){S=!0,ht.sorted||(ht.autodetect=ht.autodetect.sort(function(W,nt){return nt.p-W.p}),ht.sorted=!0);for(var E=0,I=ht.autodetect;E<I.length;E+=1){var q=I[E];if(F=q.test.apply(q,o),F)break}}if(ht.format[F]){var G=ht.format[F].apply(null,S?o:o.slice(0,-1));w._rgb=tt(G)}else throw new Error("unknown format: "+o);w._rgb.length===3&&w._rgb.push(1)};pt.prototype.toString=function(){return lt(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var st=pt,jt=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(jt.Color,[null].concat(s)))};jt.Color=st,jt.version="2.4.2";var Ft=jt,we=M.unpack,Wt=Math.max,Fe=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var d=we(s,"rgb"),w=d[0],F=d[1],S=d[2];w=w/255,F=F/255,S=S/255;var E=1-Wt(w,Wt(F,S)),I=E<1?1/(1-E):0,q=(1-w-E)*I,G=(1-F-E)*I,W=(1-S-E)*I;return[q,G,W,E]},kt=Fe,zt=M.unpack,mt=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];s=zt(s,"cmyk");var d=s[0],w=s[1],F=s[2],S=s[3],E=s.length>4?s[4]:1;return S===1?[0,0,0,E]:[d>=1?0:255*(1-d)*(1-S),w>=1?0:255*(1-w)*(1-S),F>=1?0:255*(1-F)*(1-S),E]},Se=mt,le=Ft,xe=st,Kt=Z,Te=M.unpack,Pt=M.type,$e=kt;xe.prototype.cmyk=function(){return $e(this._rgb)},le.cmyk=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(xe,[null].concat(s,["cmyk"])))},Kt.format.cmyk=Se,Kt.autodetect.push({p:2,test:function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];if(s=Te(s,"cmyk"),Pt(s)==="array"&&s.length===4)return"cmyk"}});var me=M.unpack,ze=M.last,te=function(s){return Math.round(s*100)/100},Ce=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var d=me(s,"hsla"),w=ze(s)||"lsa";return d[0]=te(d[0]||0),d[1]=te(d[1]*100)+"%",d[2]=te(d[2]*100)+"%",w==="hsla"||d.length>3&&d[3]<1?(d[3]=d.length>3?d[3]:1,w="hsla"):d.length=3,w+"("+d.join(",")+")"},ye=Ce,l=M.unpack,A=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];s=l(s,"rgba");var d=s[0],w=s[1],F=s[2];d/=255,w/=255,F/=255;var S=Math.min(d,w,F),E=Math.max(d,w,F),I=(E+S)/2,q,G;return E===S?(q=0,G=Number.NaN):q=I<.5?(E-S)/(E+S):(E-S)/(2-E-S),d==E?G=(w-F)/(E-S):w==E?G=2+(F-d)/(E-S):F==E&&(G=4+(d-w)/(E-S)),G*=60,G<0&&(G+=360),s.length>3&&s[3]!==void 0?[G,q,I,s[3]]:[G,q,I]},i=A,f=M.unpack,y=M.last,k=ye,L=i,r=Math.round,p=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var d=f(s,"rgba"),w=y(s)||"rgb";return w.substr(0,3)=="hsl"?k(L(d),w):(d[0]=r(d[0]),d[1]=r(d[1]),d[2]=r(d[2]),(w==="rgba"||d.length>3&&d[3]<1)&&(d[3]=d.length>3?d[3]:1,w="rgba"),w+"("+d.slice(0,w==="rgb"?3:4).join(",")+")")},a=p,c=M.unpack,m=Math.round,C=function(){for(var s,o=[],d=arguments.length;d--;)o[d]=arguments[d];o=c(o,"hsl");var w=o[0],F=o[1],S=o[2],E,I,q;if(F===0)E=I=q=S*255;else{var G=[0,0,0],W=[0,0,0],nt=S<.5?S*(1+F):S+F-S*F,X=2*S-nt,ot=w/360;G[0]=ot+1/3,G[1]=ot,G[2]=ot-1/3;for(var at=0;at<3;at++)G[at]<0&&(G[at]+=1),G[at]>1&&(G[at]-=1),6*G[at]<1?W[at]=X+(nt-X)*6*G[at]:2*G[at]<1?W[at]=nt:3*G[at]<2?W[at]=X+(nt-X)*(2/3-G[at])*6:W[at]=X;s=[m(W[0]*255),m(W[1]*255),m(W[2]*255)],E=s[0],I=s[1],q=s[2]}return o.length>3?[E,I,q,o[3]]:[E,I,q,1]},V=C,g=V,v=Z,x=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,B=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,O=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,U=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,R=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,ct=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,gt=Math.round,it=function(s){s=s.toLowerCase().trim();var o;if(v.format.named)try{return v.format.named(s)}catch{}if(o=s.match(x)){for(var d=o.slice(1,4),w=0;w<3;w++)d[w]=+d[w];return d[3]=1,d}if(o=s.match(B)){for(var F=o.slice(1,5),S=0;S<4;S++)F[S]=+F[S];return F}if(o=s.match(O)){for(var E=o.slice(1,4),I=0;I<3;I++)E[I]=gt(E[I]*2.55);return E[3]=1,E}if(o=s.match(U)){for(var q=o.slice(1,5),G=0;G<3;G++)q[G]=gt(q[G]*2.55);return q[3]=+q[3],q}if(o=s.match(R)){var W=o.slice(1,4);W[1]*=.01,W[2]*=.01;var nt=g(W);return nt[3]=1,nt}if(o=s.match(ct)){var X=o.slice(1,4);X[1]*=.01,X[2]*=.01;var ot=g(X);return ot[3]=+o[4],ot}};it.test=function(s){return x.test(s)||B.test(s)||O.test(s)||U.test(s)||R.test(s)||ct.test(s)};var ft=it,_t=Ft,yt=st,Ot=Z,Gt=M.type,Ht=a,Yt=ft;yt.prototype.css=function(s){return Ht(this._rgb,s)},_t.css=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(yt,[null].concat(s,["css"])))},Ot.format.css=Yt,Ot.autodetect.push({p:5,test:function(s){for(var o=[],d=arguments.length-1;d-- >0;)o[d]=arguments[d+1];if(!o.length&&Gt(s)==="string"&&Yt.test(s))return"css"}});var Qt=st,ee=Ft,ne=Z,re=M.unpack;ne.format.gl=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var d=re(s,"rgba");return d[0]*=255,d[1]*=255,d[2]*=255,d},ee.gl=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(Qt,[null].concat(s,["gl"])))},Qt.prototype.gl=function(){var s=this._rgb;return[s[0]/255,s[1]/255,s[2]/255,s[3]]};var se=M.unpack,fe=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var d=se(s,"rgb"),w=d[0],F=d[1],S=d[2],E=Math.min(w,F,S),I=Math.max(w,F,S),q=I-E,G=q*100/255,W=E/(255-q)*100,nt;return q===0?nt=Number.NaN:(w===I&&(nt=(F-S)/q),F===I&&(nt=2+(S-w)/q),S===I&&(nt=4+(w-F)/q),nt*=60,nt<0&&(nt+=360)),[nt,G,W]},he=fe,de=M.unpack,pe=Math.floor,be=function(){for(var s,o,d,w,F,S,E=[],I=arguments.length;I--;)E[I]=arguments[I];E=de(E,"hcg");var q=E[0],G=E[1],W=E[2],nt,X,ot;W=W*255;var at=G*255;if(G===0)nt=X=ot=W;else{q===360&&(q=0),q>360&&(q-=360),q<0&&(q+=360),q/=60;var bt=pe(q),xt=q-bt,Mt=W*(1-G),$t=Mt+at*(1-xt),ge=Mt+at*xt,oe=Mt+at;switch(bt){case 0:s=[oe,ge,Mt],nt=s[0],X=s[1],ot=s[2];break;case 1:o=[$t,oe,Mt],nt=o[0],X=o[1],ot=o[2];break;case 2:d=[Mt,oe,ge],nt=d[0],X=d[1],ot=d[2];break;case 3:w=[Mt,$t,oe],nt=w[0],X=w[1],ot=w[2];break;case 4:F=[ge,Mt,oe],nt=F[0],X=F[1],ot=F[2];break;case 5:S=[oe,Mt,$t],nt=S[0],X=S[1],ot=S[2];break}}return[nt,X,ot,E.length>3?E[3]:1]},Ae=be,ke=M.unpack,kn=M.type,En=Ft,an=st,on=Z,Fn=he;an.prototype.hcg=function(){return Fn(this._rgb)},En.hcg=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(an,[null].concat(s,["hcg"])))},on.format.hcg=Ae,on.autodetect.push({p:1,test:function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];if(s=ke(s,"hcg"),kn(s)==="array"&&s.length===3)return"hcg"}});var xn=M.unpack,Cn=M.last,cn=Math.round,or=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var d=xn(s,"rgba"),w=d[0],F=d[1],S=d[2],E=d[3],I=Cn(s)||"auto";E===void 0&&(E=1),I==="auto"&&(I=E<1?"rgba":"rgb"),w=cn(w),F=cn(F),S=cn(S);var q=w<<16|F<<8|S,G="000000"+q.toString(16);G=G.substr(G.length-6);var W="0"+cn(E*255).toString(16);switch(W=W.substr(W.length-2),I.toLowerCase()){case"rgba":return"#"+G+W;case"argb":return"#"+W+G;default:return"#"+G}},Wn=or,ir=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,ue=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Xa=function(s){if(s.match(ir)){(s.length===4||s.length===7)&&(s=s.substr(1)),s.length===3&&(s=s.split(""),s=s[0]+s[0]+s[1]+s[1]+s[2]+s[2]);var o=parseInt(s,16),d=o>>16,w=o>>8&255,F=o&255;return[d,w,F,1]}if(s.match(ue)){(s.length===5||s.length===9)&&(s=s.substr(1)),s.length===4&&(s=s.split(""),s=s[0]+s[0]+s[1]+s[1]+s[2]+s[2]+s[3]+s[3]);var S=parseInt(s,16),E=S>>24&255,I=S>>16&255,q=S>>8&255,G=Math.round((S&255)/255*100)/100;return[E,I,q,G]}throw new Error("unknown hex color: "+s)},Es=Xa,Ja=Ft,Fs=st,Qa=M.type,xs=Z,Ka=Wn;Fs.prototype.hex=function(s){return Ka(this._rgb,s)},Ja.hex=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(Fs,[null].concat(s,["hex"])))},xs.format.hex=Es,xs.autodetect.push({p:4,test:function(s){for(var o=[],d=arguments.length-1;d-- >0;)o[d]=arguments[d+1];if(!o.length&&Qa(s)==="string"&&[3,4,5,6,7,8,9].indexOf(s.length)>=0)return"hex"}});var to=M.unpack,Cs=M.TWOPI,eo=Math.min,no=Math.sqrt,ro=Math.acos,so=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var d=to(s,"rgb"),w=d[0],F=d[1],S=d[2];w/=255,F/=255,S/=255;var E,I=eo(w,F,S),q=(w+F+S)/3,G=q>0?1-I/q:0;return G===0?E=NaN:(E=(w-F+(w-S))/2,E/=no((w-F)*(w-F)+(w-S)*(F-S)),E=ro(E),S>F&&(E=Cs-E),E/=Cs),[E*360,G,q]},uo=so,ao=M.unpack,xr=M.limit,Bn=M.TWOPI,Cr=M.PITHIRD,Mn=Math.cos,oo=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];s=ao(s,"hsi");var d=s[0],w=s[1],F=s[2],S,E,I;return isNaN(d)&&(d=0),isNaN(w)&&(w=0),d>360&&(d-=360),d<0&&(d+=360),d/=360,d<1/3?(I=(1-w)/3,S=(1+w*Mn(Bn*d)/Mn(Cr-Bn*d))/3,E=1-(I+S)):d<2/3?(d-=1/3,S=(1-w)/3,E=(1+w*Mn(Bn*d)/Mn(Cr-Bn*d))/3,I=1-(S+E)):(d-=2/3,E=(1-w)/3,I=(1+w*Mn(Bn*d)/Mn(Cr-Bn*d))/3,S=1-(E+I)),S=xr(F*S*3),E=xr(F*E*3),I=xr(F*I*3),[S*255,E*255,I*255,s.length>3?s[3]:1]},io=oo,co=M.unpack,lo=M.type,fo=Ft,Bs=st,Ms=Z,ho=uo;Bs.prototype.hsi=function(){return ho(this._rgb)},fo.hsi=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(Bs,[null].concat(s,["hsi"])))},Ms.format.hsi=io,Ms.autodetect.push({p:2,test:function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];if(s=co(s,"hsi"),lo(s)==="array"&&s.length===3)return"hsi"}});var po=M.unpack,go=M.type,Do=Ft,Ss=st,Ts=Z,_o=i;Ss.prototype.hsl=function(){return _o(this._rgb)},Do.hsl=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(Ss,[null].concat(s,["hsl"])))},Ts.format.hsl=V,Ts.autodetect.push({p:2,test:function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];if(s=po(s,"hsl"),go(s)==="array"&&s.length===3)return"hsl"}});var mo=M.unpack,vo=Math.min,wo=Math.max,yo=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];s=mo(s,"rgb");var d=s[0],w=s[1],F=s[2],S=vo(d,w,F),E=wo(d,w,F),I=E-S,q,G,W;return W=E/255,E===0?(q=Number.NaN,G=0):(G=I/E,d===E&&(q=(w-F)/I),w===E&&(q=2+(F-d)/I),F===E&&(q=4+(d-w)/I),q*=60,q<0&&(q+=360)),[q,G,W]},bo=yo,Ao=M.unpack,ko=Math.floor,Eo=function(){for(var s,o,d,w,F,S,E=[],I=arguments.length;I--;)E[I]=arguments[I];E=Ao(E,"hsv");var q=E[0],G=E[1],W=E[2],nt,X,ot;if(W*=255,G===0)nt=X=ot=W;else{q===360&&(q=0),q>360&&(q-=360),q<0&&(q+=360),q/=60;var at=ko(q),bt=q-at,xt=W*(1-G),Mt=W*(1-G*bt),$t=W*(1-G*(1-bt));switch(at){case 0:s=[W,$t,xt],nt=s[0],X=s[1],ot=s[2];break;case 1:o=[Mt,W,xt],nt=o[0],X=o[1],ot=o[2];break;case 2:d=[xt,W,$t],nt=d[0],X=d[1],ot=d[2];break;case 3:w=[xt,Mt,W],nt=w[0],X=w[1],ot=w[2];break;case 4:F=[$t,xt,W],nt=F[0],X=F[1],ot=F[2];break;case 5:S=[W,xt,Mt],nt=S[0],X=S[1],ot=S[2];break}}return[nt,X,ot,E.length>3?E[3]:1]},Fo=Eo,xo=M.unpack,Co=M.type,Bo=Ft,$s=st,zs=Z,Mo=bo;$s.prototype.hsv=function(){return Mo(this._rgb)},Bo.hsv=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply($s,[null].concat(s,["hsv"])))},zs.format.hsv=Fo,zs.autodetect.push({p:2,test:function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];if(s=xo(s,"hsv"),Co(s)==="array"&&s.length===3)return"hsv"}});var cr={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},Sn=cr,So=M.unpack,Is=Math.pow,To=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var d=So(s,"rgb"),w=d[0],F=d[1],S=d[2],E=$o(w,F,S),I=E[0],q=E[1],G=E[2],W=116*q-16;return[W<0?0:W,500*(I-q),200*(q-G)]},Br=function(s){return(s/=255)<=.04045?s/12.92:Is((s+.055)/1.055,2.4)},Mr=function(s){return s>Sn.t3?Is(s,1/3):s/Sn.t2+Sn.t0},$o=function(s,o,d){s=Br(s),o=Br(o),d=Br(d);var w=Mr((.4124564*s+.3575761*o+.1804375*d)/Sn.Xn),F=Mr((.2126729*s+.7151522*o+.072175*d)/Sn.Yn),S=Mr((.0193339*s+.119192*o+.9503041*d)/Sn.Zn);return[w,F,S]},Ns=To,Tn=cr,zo=M.unpack,Io=Math.pow,No=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];s=zo(s,"lab");var d=s[0],w=s[1],F=s[2],S,E,I,q,G,W;return E=(d+16)/116,S=isNaN(w)?E:E+w/500,I=isNaN(F)?E:E-F/200,E=Tn.Yn*Tr(E),S=Tn.Xn*Tr(S),I=Tn.Zn*Tr(I),q=Sr(3.2404542*S-1.5371385*E-.4985314*I),G=Sr(-.969266*S+1.8760108*E+.041556*I),W=Sr(.0556434*S-.2040259*E+1.0572252*I),[q,G,W,s.length>3?s[3]:1]},Sr=function(s){return 255*(s<=.00304?12.92*s:1.055*Io(s,1/2.4)-.055)},Tr=function(s){return s>Tn.t1?s*s*s:Tn.t2*(s-Tn.t0)},qs=No,qo=M.unpack,Po=M.type,Oo=Ft,Ps=st,Os=Z,Lo=Ns;Ps.prototype.lab=function(){return Lo(this._rgb)},Oo.lab=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(Ps,[null].concat(s,["lab"])))},Os.format.lab=qs,Os.autodetect.push({p:2,test:function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];if(s=qo(s,"lab"),Po(s)==="array"&&s.length===3)return"lab"}});var Vo=M.unpack,Uo=M.RAD2DEG,Ro=Math.sqrt,jo=Math.atan2,Go=Math.round,Ho=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var d=Vo(s,"lab"),w=d[0],F=d[1],S=d[2],E=Ro(F*F+S*S),I=(jo(S,F)*Uo+360)%360;return Go(E*1e4)===0&&(I=Number.NaN),[w,E,I]},Ls=Ho,Zo=M.unpack,Wo=Ns,Yo=Ls,Xo=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var d=Zo(s,"rgb"),w=d[0],F=d[1],S=d[2],E=Wo(w,F,S),I=E[0],q=E[1],G=E[2];return Yo(I,q,G)},Jo=Xo,Qo=M.unpack,Ko=M.DEG2RAD,ti=Math.sin,ei=Math.cos,ni=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var d=Qo(s,"lch"),w=d[0],F=d[1],S=d[2];return isNaN(S)&&(S=0),S=S*Ko,[w,ei(S)*F,ti(S)*F]},Vs=ni,ri=M.unpack,si=Vs,ui=qs,ai=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];s=ri(s,"lch");var d=s[0],w=s[1],F=s[2],S=si(d,w,F),E=S[0],I=S[1],q=S[2],G=ui(E,I,q),W=G[0],nt=G[1],X=G[2];return[W,nt,X,s.length>3?s[3]:1]},Us=ai,oi=M.unpack,ii=Us,ci=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var d=oi(s,"hcl").reverse();return ii.apply(void 0,d)},li=ci,fi=M.unpack,hi=M.type,Rs=Ft,lr=st,$r=Z,js=Jo;lr.prototype.lch=function(){return js(this._rgb)},lr.prototype.hcl=function(){return js(this._rgb).reverse()},Rs.lch=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(lr,[null].concat(s,["lch"])))},Rs.hcl=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(lr,[null].concat(s,["hcl"])))},$r.format.lch=Us,$r.format.hcl=li,["lch","hcl"].forEach(function(s){return $r.autodetect.push({p:2,test:function(){for(var o=[],d=arguments.length;d--;)o[d]=arguments[d];if(o=fi(o,s),hi(o)==="array"&&o.length===3)return s}})});var di={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Gs=di,pi=st,Hs=Z,gi=M.type,Yn=Gs,Di=Es,_i=Wn;pi.prototype.name=function(){for(var s=_i(this._rgb,"rgb"),o=0,d=Object.keys(Yn);o<d.length;o+=1){var w=d[o];if(Yn[w]===s)return w.toLowerCase()}return s},Hs.format.named=function(s){if(s=s.toLowerCase(),Yn[s])return Di(Yn[s]);throw new Error("unknown color name: "+s)},Hs.autodetect.push({p:5,test:function(s){for(var o=[],d=arguments.length-1;d-- >0;)o[d]=arguments[d+1];if(!o.length&&gi(s)==="string"&&Yn[s.toLowerCase()])return"named"}});var mi=M.unpack,vi=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var d=mi(s,"rgb"),w=d[0],F=d[1],S=d[2];return(w<<16)+(F<<8)+S},wi=vi,yi=M.type,bi=function(s){if(yi(s)=="number"&&s>=0&&s<=16777215){var o=s>>16,d=s>>8&255,w=s&255;return[o,d,w,1]}throw new Error("unknown num color: "+s)},Ai=bi,ki=Ft,Zs=st,Ws=Z,Ei=M.type,Fi=wi;Zs.prototype.num=function(){return Fi(this._rgb)},ki.num=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(Zs,[null].concat(s,["num"])))},Ws.format.num=Ai,Ws.autodetect.push({p:5,test:function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];if(s.length===1&&Ei(s[0])==="number"&&s[0]>=0&&s[0]<=16777215)return"num"}});var xi=Ft,zr=st,Ys=Z,Xs=M.unpack,Js=M.type,Qs=Math.round;zr.prototype.rgb=function(s){return s===void 0&&(s=!0),s===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Qs)},zr.prototype.rgba=function(s){return s===void 0&&(s=!0),this._rgb.slice(0,4).map(function(o,d){return d<3?s===!1?o:Qs(o):o})},xi.rgb=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(zr,[null].concat(s,["rgb"])))},Ys.format.rgb=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var d=Xs(s,"rgba");return d[3]===void 0&&(d[3]=1),d},Ys.autodetect.push({p:3,test:function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];if(s=Xs(s,"rgba"),Js(s)==="array"&&(s.length===3||s.length===4&&Js(s[3])=="number"&&s[3]>=0&&s[3]<=1))return"rgb"}});var fr=Math.log,Ci=function(s){var o=s/100,d,w,F;return o<66?(d=255,w=o<6?0:-155.25485562709179-.44596950469579133*(w=o-2)+104.49216199393888*fr(w),F=o<20?0:-254.76935184120902+.8274096064007395*(F=o-10)+115.67994401066147*fr(F)):(d=351.97690566805693+.114206453784165*(d=o-55)-40.25366309332127*fr(d),w=325.4494125711974+.07943456536662342*(w=o-50)-28.0852963507957*fr(w),F=255),[d,w,F,1]},Ks=Ci,Bi=Ks,Mi=M.unpack,Si=Math.round,Ti=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];for(var d=Mi(s,"rgb"),w=d[0],F=d[2],S=1e3,E=4e4,I=.4,q;E-S>I;){q=(E+S)*.5;var G=Bi(q);G[2]/G[0]>=F/w?E=q:S=q}return Si(q)},$i=Ti,Ir=Ft,hr=st,Nr=Z,zi=$i;hr.prototype.temp=hr.prototype.kelvin=hr.prototype.temperature=function(){return zi(this._rgb)},Ir.temp=Ir.kelvin=Ir.temperature=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(hr,[null].concat(s,["temp"])))},Nr.format.temp=Nr.format.kelvin=Nr.format.temperature=Ks;var Ii=M.unpack,qr=Math.cbrt,Ni=Math.pow,qi=Math.sign,Pi=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var d=Ii(s,"rgb"),w=d[0],F=d[1],S=d[2],E=[Pr(w/255),Pr(F/255),Pr(S/255)],I=E[0],q=E[1],G=E[2],W=qr(.4122214708*I+.5363325363*q+.0514459929*G),nt=qr(.2119034982*I+.6806995451*q+.1073969566*G),X=qr(.0883024619*I+.2817188376*q+.6299787005*G);return[.2104542553*W+.793617785*nt-.0040720468*X,1.9779984951*W-2.428592205*nt+.4505937099*X,.0259040371*W+.7827717662*nt-.808675766*X]},tu=Pi;function Pr(s){var o=Math.abs(s);return o<.04045?s/12.92:(qi(s)||1)*Ni((o+.055)/1.055,2.4)}var Oi=M.unpack,dr=Math.pow,Li=Math.sign,Vi=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];s=Oi(s,"lab");var d=s[0],w=s[1],F=s[2],S=dr(d+.3963377774*w+.2158037573*F,3),E=dr(d-.1055613458*w-.0638541728*F,3),I=dr(d-.0894841775*w-1.291485548*F,3);return[255*Or(4.0767416621*S-3.3077115913*E+.2309699292*I),255*Or(-1.2684380046*S+2.6097574011*E-.3413193965*I),255*Or(-.0041960863*S-.7034186147*E+1.707614701*I),s.length>3?s[3]:1]},eu=Vi;function Or(s){var o=Math.abs(s);return o>.0031308?(Li(s)||1)*(1.055*dr(o,1/2.4)-.055):s*12.92}var Ui=M.unpack,Ri=M.type,ji=Ft,nu=st,ru=Z,Gi=tu;nu.prototype.oklab=function(){return Gi(this._rgb)},ji.oklab=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(nu,[null].concat(s,["oklab"])))},ru.format.oklab=eu,ru.autodetect.push({p:3,test:function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];if(s=Ui(s,"oklab"),Ri(s)==="array"&&s.length===3)return"oklab"}});var Hi=M.unpack,Zi=tu,Wi=Ls,Yi=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var d=Hi(s,"rgb"),w=d[0],F=d[1],S=d[2],E=Zi(w,F,S),I=E[0],q=E[1],G=E[2];return Wi(I,q,G)},Xi=Yi,Ji=M.unpack,Qi=Vs,Ki=eu,tc=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];s=Ji(s,"lch");var d=s[0],w=s[1],F=s[2],S=Qi(d,w,F),E=S[0],I=S[1],q=S[2],G=Ki(E,I,q),W=G[0],nt=G[1],X=G[2];return[W,nt,X,s.length>3?s[3]:1]},ec=tc,nc=M.unpack,rc=M.type,sc=Ft,su=st,uu=Z,uc=Xi;su.prototype.oklch=function(){return uc(this._rgb)},sc.oklch=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(su,[null].concat(s,["oklch"])))},uu.format.oklch=ec,uu.autodetect.push({p:3,test:function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];if(s=nc(s,"oklch"),rc(s)==="array"&&s.length===3)return"oklch"}});var au=st,ac=M.type;au.prototype.alpha=function(s,o){return o===void 0&&(o=!1),s!==void 0&&ac(s)==="number"?o?(this._rgb[3]=s,this):new au([this._rgb[0],this._rgb[1],this._rgb[2],s],"rgb"):this._rgb[3]};var oc=st;oc.prototype.clipped=function(){return this._rgb._clipped||!1};var ln=st,ic=cr;ln.prototype.darken=function(s){s===void 0&&(s=1);var o=this,d=o.lab();return d[0]-=ic.Kn*s,new ln(d,"lab").alpha(o.alpha(),!0)},ln.prototype.brighten=function(s){return s===void 0&&(s=1),this.darken(-s)},ln.prototype.darker=ln.prototype.darken,ln.prototype.brighter=ln.prototype.brighten;var cc=st;cc.prototype.get=function(s){var o=s.split("."),d=o[0],w=o[1],F=this[d]();if(w){var S=d.indexOf(w)-(d.substr(0,2)==="ok"?2:0);if(S>-1)return F[S];throw new Error("unknown channel "+w+" in mode "+d)}else return F};var $n=st,lc=M.type,fc=Math.pow,hc=1e-7,dc=20;$n.prototype.luminance=function(s){if(s!==void 0&&lc(s)==="number"){if(s===0)return new $n([0,0,0,this._rgb[3]],"rgb");if(s===1)return new $n([255,255,255,this._rgb[3]],"rgb");var o=this.luminance(),d="rgb",w=dc,F=function(E,I){var q=E.interpolate(I,.5,d),G=q.luminance();return Math.abs(s-G)<hc||!w--?q:G>s?F(E,q):F(q,I)},S=(o>s?F(new $n([0,0,0]),this):F(this,new $n([255,255,255]))).rgb();return new $n(S.concat([this._rgb[3]]))}return pc.apply(void 0,this._rgb.slice(0,3))};var pc=function(s,o,d){return s=Lr(s),o=Lr(o),d=Lr(d),.2126*s+.7152*o+.0722*d},Lr=function(s){return s/=255,s<=.03928?s/12.92:fc((s+.055)/1.055,2.4)},Ie={},ou=st,iu=M.type,pr=Ie,cu=function(s,o,d){d===void 0&&(d=.5);for(var w=[],F=arguments.length-3;F-- >0;)w[F]=arguments[F+3];var S=w[0]||"lrgb";if(!pr[S]&&!w.length&&(S=Object.keys(pr)[0]),!pr[S])throw new Error("interpolation mode "+S+" is not defined");return iu(s)!=="object"&&(s=new ou(s)),iu(o)!=="object"&&(o=new ou(o)),pr[S](s,o,d).alpha(s.alpha()+d*(o.alpha()-s.alpha()))},lu=st,gc=cu;lu.prototype.mix=lu.prototype.interpolate=function(s,o){o===void 0&&(o=.5);for(var d=[],w=arguments.length-2;w-- >0;)d[w]=arguments[w+2];return gc.apply(void 0,[this,s,o].concat(d))};var fu=st;fu.prototype.premultiply=function(s){s===void 0&&(s=!1);var o=this._rgb,d=o[3];return s?(this._rgb=[o[0]*d,o[1]*d,o[2]*d,d],this):new fu([o[0]*d,o[1]*d,o[2]*d,d],"rgb")};var Vr=st,Dc=cr;Vr.prototype.saturate=function(s){s===void 0&&(s=1);var o=this,d=o.lch();return d[1]+=Dc.Kn*s,d[1]<0&&(d[1]=0),new Vr(d,"lch").alpha(o.alpha(),!0)},Vr.prototype.desaturate=function(s){return s===void 0&&(s=1),this.saturate(-s)};var hu=st,du=M.type;hu.prototype.set=function(s,o,d){d===void 0&&(d=!1);var w=s.split("."),F=w[0],S=w[1],E=this[F]();if(S){var I=F.indexOf(S)-(F.substr(0,2)==="ok"?2:0);if(I>-1){if(du(o)=="string")switch(o.charAt(0)){case"+":E[I]+=+o;break;case"-":E[I]+=+o;break;case"*":E[I]*=+o.substr(1);break;case"/":E[I]/=+o.substr(1);break;default:E[I]=+o}else if(du(o)==="number")E[I]=o;else throw new Error("unsupported value for Color.set");var q=new hu(E,F);return d?(this._rgb=q._rgb,this):q}throw new Error("unknown channel "+S+" in mode "+F)}else return E};var _c=st,mc=function(s,o,d){var w=s._rgb,F=o._rgb;return new _c(w[0]+d*(F[0]-w[0]),w[1]+d*(F[1]-w[1]),w[2]+d*(F[2]-w[2]),"rgb")};Ie.rgb=mc;var vc=st,Ur=Math.sqrt,zn=Math.pow,wc=function(s,o,d){var w=s._rgb,F=w[0],S=w[1],E=w[2],I=o._rgb,q=I[0],G=I[1],W=I[2];return new vc(Ur(zn(F,2)*(1-d)+zn(q,2)*d),Ur(zn(S,2)*(1-d)+zn(G,2)*d),Ur(zn(E,2)*(1-d)+zn(W,2)*d),"rgb")};Ie.lrgb=wc;var yc=st,bc=function(s,o,d){var w=s.lab(),F=o.lab();return new yc(w[0]+d*(F[0]-w[0]),w[1]+d*(F[1]-w[1]),w[2]+d*(F[2]-w[2]),"lab")};Ie.lab=bc;var pu=st,In=function(s,o,d,w){var F,S,E,I;w==="hsl"?(E=s.hsl(),I=o.hsl()):w==="hsv"?(E=s.hsv(),I=o.hsv()):w==="hcg"?(E=s.hcg(),I=o.hcg()):w==="hsi"?(E=s.hsi(),I=o.hsi()):w==="lch"||w==="hcl"?(w="hcl",E=s.hcl(),I=o.hcl()):w==="oklch"&&(E=s.oklch().reverse(),I=o.oklch().reverse());var q,G,W,nt,X,ot;(w.substr(0,1)==="h"||w==="oklch")&&(F=E,q=F[0],W=F[1],X=F[2],S=I,G=S[0],nt=S[1],ot=S[2]);var at,bt,xt,Mt;return!isNaN(q)&&!isNaN(G)?(G>q&&G-q>180?Mt=G-(q+360):G<q&&q-G>180?Mt=G+360-q:Mt=G-q,bt=q+d*Mt):isNaN(q)?isNaN(G)?bt=Number.NaN:(bt=G,(X==1||X==0)&&w!="hsv"&&(at=nt)):(bt=q,(ot==1||ot==0)&&w!="hsv"&&(at=W)),at===void 0&&(at=W+d*(nt-W)),xt=X+d*(ot-X),w==="oklch"?new pu([xt,at,bt],w):new pu([bt,at,xt],w)},Ac=In,gu=function(s,o,d){return Ac(s,o,d,"lch")};Ie.lch=gu,Ie.hcl=gu;var kc=st,Ec=function(s,o,d){var w=s.num(),F=o.num();return new kc(w+d*(F-w),"num")};Ie.num=Ec;var Fc=In,xc=function(s,o,d){return Fc(s,o,d,"hcg")};Ie.hcg=xc;var Cc=In,Bc=function(s,o,d){return Cc(s,o,d,"hsi")};Ie.hsi=Bc;var Mc=In,Sc=function(s,o,d){return Mc(s,o,d,"hsl")};Ie.hsl=Sc;var Tc=In,$c=function(s,o,d){return Tc(s,o,d,"hsv")};Ie.hsv=$c;var zc=st,Ic=function(s,o,d){var w=s.oklab(),F=o.oklab();return new zc(w[0]+d*(F[0]-w[0]),w[1]+d*(F[1]-w[1]),w[2]+d*(F[2]-w[2]),"oklab")};Ie.oklab=Ic;var Nc=In,qc=function(s,o,d){return Nc(s,o,d,"oklch")};Ie.oklch=qc;var Rr=st,Pc=M.clip_rgb,jr=Math.pow,Gr=Math.sqrt,Hr=Math.PI,Du=Math.cos,_u=Math.sin,Oc=Math.atan2,Lc=function(s,o,d){o===void 0&&(o="lrgb"),d===void 0&&(d=null);var w=s.length;d||(d=Array.from(new Array(w)).map(function(){return 1}));var F=w/d.reduce(function(bt,xt){return bt+xt});if(d.forEach(function(bt,xt){d[xt]*=F}),s=s.map(function(bt){return new Rr(bt)}),o==="lrgb")return Vc(s,d);for(var S=s.shift(),E=S.get(o),I=[],q=0,G=0,W=0;W<E.length;W++)if(E[W]=(E[W]||0)*d[0],I.push(isNaN(E[W])?0:d[0]),o.charAt(W)==="h"&&!isNaN(E[W])){var nt=E[W]/180*Hr;q+=Du(nt)*d[0],G+=_u(nt)*d[0]}var X=S.alpha()*d[0];s.forEach(function(bt,xt){var Mt=bt.get(o);X+=bt.alpha()*d[xt+1];for(var $t=0;$t<E.length;$t++)if(!isNaN(Mt[$t]))if(I[$t]+=d[xt+1],o.charAt($t)==="h"){var ge=Mt[$t]/180*Hr;q+=Du(ge)*d[xt+1],G+=_u(ge)*d[xt+1]}else E[$t]+=Mt[$t]*d[xt+1]});for(var ot=0;ot<E.length;ot++)if(o.charAt(ot)==="h"){for(var at=Oc(G/I[ot],q/I[ot])/Hr*180;at<0;)at+=360;for(;at>=360;)at-=360;E[ot]=at}else E[ot]=E[ot]/I[ot];return X/=w,new Rr(E,o).alpha(X>.99999?1:X,!0)},Vc=function(s,o){for(var d=s.length,w=[0,0,0,0],F=0;F<s.length;F++){var S=s[F],E=o[F]/d,I=S._rgb;w[0]+=jr(I[0],2)*E,w[1]+=jr(I[1],2)*E,w[2]+=jr(I[2],2)*E,w[3]+=I[3]*E}return w[0]=Gr(w[0]),w[1]=Gr(w[1]),w[2]=Gr(w[2]),w[3]>.9999999&&(w[3]=1),new Rr(Pc(w))},qe=Ft,Nn=M.type,Uc=Math.pow,Zr=function(s){var o="rgb",d=qe("#ccc"),w=0,F=[0,1],S=[],E=[0,0],I=!1,q=[],G=!1,W=0,nt=1,X=!1,ot={},at=!0,bt=1,xt=function(J){if(J=J||["#fff","#000"],J&&Nn(J)==="string"&&qe.brewer&&qe.brewer[J.toLowerCase()]&&(J=qe.brewer[J.toLowerCase()]),Nn(J)==="array"){J.length===1&&(J=[J[0],J[0]]),J=J.slice(0);for(var dt=0;dt<J.length;dt++)J[dt]=qe(J[dt]);S.length=0;for(var Et=0;Et<J.length;Et++)S.push(Et/(J.length-1))}return Be(),q=J},Mt=function(J){if(I!=null){for(var dt=I.length-1,Et=0;Et<dt&&J>=I[Et];)Et++;return Et-1}return 0},$t=function(J){return J},ge=function(J){return J},oe=function(J,dt){var Et,At;if(dt==null&&(dt=!1),isNaN(J)||J===null)return d;if(dt)At=J;else if(I&&I.length>2){var De=Mt(J);At=De/(I.length-2)}else nt!==W?At=(J-W)/(nt-W):At=1;At=ge(At),dt||(At=$t(At)),bt!==1&&(At=Uc(At,bt)),At=E[0]+At*(1-E[0]-E[1]),At=Math.min(1,Math.max(0,At));var Lt=Math.floor(At*1e4);if(at&&ot[Lt])Et=ot[Lt];else{if(Nn(q)==="array")for(var St=0;St<S.length;St++){var It=S[St];if(At<=It){Et=q[St];break}if(At>=It&&St===S.length-1){Et=q[St];break}if(At>It&&At<S[St+1]){At=(At-It)/(S[St+1]-It),Et=qe.interpolate(q[St],q[St+1],At,o);break}}else Nn(q)==="function"&&(Et=q(At));at&&(ot[Lt]=Et)}return Et},Be=function(){return ot={}};xt(s);var Bt=function(J){var dt=qe(oe(J));return G&&dt[G]?dt[G]():dt};return Bt.classes=function(J){if(J!=null){if(Nn(J)==="array")I=J,F=[J[0],J[J.length-1]];else{var dt=qe.analyze(F);J===0?I=[dt.min,dt.max]:I=qe.limits(dt,"e",J)}return Bt}return I},Bt.domain=function(J){if(!arguments.length)return F;W=J[0],nt=J[J.length-1],S=[];var dt=q.length;if(J.length===dt&&W!==nt)for(var Et=0,At=Array.from(J);Et<At.length;Et+=1){var De=At[Et];S.push((De-W)/(nt-W))}else{for(var Lt=0;Lt<dt;Lt++)S.push(Lt/(dt-1));if(J.length>2){var St=J.map(function(Nt,qt){return qt/(J.length-1)}),It=J.map(function(Nt){return(Nt-W)/(nt-W)});It.every(function(Nt,qt){return St[qt]===Nt})||(ge=function(Nt){if(Nt<=0||Nt>=1)return Nt;for(var qt=0;Nt>=It[qt+1];)qt++;var Oe=(Nt-It[qt])/(It[qt+1]-It[qt]),nn=St[qt]+Oe*(St[qt+1]-St[qt]);return nn})}}return F=[W,nt],Bt},Bt.mode=function(J){return arguments.length?(o=J,Be(),Bt):o},Bt.range=function(J,dt){return xt(J),Bt},Bt.out=function(J){return G=J,Bt},Bt.spread=function(J){return arguments.length?(w=J,Bt):w},Bt.correctLightness=function(J){return J==null&&(J=!0),X=J,Be(),X?$t=function(dt){for(var Et=oe(0,!0).lab()[0],At=oe(1,!0).lab()[0],De=Et>At,Lt=oe(dt,!0).lab()[0],St=Et+(At-Et)*dt,It=Lt-St,Nt=0,qt=1,Oe=20;Math.abs(It)>.01&&Oe-- >0;)(function(){return De&&(It*=-1),It<0?(Nt=dt,dt+=(qt-dt)*.5):(qt=dt,dt+=(Nt-dt)*.5),Lt=oe(dt,!0).lab()[0],It=Lt-St})();return dt}:$t=function(dt){return dt},Bt},Bt.padding=function(J){return J!=null?(Nn(J)==="number"&&(J=[J,J]),E=J,Bt):E},Bt.colors=function(J,dt){arguments.length<2&&(dt="hex");var Et=[];if(arguments.length===0)Et=q.slice(0);else if(J===1)Et=[Bt(.5)];else if(J>1){var At=F[0],De=F[1]-At;Et=Rc(0,J).map(function(qt){return Bt(At+qt/(J-1)*De)})}else{s=[];var Lt=[];if(I&&I.length>2)for(var St=1,It=I.length,Nt=1<=It;Nt?St<It:St>It;Nt?St++:St--)Lt.push((I[St-1]+I[St])*.5);else Lt=F;Et=Lt.map(function(qt){return Bt(qt)})}return qe[dt]&&(Et=Et.map(function(qt){return qt[dt]()})),Et},Bt.cache=function(J){return J!=null?(at=J,Bt):at},Bt.gamma=function(J){return J!=null?(bt=J,Bt):bt},Bt.nodata=function(J){return J!=null?(d=qe(J),Bt):d},Bt};function Rc(s,o,d){for(var w=[],F=s<o,S=o,E=s;F?E<S:E>S;F?E++:E--)w.push(E);return w}var Xn=st,jc=Zr,Gc=function(s){for(var o=[1,1],d=1;d<s;d++){for(var w=[1],F=1;F<=o.length;F++)w[F]=(o[F]||0)+o[F-1];o=w}return o},Hc=function(s){var o,d,w,F,S,E,I;if(s=s.map(function(X){return new Xn(X)}),s.length===2)o=s.map(function(X){return X.lab()}),S=o[0],E=o[1],F=function(X){var ot=[0,1,2].map(function(at){return S[at]+X*(E[at]-S[at])});return new Xn(ot,"lab")};else if(s.length===3)d=s.map(function(X){return X.lab()}),S=d[0],E=d[1],I=d[2],F=function(X){var ot=[0,1,2].map(function(at){return(1-X)*(1-X)*S[at]+2*(1-X)*X*E[at]+X*X*I[at]});return new Xn(ot,"lab")};else if(s.length===4){var q;w=s.map(function(X){return X.lab()}),S=w[0],E=w[1],I=w[2],q=w[3],F=function(X){var ot=[0,1,2].map(function(at){return(1-X)*(1-X)*(1-X)*S[at]+3*(1-X)*(1-X)*X*E[at]+3*(1-X)*X*X*I[at]+X*X*X*q[at]});return new Xn(ot,"lab")}}else if(s.length>=5){var G,W,nt;G=s.map(function(X){return X.lab()}),nt=s.length-1,W=Gc(nt),F=function(X){var ot=1-X,at=[0,1,2].map(function(bt){return G.reduce(function(xt,Mt,$t){return xt+W[$t]*Math.pow(ot,nt-$t)*Math.pow(X,$t)*Mt[bt]},0)});return new Xn(at,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return F},Zc=function(s){var o=Hc(s);return o.scale=function(){return jc(o)},o},Wr=Ft,Pe=function(s,o,d){if(!Pe[d])throw new Error("unknown blend mode "+d);return Pe[d](s,o)},tn=function(s){return function(o,d){var w=Wr(d).rgb(),F=Wr(o).rgb();return Wr.rgb(s(w,F))}},en=function(s){return function(o,d){var w=[];return w[0]=s(o[0],d[0]),w[1]=s(o[1],d[1]),w[2]=s(o[2],d[2]),w}},Wc=function(s){return s},Yc=function(s,o){return s*o/255},Xc=function(s,o){return s>o?o:s},Jc=function(s,o){return s>o?s:o},Qc=function(s,o){return 255*(1-(1-s/255)*(1-o/255))},Kc=function(s,o){return o<128?2*s*o/255:255*(1-2*(1-s/255)*(1-o/255))},t0=function(s,o){return 255*(1-(1-o/255)/(s/255))},e0=function(s,o){return s===255?255:(s=255*(o/255)/(1-s/255),s>255?255:s)};Pe.normal=tn(en(Wc)),Pe.multiply=tn(en(Yc)),Pe.screen=tn(en(Qc)),Pe.overlay=tn(en(Kc)),Pe.darken=tn(en(Xc)),Pe.lighten=tn(en(Jc)),Pe.dodge=tn(en(e0)),Pe.burn=tn(en(t0));for(var n0=Pe,Yr=M.type,r0=M.clip_rgb,s0=M.TWOPI,u0=Math.pow,a0=Math.sin,o0=Math.cos,mu=Ft,i0=function(s,o,d,w,F){s===void 0&&(s=300),o===void 0&&(o=-1.5),d===void 0&&(d=1),w===void 0&&(w=1),F===void 0&&(F=[0,1]);var S=0,E;Yr(F)==="array"?E=F[1]-F[0]:(E=0,F=[F,F]);var I=function(q){var G=s0*((s+120)/360+o*q),W=u0(F[0]+E*q,w),nt=S!==0?d[0]+q*S:d,X=nt*W*(1-W)/2,ot=o0(G),at=a0(G),bt=W+X*(-.14861*ot+1.78277*at),xt=W+X*(-.29227*ot-.90649*at),Mt=W+X*(1.97294*ot);return mu(r0([bt*255,xt*255,Mt*255,1]))};return I.start=function(q){return q==null?s:(s=q,I)},I.rotations=function(q){return q==null?o:(o=q,I)},I.gamma=function(q){return q==null?w:(w=q,I)},I.hue=function(q){return q==null?d:(d=q,Yr(d)==="array"?(S=d[1]-d[0],S===0&&(d=d[1])):S=0,I)},I.lightness=function(q){return q==null?F:(Yr(q)==="array"?(F=q,E=q[1]-q[0]):(F=[q,q],E=0),I)},I.scale=function(){return mu.scale(I)},I.hue(d),I},c0=st,l0="0123456789abcdef",f0=Math.floor,h0=Math.random,d0=function(){for(var s="#",o=0;o<6;o++)s+=l0.charAt(f0(h0()*16));return new c0(s,"hex")},Xr=j,vu=Math.log,p0=Math.pow,g0=Math.floor,D0=Math.abs,wu=function(s,o){o===void 0&&(o=null);var d={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Xr(s)==="object"&&(s=Object.values(s)),s.forEach(function(w){o&&Xr(w)==="object"&&(w=w[o]),w!=null&&!isNaN(w)&&(d.values.push(w),d.sum+=w,w<d.min&&(d.min=w),w>d.max&&(d.max=w),d.count+=1)}),d.domain=[d.min,d.max],d.limits=function(w,F){return yu(d,w,F)},d},yu=function(s,o,d){o===void 0&&(o="equal"),d===void 0&&(d=7),Xr(s)=="array"&&(s=wu(s));var w=s.min,F=s.max,S=s.values.sort(function(Qr,Kr){return Qr-Kr});if(d===1)return[w,F];var E=[];if(o.substr(0,1)==="c"&&(E.push(w),E.push(F)),o.substr(0,1)==="e"){E.push(w);for(var I=1;I<d;I++)E.push(w+I/d*(F-w));E.push(F)}else if(o.substr(0,1)==="l"){if(w<=0)throw new Error("Logarithmic scales are only possible for values > 0");var q=Math.LOG10E*vu(w),G=Math.LOG10E*vu(F);E.push(w);for(var W=1;W<d;W++)E.push(p0(10,q+W/d*(G-q)));E.push(F)}else if(o.substr(0,1)==="q"){E.push(w);for(var nt=1;nt<d;nt++){var X=(S.length-1)*nt/d,ot=g0(X);if(ot===X)E.push(S[ot]);else{var at=X-ot;E.push(S[ot]*(1-at)+S[ot+1]*at)}}E.push(F)}else if(o.substr(0,1)==="k"){var bt,xt=S.length,Mt=new Array(xt),$t=new Array(d),ge=!0,oe=0,Be=null;Be=[],Be.push(w);for(var Bt=1;Bt<d;Bt++)Be.push(w+Bt/d*(F-w));for(Be.push(F);ge;){for(var J=0;J<d;J++)$t[J]=0;for(var dt=0;dt<xt;dt++)for(var Et=S[dt],At=Number.MAX_VALUE,De=void 0,Lt=0;Lt<d;Lt++){var St=D0(Be[Lt]-Et);St<At&&(At=St,De=Lt),$t[De]++,Mt[dt]=De}for(var It=new Array(d),Nt=0;Nt<d;Nt++)It[Nt]=null;for(var qt=0;qt<xt;qt++)bt=Mt[qt],It[bt]===null?It[bt]=S[qt]:It[bt]+=S[qt];for(var Oe=0;Oe<d;Oe++)It[Oe]*=1/$t[Oe];ge=!1;for(var nn=0;nn<d;nn++)if(It[nn]!==Be[nn]){ge=!0;break}Be=It,oe++,oe>200&&(ge=!1)}for(var rn={},qn=0;qn<d;qn++)rn[qn]=[];for(var Pn=0;Pn<xt;Pn++)bt=Mt[Pn],rn[bt].push(S[Pn]);for(var Ze=[],fn=0;fn<d;fn++)Ze.push(rn[fn][0]),Ze.push(rn[fn][rn[fn].length-1]);Ze=Ze.sort(function(Qr,Kr){return Qr-Kr}),E.push(Ze[0]);for(var Jn=1;Jn<Ze.length;Jn+=2){var hn=Ze[Jn];!isNaN(hn)&&E.indexOf(hn)===-1&&E.push(hn)}}return E},bu={analyze:wu,limits:yu},Au=st,_0=function(s,o){s=new Au(s),o=new Au(o);var d=s.luminance(),w=o.luminance();return d>w?(d+.05)/(w+.05):(w+.05)/(d+.05)},ku=st,He=Math.sqrt,Xt=Math.pow,m0=Math.min,v0=Math.max,Eu=Math.atan2,Fu=Math.abs,gr=Math.cos,xu=Math.sin,w0=Math.exp,Cu=Math.PI,y0=function(s,o,d,w,F){d===void 0&&(d=1),w===void 0&&(w=1),F===void 0&&(F=1);var S=function(hn){return 360*hn/(2*Cu)},E=function(hn){return 2*Cu*hn/360};s=new ku(s),o=new ku(o);var I=Array.from(s.lab()),q=I[0],G=I[1],W=I[2],nt=Array.from(o.lab()),X=nt[0],ot=nt[1],at=nt[2],bt=(q+X)/2,xt=He(Xt(G,2)+Xt(W,2)),Mt=He(Xt(ot,2)+Xt(at,2)),$t=(xt+Mt)/2,ge=.5*(1-He(Xt($t,7)/(Xt($t,7)+Xt(25,7)))),oe=G*(1+ge),Be=ot*(1+ge),Bt=He(Xt(oe,2)+Xt(W,2)),J=He(Xt(Be,2)+Xt(at,2)),dt=(Bt+J)/2,Et=S(Eu(W,oe)),At=S(Eu(at,Be)),De=Et>=0?Et:Et+360,Lt=At>=0?At:At+360,St=Fu(De-Lt)>180?(De+Lt+360)/2:(De+Lt)/2,It=1-.17*gr(E(St-30))+.24*gr(E(2*St))+.32*gr(E(3*St+6))-.2*gr(E(4*St-63)),Nt=Lt-De;Nt=Fu(Nt)<=180?Nt:Lt<=De?Nt+360:Nt-360,Nt=2*He(Bt*J)*xu(E(Nt)/2);var qt=X-q,Oe=J-Bt,nn=1+.015*Xt(bt-50,2)/He(20+Xt(bt-50,2)),rn=1+.045*dt,qn=1+.015*dt*It,Pn=30*w0(-Xt((St-275)/25,2)),Ze=2*He(Xt(dt,7)/(Xt(dt,7)+Xt(25,7))),fn=-Ze*xu(2*E(Pn)),Jn=He(Xt(qt/(d*nn),2)+Xt(Oe/(w*rn),2)+Xt(Nt/(F*qn),2)+fn*(Oe/(w*rn))*(Nt/(F*qn)));return v0(0,m0(100,Jn))},Bu=st,b0=function(s,o,d){d===void 0&&(d="lab"),s=new Bu(s),o=new Bu(o);var w=s.get(d),F=o.get(d),S=0;for(var E in w){var I=(w[E]||0)-(F[E]||0);S+=I*I}return Math.sqrt(S)},A0=st,k0=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];try{return new(Function.prototype.bind.apply(A0,[null].concat(s))),!0}catch{return!1}},Mu=Ft,Su=Zr,E0={cool:function(){return Su([Mu.hsl(180,1,.9),Mu.hsl(250,.7,.4)])},hot:function(){return Su(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Dr={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Jr=0,Tu=Object.keys(Dr);Jr<Tu.length;Jr+=1){var $u=Tu[Jr];Dr[$u.toLowerCase()]=Dr[$u]}var F0=Dr,ae=Ft;ae.average=Lc,ae.bezier=Zc,ae.blend=n0,ae.cubehelix=i0,ae.mix=ae.interpolate=cu,ae.random=d0,ae.scale=Zr,ae.analyze=bu.analyze,ae.contrast=_0,ae.deltaE=y0,ae.distance=b0,ae.limits=bu.limits,ae.valid=k0,ae.scales=E0,ae.colors=Gs,ae.brewer=F0;var x0=ae;return x0})})(za);var vf=za.exports;const H1=mf(vf),bs=(e,t)=>((e+t-1)/t|0)*t;function wf(e){return Object.keys(e)}function yf(e,t){return new Array(e).fill(0).map((n,u)=>t(u))}const sr=e=>e&&typeof e.length=="number"&&e.buffer instanceof ArrayBuffer&&typeof e.byteLength=="number",Ia=e=>e,Tt=Ia({i32:{numElements:1,align:4,size:4,type:"i32",View:Int32Array},u32:{numElements:1,align:4,size:4,type:"u32",View:Uint32Array},f32:{numElements:1,align:4,size:4,type:"f32",View:Float32Array},f16:{numElements:1,align:2,size:2,type:"u16",View:Uint16Array},vec2f:{numElements:2,align:8,size:8,type:"f32",View:Float32Array},vec2i:{numElements:2,align:8,size:8,type:"i32",View:Int32Array},vec2u:{numElements:2,align:8,size:8,type:"u32",View:Uint32Array},vec2h:{numElements:2,align:4,size:4,type:"u16",View:Uint16Array},vec3i:{numElements:3,align:16,size:12,type:"i32",View:Int32Array},vec3u:{numElements:3,align:16,size:12,type:"u32",View:Uint32Array},vec3f:{numElements:3,align:16,size:12,type:"f32",View:Float32Array},vec3h:{numElements:3,align:8,size:6,type:"u16",View:Uint16Array},vec4i:{numElements:4,align:16,size:16,type:"i32",View:Int32Array},vec4u:{numElements:4,align:16,size:16,type:"u32",View:Uint32Array},vec4f:{numElements:4,align:16,size:16,type:"f32",View:Float32Array},vec4h:{numElements:4,align:8,size:8,type:"u16",View:Uint16Array},mat2x2f:{numElements:4,align:8,size:16,type:"f32",View:Float32Array},mat2x2h:{numElements:4,align:4,size:8,type:"u16",View:Uint16Array},mat3x2f:{numElements:6,align:8,size:24,type:"f32",View:Float32Array},mat3x2h:{numElements:6,align:4,size:12,type:"u16",View:Uint16Array},mat4x2f:{numElements:8,align:8,size:32,type:"f32",View:Float32Array},mat4x2h:{numElements:8,align:4,size:16,type:"u16",View:Uint16Array},mat2x3f:{numElements:8,align:16,size:32,pad:[3,1],type:"f32",View:Float32Array},mat2x3h:{numElements:8,align:8,size:16,pad:[3,1],type:"u16",View:Uint16Array},mat3x3f:{numElements:12,align:16,size:48,pad:[3,1],type:"f32",View:Float32Array},mat3x3h:{numElements:12,align:8,size:24,pad:[3,1],type:"u16",View:Uint16Array},mat4x3f:{numElements:16,align:16,size:64,pad:[3,1],type:"f32",View:Float32Array},mat4x3h:{numElements:16,align:8,size:32,pad:[3,1],type:"u16",View:Uint16Array},mat2x4f:{numElements:8,align:16,size:32,type:"f32",View:Float32Array},mat2x4h:{numElements:8,align:8,size:16,type:"u16",View:Uint16Array},mat3x4f:{numElements:12,align:16,size:48,pad:[3,1],type:"f32",View:Float32Array},mat3x4h:{numElements:12,align:8,size:24,pad:[3,1],type:"u16",View:Uint16Array},mat4x4f:{numElements:16,align:16,size:64,type:"f32",View:Float32Array},mat4x4h:{numElements:16,align:8,size:32,type:"u16",View:Uint16Array},bool:{numElements:0,align:1,size:0,type:"bool",View:Uint32Array}}),Zn=Ia({...Tt,"atomic<i32>":Tt.i32,"atomic<u32>":Tt.u32,"vec2<i32>":Tt.vec2i,"vec2<u32>":Tt.vec2u,"vec2<f32>":Tt.vec2f,"vec2<f16>":Tt.vec2h,"vec3<i32>":Tt.vec3i,"vec3<u32>":Tt.vec3u,"vec3<f32>":Tt.vec3f,"vec3<f16>":Tt.vec3h,"vec4<i32>":Tt.vec4i,"vec4<u32>":Tt.vec4u,"vec4<f32>":Tt.vec4f,"vec4<f16>":Tt.vec4h,"mat2x2<f32>":Tt.mat2x2f,"mat2x2<f16>":Tt.mat2x2h,"mat3x2<f32>":Tt.mat3x2f,"mat3x2<f16>":Tt.mat3x2h,"mat4x2<f32>":Tt.mat4x2f,"mat4x2<f16>":Tt.mat4x2h,"mat2x3<f32>":Tt.mat2x3f,"mat2x3<f16>":Tt.mat2x3h,"mat3x3<f32>":Tt.mat3x3f,"mat3x3<f16>":Tt.mat3x3h,"mat4x3<f32>":Tt.mat4x3f,"mat4x3<f16>":Tt.mat4x3h,"mat2x4<f32>":Tt.mat2x4f,"mat2x4<f16>":Tt.mat2x4h,"mat3x4<f32>":Tt.mat3x4f,"mat3x4<f16>":Tt.mat3x4h,"mat4x4<f32>":Tt.mat4x4f,"mat4x4<f16>":Tt.mat4x4h}),bf=wf(Zn);function Af(e=[],t){const n=new Set;for(const u of bf){const h=Zn[u];n.has(h)||(n.add(h),h.flatten=e.includes(u)?t:!t)}}Af();function kf(e){const t=e;if(t.elementType)return t.size;{const u=e,h=t.numElements||1;if(u.fields)return e.size*h;{const _=e,{align:b}=Zn[_.type];return h>1?bs(e.size,b)*h:e.size}}}function Xu(e,t,n,u){const{size:h,type:_}=e;try{const{View:b,align:z}=Zn[_],P=u!==void 0,j=P?bs(h,z):h,K=j/b.BYTES_PER_ELEMENT,Y=P?u===0?(t.byteLength-n)/j:u:1;return new b(t,n,K*Y)}catch{throw new Error(`unknown type: ${_}`)}}function Ef(e){return!e.fields&&!e.elementType}function Ff(e,t,n){const u=n||0,h=new ArrayBuffer(kf(e)),_=(b,z)=>{const P=b,j=P.elementType;if(j){if(Ef(j)&&Zn[j.type].flatten)return Xu(j,h,z,P.numElements);{const{size:K}=Na(b),Y=P.numElements===0?(h.byteLength-z)/K:P.numElements;return yf(Y,ut=>_(j,z+K*ut))}}else{if(typeof b=="string")throw Error("unreachable");{const K=b.fields;if(K){const Y={};for(const[ut,{type:et,offset:rt}]of Object.entries(K))Y[ut]=_(et,z+rt);return Y}else return Xu(b,h,z)}}};return{views:_(e,u),arrayBuffer:h}}function hs(e,t){if(e!==void 0)if(sr(t)){const n=t;if(n.length===1&&typeof e=="number")n[0]=e;else if(Array.isArray(e[0])||sr(e[0])){const u=e[0].length,h=u===3?4:u;for(let _=0;_<e.length;++_){const b=_*h;n.set(e[_],b)}}else n.set(e)}else if(Array.isArray(t)){const n=t;e.forEach((u,h)=>{hs(u,n[h])})}else{const n=t;for(const[u,h]of Object.entries(e)){const _=n[u];_&&hs(h,_)}}}function Z1(e,t,n=0){const u=e,h=u.group===void 0?e:u.typeDefinition,_=Ff(h,t,n);return{..._,set(b){hs(b,_.views)}}}function ds(e){const n=e.elementType;if(n)return ds(n);const h=e.fields;if(h)return Object.values(h).reduce((z,{type:P})=>Math.max(z,ds(P)),0);const{type:_}=e,{align:b}=Zn[_];return b}function Na(e){const n=e.elementType;if(n){const _=n.size,b=ds(n);return{unalignedSize:_,align:b,size:bs(_,b)}}const h=e.fields;if(h){const _=Object.values(h).pop();if(_.type.size===0)return Na(_.type)}return{size:0,unalignedSize:0,align:1}}class xf{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}let Ke=class{constructor(){}get isAstNode(){return!0}get astNodeType(){return""}evaluate(t){throw new Error("Cannot evaluate node")}evaluateString(t){return this.evaluate(t).toString()}search(t){}searchBlock(t,n){if(t){n(Ar.instance);for(const u of t)u instanceof Array?this.searchBlock(u,n):u.search(n);n(kr.instance)}}};class Ar extends Ke{}Ar.instance=new Ar;class kr extends Ke{}kr.instance=new kr;class Rt extends Ke{constructor(){super()}}let ps=class extends Rt{constructor(t,n,u,h,_,b){super(),this.calls=new Set,this.name=t,this.args=n,this.returnType=u,this.body=h,this.startLine=_,this.endLine=b}get astNodeType(){return"function"}search(t){this.searchBlock(this.body,t)}};class Cf extends Rt{constructor(t){super(),this.expression=t}get astNodeType(){return"staticAssert"}search(t){this.expression.search(t)}}class Bf extends Rt{constructor(t,n){super(),this.condition=t,this.body=n}get astNodeType(){return"while"}search(t){this.condition.search(t),this.searchBlock(this.body,t)}}class Mf extends Rt{constructor(t){super(),this.body=t}get astNodeType(){return"continuing"}search(t){this.searchBlock(this.body,t)}}class Sf extends Rt{constructor(t,n,u,h){super(),this.init=t,this.condition=n,this.increment=u,this.body=h}get astNodeType(){return"for"}search(t){var n,u,h;(n=this.init)===null||n===void 0||n.search(t),(u=this.condition)===null||u===void 0||u.search(t),(h=this.increment)===null||h===void 0||h.search(t),this.searchBlock(this.body,t)}}class mn extends Rt{constructor(t,n,u,h,_){super(),this.name=t,this.type=n,this.storage=u,this.access=h,this.value=_}get astNodeType(){return"var"}search(t){var n;t(this),(n=this.value)===null||n===void 0||n.search(t)}}class qa extends Rt{constructor(t,n,u){super(),this.name=t,this.type=n,this.value=u}get astNodeType(){return"override"}search(t){var n;(n=this.value)===null||n===void 0||n.search(t)}}class gs extends Rt{constructor(t,n,u,h,_){super(),this.name=t,this.type=n,this.storage=u,this.access=h,this.value=_}get astNodeType(){return"let"}search(t){var n;t(this),(n=this.value)===null||n===void 0||n.search(t)}}class Ju extends Rt{constructor(t,n,u,h,_){super(),this.name=t,this.type=n,this.storage=u,this.access=h,this.value=_}get astNodeType(){return"const"}evaluate(t){return this.value.evaluate(t)}search(t){var n;t(this),(n=this.value)===null||n===void 0||n.search(t)}}var Gn;(function(e){e.increment="++",e.decrement="--"})(Gn||(Gn={}));(function(e){function t(n){const u=n;if(u=="parse")throw new Error("Invalid value for IncrementOperator");return e[u]}e.parse=t})(Gn||(Gn={}));class Tf extends Rt{constructor(t,n){super(),this.operator=t,this.variable=n}get astNodeType(){return"increment"}search(t){this.variable.search(t)}}var ur;(function(e){e.assign="=",e.addAssign="+=",e.subtractAssin="-=",e.multiplyAssign="*=",e.divideAssign="/=",e.moduloAssign="%=",e.andAssign="&=",e.orAssign="|=",e.xorAssign="^=",e.shiftLeftAssign="<<=",e.shiftRightAssign=">>="})(ur||(ur={}));(function(e){function t(n){const u=n;if(u=="parse")throw new Error("Invalid value for AssignOperator");return u}e.parse=t})(ur||(ur={}));class $f extends Rt{constructor(t,n,u){super(),this.operator=t,this.variable=n,this.value=u}get astNodeType(){return"assign"}search(t){this.variable.search(t),this.value.search(t)}}class Pa extends Rt{constructor(t,n){super(),this.name=t,this.args=n}get astNodeType(){return"call"}search(t){for(const n of this.args)n.search(t);t(this)}}class zf extends Rt{constructor(t,n){super(),this.body=t,this.continuing=n}get astNodeType(){return"loop"}}class If extends Rt{constructor(t,n){super(),this.condition=t,this.body=n}get astNodeType(){return"body"}}class Nf extends Rt{constructor(t,n,u,h){super(),this.condition=t,this.body=n,this.elseif=u,this.else=h}get astNodeType(){return"if"}search(t){this.condition.search(t),this.searchBlock(this.body,t),this.searchBlock(this.elseif,t),this.searchBlock(this.else,t)}}class qf extends Rt{constructor(t){super(),this.value=t}get astNodeType(){return"return"}search(t){var n;(n=this.value)===null||n===void 0||n.search(t)}}class Pf extends Rt{constructor(t){super(),this.name=t}get astNodeType(){return"enable"}}class Of extends Rt{constructor(t){super(),this.extensions=t}get astNodeType(){return"requires"}}class Lf extends Rt{constructor(t,n){super(),this.severity=t,this.rule=n}get astNodeType(){return"diagnostic"}}class Oa extends Rt{constructor(t,n){super(),this.name=t,this.type=n}get astNodeType(){return"alias"}}class Vf extends Rt{constructor(){super()}get astNodeType(){return"discard"}}class Uf extends Rt{constructor(){super()}get astNodeType(){return"break"}}class Rf extends Rt{constructor(){super()}get astNodeType(){return"continue"}}class An extends Rt{constructor(t){super(),this.name=t}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}}class Dn extends An{constructor(t,n,u,h){super(t),this.members=n,this.startLine=u,this.endLine=h}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(t){for(let n=0;n<this.members.length;n++)if(this.members[n].name==t)return n;return-1}}class La extends An{constructor(t,n,u){super(t),this.format=n,this.access=u}get astNodeType(){return"template"}}class jf extends An{constructor(t,n,u,h){super(t),this.storage=n,this.type=u,this.access=h}get astNodeType(){return"pointer"}}class Va extends An{constructor(t,n,u,h){super(t),this.attributes=n,this.format=u,this.count=h}get astNodeType(){return"array"}get isArray(){return!0}}class er extends An{constructor(t,n,u){super(t),this.format=n,this.access=u}get astNodeType(){return"sampler"}}class Re extends Ke{constructor(){super()}}class Qu extends Re{constructor(t){super(),this.value=t}get astNodeType(){return"stringExpr"}toString(){return this.value}evaluateString(){return this.value}}class Un extends Re{constructor(t,n){super(),this.type=t,this.args=n}get astNodeType(){return"createExpr"}search(t){t(this);for(const n of this.args)n.search(t)}}class Ua extends Re{constructor(t,n){super(),this.name=t,this.args=n}get astNodeType(){return"callExpr"}evaluate(t){switch(this.name){case"abs":return Math.abs(this.args[0].evaluate(t));case"acos":return Math.acos(this.args[0].evaluate(t));case"acosh":return Math.acosh(this.args[0].evaluate(t));case"asin":return Math.asin(this.args[0].evaluate(t));case"asinh":return Math.asinh(this.args[0].evaluate(t));case"atan":return Math.atan(this.args[0].evaluate(t));case"atan2":return Math.atan2(this.args[0].evaluate(t),this.args[1].evaluate(t));case"atanh":return Math.atanh(this.args[0].evaluate(t));case"ceil":return Math.ceil(this.args[0].evaluate(t));case"clamp":return Math.min(Math.max(this.args[0].evaluate(t),this.args[1].evaluate(t)),this.args[2].evaluate(t));case"cos":return Math.cos(this.args[0].evaluate(t));case"degrees":return this.args[0].evaluate(t)*180/Math.PI;case"distance":return Math.sqrt(Math.pow(this.args[0].evaluate(t)-this.args[1].evaluate(t),2));case"dot":case"exp":return Math.exp(this.args[0].evaluate(t));case"exp2":return Math.pow(2,this.args[0].evaluate(t));case"floor":return Math.floor(this.args[0].evaluate(t));case"fma":return this.args[0].evaluate(t)*this.args[1].evaluate(t)+this.args[2].evaluate(t);case"fract":return this.args[0].evaluate(t)-Math.floor(this.args[0].evaluate(t));case"inverseSqrt":return 1/Math.sqrt(this.args[0].evaluate(t));case"log":return Math.log(this.args[0].evaluate(t));case"log2":return Math.log2(this.args[0].evaluate(t));case"max":return Math.max(this.args[0].evaluate(t),this.args[1].evaluate(t));case"min":return Math.min(this.args[0].evaluate(t),this.args[1].evaluate(t));case"mix":return this.args[0].evaluate(t)*(1-this.args[2].evaluate(t))+this.args[1].evaluate(t)*this.args[2].evaluate(t);case"modf":return this.args[0].evaluate(t)-Math.floor(this.args[0].evaluate(t));case"pow":return Math.pow(this.args[0].evaluate(t),this.args[1].evaluate(t));case"radians":return this.args[0].evaluate(t)*Math.PI/180;case"round":return Math.round(this.args[0].evaluate(t));case"sign":return Math.sign(this.args[0].evaluate(t));case"sin":return Math.sin(this.args[0].evaluate(t));case"sinh":return Math.sinh(this.args[0].evaluate(t));case"saturate":return Math.min(Math.max(this.args[0].evaluate(t),0),1);case"smoothstep":return this.args[0].evaluate(t)*this.args[0].evaluate(t)*(3-2*this.args[0].evaluate(t));case"sqrt":return Math.sqrt(this.args[0].evaluate(t));case"step":return this.args[0].evaluate(t)<this.args[1].evaluate(t)?0:1;case"tan":return Math.tan(this.args[0].evaluate(t));case"tanh":return Math.tanh(this.args[0].evaluate(t));case"trunc":return Math.trunc(this.args[0].evaluate(t));default:throw new Error("Non const function: "+this.name)}}search(t){for(const n of this.args)n.search(t);t(this)}}class Ds extends Re{constructor(t){super(),this.name=t}get astNodeType(){return"varExpr"}search(t){t(this),this.postfix&&this.postfix.search(t)}evaluate(t){const n=t.constants.get(this.name);if(!n)throw new Error("Cannot evaluate node");return n.evaluate(t)}}class Ku extends Re{constructor(t,n){super(),this.name=t,this.initializer=n}get astNodeType(){return"constExpr"}evaluate(t){var n,u;if(this.initializer instanceof Un){const h=(n=this.postfix)===null||n===void 0?void 0:n.evaluateString(t),_=(u=this.initializer.type)===null||u===void 0?void 0:u.name,b=t.structs.get(_),z=b==null?void 0:b.getMemberIndex(h);if(z!=-1)return this.initializer.args[z].evaluate(t);console.log(z)}return this.initializer.evaluate(t)}search(t){this.initializer.search(t)}}class ta extends Re{constructor(t){super(),this.value=t}get astNodeType(){return"literalExpr"}evaluate(){return this.value}}class Gf extends Re{constructor(t,n){super(),this.type=t,this.value=n}get astNodeType(){return"bitcastExpr"}search(t){this.value.search(t)}}class Hf extends Re{constructor(t,n){super(),this.type=t,this.args=n}get astNodeType(){return"typecastExpr"}evaluate(t){return this.args[0].evaluate(t)}search(t){this.searchBlock(this.args,t)}}class ea extends Re{constructor(t){super(),this.contents=t}get astNodeType(){return"groupExpr"}evaluate(t){return this.contents[0].evaluate(t)}search(t){this.searchBlock(this.contents,t)}}class Zf extends Re{constructor(t){super(),this.index=t}search(t){this.index.search(t)}}class Ra extends Re{constructor(){super()}}class Wf extends Ra{constructor(t,n){super(),this.operator=t,this.right=n}get astNodeType(){return"unaryOp"}evaluate(t){switch(this.operator){case"+":return this.right.evaluate(t);case"-":return-this.right.evaluate(t);case"!":return this.right.evaluate(t)?0:1;case"~":return~this.right.evaluate(t);default:throw new Error("Unknown unary operator: "+this.operator)}}search(t){this.right.search(t)}}class je extends Ra{constructor(t,n,u){super(),this.operator=t,this.left=n,this.right=u}get astNodeType(){return"binaryOp"}evaluate(t){switch(this.operator){case"+":return this.left.evaluate(t)+this.right.evaluate(t);case"-":return this.left.evaluate(t)-this.right.evaluate(t);case"*":return this.left.evaluate(t)*this.right.evaluate(t);case"/":return this.left.evaluate(t)/this.right.evaluate(t);case"%":return this.left.evaluate(t)%this.right.evaluate(t);case"==":return this.left.evaluate(t)==this.right.evaluate(t)?1:0;case"!=":return this.left.evaluate(t)!=this.right.evaluate(t)?1:0;case"<":return this.left.evaluate(t)<this.right.evaluate(t)?1:0;case">":return this.left.evaluate(t)>this.right.evaluate(t)?1:0;case"<=":return this.left.evaluate(t)<=this.right.evaluate(t)?1:0;case">=":return this.left.evaluate(t)>=this.right.evaluate(t)?1:0;case"&&":return this.left.evaluate(t)&&this.right.evaluate(t)?1:0;case"||":return this.left.evaluate(t)||this.right.evaluate(t)?1:0;default:throw new Error(`Unknown operator ${this.operator}`)}}search(t){this.left.search(t),this.right.search(t)}}class ja extends Ke{constructor(){super()}}class Yf extends ja{constructor(t,n){super(),this.selector=t,this.body=n}get astNodeType(){return"case"}search(t){this.searchBlock(this.body,t)}}class Xf extends ja{constructor(t){super(),this.body=t}get astNodeType(){return"default"}search(t){this.searchBlock(this.body,t)}}class Jf extends Ke{constructor(t,n,u){super(),this.name=t,this.type=n,this.attributes=u}get astNodeType(){return"argument"}}class Qf extends Ke{constructor(t,n){super(),this.condition=t,this.body=n}get astNodeType(){return"elseif"}search(t){this.condition.search(t),this.searchBlock(this.body,t)}}class Kf extends Ke{constructor(t,n,u){super(),this.name=t,this.type=n,this.attributes=u}get astNodeType(){return"member"}}class na extends Ke{constructor(t,n){super(),this.name=t,this.value=n}get astNodeType(){return"attribute"}}var N,T;(function(e){e[e.token=0]="token",e[e.keyword=1]="keyword",e[e.reserved=2]="reserved"})(T||(T={}));class ${constructor(t,n,u){this.name=t,this.type=n,this.rule=u}toString(){return this.name}}class D{}N=D;D.none=new $("",T.reserved,"");D.eof=new $("EOF",T.token,"");D.reserved={asm:new $("asm",T.reserved,"asm"),bf16:new $("bf16",T.reserved,"bf16"),do:new $("do",T.reserved,"do"),enum:new $("enum",T.reserved,"enum"),f16:new $("f16",T.reserved,"f16"),f64:new $("f64",T.reserved,"f64"),handle:new $("handle",T.reserved,"handle"),i8:new $("i8",T.reserved,"i8"),i16:new $("i16",T.reserved,"i16"),i64:new $("i64",T.reserved,"i64"),mat:new $("mat",T.reserved,"mat"),premerge:new $("premerge",T.reserved,"premerge"),regardless:new $("regardless",T.reserved,"regardless"),typedef:new $("typedef",T.reserved,"typedef"),u8:new $("u8",T.reserved,"u8"),u16:new $("u16",T.reserved,"u16"),u64:new $("u64",T.reserved,"u64"),unless:new $("unless",T.reserved,"unless"),using:new $("using",T.reserved,"using"),vec:new $("vec",T.reserved,"vec"),void:new $("void",T.reserved,"void")};D.keywords={array:new $("array",T.keyword,"array"),atomic:new $("atomic",T.keyword,"atomic"),bool:new $("bool",T.keyword,"bool"),f32:new $("f32",T.keyword,"f32"),i32:new $("i32",T.keyword,"i32"),mat2x2:new $("mat2x2",T.keyword,"mat2x2"),mat2x3:new $("mat2x3",T.keyword,"mat2x3"),mat2x4:new $("mat2x4",T.keyword,"mat2x4"),mat3x2:new $("mat3x2",T.keyword,"mat3x2"),mat3x3:new $("mat3x3",T.keyword,"mat3x3"),mat3x4:new $("mat3x4",T.keyword,"mat3x4"),mat4x2:new $("mat4x2",T.keyword,"mat4x2"),mat4x3:new $("mat4x3",T.keyword,"mat4x3"),mat4x4:new $("mat4x4",T.keyword,"mat4x4"),ptr:new $("ptr",T.keyword,"ptr"),sampler:new $("sampler",T.keyword,"sampler"),sampler_comparison:new $("sampler_comparison",T.keyword,"sampler_comparison"),struct:new $("struct",T.keyword,"struct"),texture_1d:new $("texture_1d",T.keyword,"texture_1d"),texture_2d:new $("texture_2d",T.keyword,"texture_2d"),texture_2d_array:new $("texture_2d_array",T.keyword,"texture_2d_array"),texture_3d:new $("texture_3d",T.keyword,"texture_3d"),texture_cube:new $("texture_cube",T.keyword,"texture_cube"),texture_cube_array:new $("texture_cube_array",T.keyword,"texture_cube_array"),texture_multisampled_2d:new $("texture_multisampled_2d",T.keyword,"texture_multisampled_2d"),texture_storage_1d:new $("texture_storage_1d",T.keyword,"texture_storage_1d"),texture_storage_2d:new $("texture_storage_2d",T.keyword,"texture_storage_2d"),texture_storage_2d_array:new $("texture_storage_2d_array",T.keyword,"texture_storage_2d_array"),texture_storage_3d:new $("texture_storage_3d",T.keyword,"texture_storage_3d"),texture_depth_2d:new $("texture_depth_2d",T.keyword,"texture_depth_2d"),texture_depth_2d_array:new $("texture_depth_2d_array",T.keyword,"texture_depth_2d_array"),texture_depth_cube:new $("texture_depth_cube",T.keyword,"texture_depth_cube"),texture_depth_cube_array:new $("texture_depth_cube_array",T.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new $("texture_depth_multisampled_2d",T.keyword,"texture_depth_multisampled_2d"),texture_external:new $("texture_external",T.keyword,"texture_external"),u32:new $("u32",T.keyword,"u32"),vec2:new $("vec2",T.keyword,"vec2"),vec3:new $("vec3",T.keyword,"vec3"),vec4:new $("vec4",T.keyword,"vec4"),bitcast:new $("bitcast",T.keyword,"bitcast"),block:new $("block",T.keyword,"block"),break:new $("break",T.keyword,"break"),case:new $("case",T.keyword,"case"),continue:new $("continue",T.keyword,"continue"),continuing:new $("continuing",T.keyword,"continuing"),default:new $("default",T.keyword,"default"),diagnostic:new $("diagnostic",T.keyword,"diagnostic"),discard:new $("discard",T.keyword,"discard"),else:new $("else",T.keyword,"else"),enable:new $("enable",T.keyword,"enable"),fallthrough:new $("fallthrough",T.keyword,"fallthrough"),false:new $("false",T.keyword,"false"),fn:new $("fn",T.keyword,"fn"),for:new $("for",T.keyword,"for"),function:new $("function",T.keyword,"function"),if:new $("if",T.keyword,"if"),let:new $("let",T.keyword,"let"),const:new $("const",T.keyword,"const"),loop:new $("loop",T.keyword,"loop"),while:new $("while",T.keyword,"while"),private:new $("private",T.keyword,"private"),read:new $("read",T.keyword,"read"),read_write:new $("read_write",T.keyword,"read_write"),return:new $("return",T.keyword,"return"),requires:new $("requires",T.keyword,"requires"),storage:new $("storage",T.keyword,"storage"),switch:new $("switch",T.keyword,"switch"),true:new $("true",T.keyword,"true"),alias:new $("alias",T.keyword,"alias"),type:new $("type",T.keyword,"type"),uniform:new $("uniform",T.keyword,"uniform"),var:new $("var",T.keyword,"var"),override:new $("override",T.keyword,"override"),workgroup:new $("workgroup",T.keyword,"workgroup"),write:new $("write",T.keyword,"write"),r8unorm:new $("r8unorm",T.keyword,"r8unorm"),r8snorm:new $("r8snorm",T.keyword,"r8snorm"),r8uint:new $("r8uint",T.keyword,"r8uint"),r8sint:new $("r8sint",T.keyword,"r8sint"),r16uint:new $("r16uint",T.keyword,"r16uint"),r16sint:new $("r16sint",T.keyword,"r16sint"),r16float:new $("r16float",T.keyword,"r16float"),rg8unorm:new $("rg8unorm",T.keyword,"rg8unorm"),rg8snorm:new $("rg8snorm",T.keyword,"rg8snorm"),rg8uint:new $("rg8uint",T.keyword,"rg8uint"),rg8sint:new $("rg8sint",T.keyword,"rg8sint"),r32uint:new $("r32uint",T.keyword,"r32uint"),r32sint:new $("r32sint",T.keyword,"r32sint"),r32float:new $("r32float",T.keyword,"r32float"),rg16uint:new $("rg16uint",T.keyword,"rg16uint"),rg16sint:new $("rg16sint",T.keyword,"rg16sint"),rg16float:new $("rg16float",T.keyword,"rg16float"),rgba8unorm:new $("rgba8unorm",T.keyword,"rgba8unorm"),rgba8unorm_srgb:new $("rgba8unorm_srgb",T.keyword,"rgba8unorm_srgb"),rgba8snorm:new $("rgba8snorm",T.keyword,"rgba8snorm"),rgba8uint:new $("rgba8uint",T.keyword,"rgba8uint"),rgba8sint:new $("rgba8sint",T.keyword,"rgba8sint"),bgra8unorm:new $("bgra8unorm",T.keyword,"bgra8unorm"),bgra8unorm_srgb:new $("bgra8unorm_srgb",T.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new $("rgb10a2unorm",T.keyword,"rgb10a2unorm"),rg11b10float:new $("rg11b10float",T.keyword,"rg11b10float"),rg32uint:new $("rg32uint",T.keyword,"rg32uint"),rg32sint:new $("rg32sint",T.keyword,"rg32sint"),rg32float:new $("rg32float",T.keyword,"rg32float"),rgba16uint:new $("rgba16uint",T.keyword,"rgba16uint"),rgba16sint:new $("rgba16sint",T.keyword,"rgba16sint"),rgba16float:new $("rgba16float",T.keyword,"rgba16float"),rgba32uint:new $("rgba32uint",T.keyword,"rgba32uint"),rgba32sint:new $("rgba32sint",T.keyword,"rgba32sint"),rgba32float:new $("rgba32float",T.keyword,"rgba32float"),static_assert:new $("static_assert",T.keyword,"static_assert")};D.tokens={decimal_float_literal:new $("decimal_float_literal",T.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?f?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+f?)|([0-9]+f)/),hex_float_literal:new $("hex_float_literal",T.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+f?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+f?))/),int_literal:new $("int_literal",T.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new $("uint_literal",T.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),ident:new $("ident",T.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new $("and",T.token,"&"),and_and:new $("and_and",T.token,"&&"),arrow:new $("arrow ",T.token,"->"),attr:new $("attr",T.token,"@"),attr_left:new $("attr_left",T.token,"[["),attr_right:new $("attr_right",T.token,"]]"),forward_slash:new $("forward_slash",T.token,"/"),bang:new $("bang",T.token,"!"),bracket_left:new $("bracket_left",T.token,"["),bracket_right:new $("bracket_right",T.token,"]"),brace_left:new $("brace_left",T.token,"{"),brace_right:new $("brace_right",T.token,"}"),colon:new $("colon",T.token,":"),comma:new $("comma",T.token,","),equal:new $("equal",T.token,"="),equal_equal:new $("equal_equal",T.token,"=="),not_equal:new $("not_equal",T.token,"!="),greater_than:new $("greater_than",T.token,">"),greater_than_equal:new $("greater_than_equal",T.token,">="),shift_right:new $("shift_right",T.token,">>"),less_than:new $("less_than",T.token,"<"),less_than_equal:new $("less_than_equal",T.token,"<="),shift_left:new $("shift_left",T.token,"<<"),modulo:new $("modulo",T.token,"%"),minus:new $("minus",T.token,"-"),minus_minus:new $("minus_minus",T.token,"--"),period:new $("period",T.token,"."),plus:new $("plus",T.token,"+"),plus_plus:new $("plus_plus",T.token,"++"),or:new $("or",T.token,"|"),or_or:new $("or_or",T.token,"||"),paren_left:new $("paren_left",T.token,"("),paren_right:new $("paren_right",T.token,")"),semicolon:new $("semicolon",T.token,";"),star:new $("star",T.token,"*"),tilde:new $("tilde",T.token,"~"),underscore:new $("underscore",T.token,"_"),xor:new $("xor",T.token,"^"),plus_equal:new $("plus_equal",T.token,"+="),minus_equal:new $("minus_equal",T.token,"-="),times_equal:new $("times_equal",T.token,"*="),division_equal:new $("division_equal",T.token,"/="),modulo_equal:new $("modulo_equal",T.token,"%="),and_equal:new $("and_equal",T.token,"&="),or_equal:new $("or_equal",T.token,"|="),xor_equal:new $("xor_equal",T.token,"^="),shift_right_equal:new $("shift_right_equal",T.token,">>="),shift_left_equal:new $("shift_left_equal",T.token,"<<=")};D.simpleTokens={"@":N.tokens.attr,"{":N.tokens.brace_left,"}":N.tokens.brace_right,":":N.tokens.colon,",":N.tokens.comma,"(":N.tokens.paren_left,")":N.tokens.paren_right,";":N.tokens.semicolon};D.literalTokens={"&":N.tokens.and,"&&":N.tokens.and_and,"->":N.tokens.arrow,"[[":N.tokens.attr_left,"]]":N.tokens.attr_right,"/":N.tokens.forward_slash,"!":N.tokens.bang,"[":N.tokens.bracket_left,"]":N.tokens.bracket_right,"=":N.tokens.equal,"==":N.tokens.equal_equal,"!=":N.tokens.not_equal,">":N.tokens.greater_than,">=":N.tokens.greater_than_equal,">>":N.tokens.shift_right,"<":N.tokens.less_than,"<=":N.tokens.less_than_equal,"<<":N.tokens.shift_left,"%":N.tokens.modulo,"-":N.tokens.minus,"--":N.tokens.minus_minus,".":N.tokens.period,"+":N.tokens.plus,"++":N.tokens.plus_plus,"|":N.tokens.or,"||":N.tokens.or_or,"*":N.tokens.star,"~":N.tokens.tilde,_:N.tokens.underscore,"^":N.tokens.xor,"+=":N.tokens.plus_equal,"-=":N.tokens.minus_equal,"*=":N.tokens.times_equal,"/=":N.tokens.division_equal,"%=":N.tokens.modulo_equal,"&=":N.tokens.and_equal,"|=":N.tokens.or_equal,"^=":N.tokens.xor_equal,">>=":N.tokens.shift_right_equal,"<<=":N.tokens.shift_left_equal};D.regexTokens={decimal_float_literal:N.tokens.decimal_float_literal,hex_float_literal:N.tokens.hex_float_literal,int_literal:N.tokens.int_literal,uint_literal:N.tokens.uint_literal,ident:N.tokens.ident};D.storage_class=[N.keywords.function,N.keywords.private,N.keywords.workgroup,N.keywords.uniform,N.keywords.storage];D.access_mode=[N.keywords.read,N.keywords.write,N.keywords.read_write];D.sampler_type=[N.keywords.sampler,N.keywords.sampler_comparison];D.sampled_texture_type=[N.keywords.texture_1d,N.keywords.texture_2d,N.keywords.texture_2d_array,N.keywords.texture_3d,N.keywords.texture_cube,N.keywords.texture_cube_array];D.multisampled_texture_type=[N.keywords.texture_multisampled_2d];D.storage_texture_type=[N.keywords.texture_storage_1d,N.keywords.texture_storage_2d,N.keywords.texture_storage_2d_array,N.keywords.texture_storage_3d];D.depth_texture_type=[N.keywords.texture_depth_2d,N.keywords.texture_depth_2d_array,N.keywords.texture_depth_cube,N.keywords.texture_depth_cube_array,N.keywords.texture_depth_multisampled_2d];D.texture_external_type=[N.keywords.texture_external];D.any_texture_type=[...N.sampled_texture_type,...N.multisampled_texture_type,...N.storage_texture_type,...N.depth_texture_type,...N.texture_external_type];D.texel_format=[N.keywords.r8unorm,N.keywords.r8snorm,N.keywords.r8uint,N.keywords.r8sint,N.keywords.r16uint,N.keywords.r16sint,N.keywords.r16float,N.keywords.rg8unorm,N.keywords.rg8snorm,N.keywords.rg8uint,N.keywords.rg8sint,N.keywords.r32uint,N.keywords.r32sint,N.keywords.r32float,N.keywords.rg16uint,N.keywords.rg16sint,N.keywords.rg16float,N.keywords.rgba8unorm,N.keywords.rgba8unorm_srgb,N.keywords.rgba8snorm,N.keywords.rgba8uint,N.keywords.rgba8sint,N.keywords.bgra8unorm,N.keywords.bgra8unorm_srgb,N.keywords.rgb10a2unorm,N.keywords.rg11b10float,N.keywords.rg32uint,N.keywords.rg32sint,N.keywords.rg32float,N.keywords.rgba16uint,N.keywords.rgba16sint,N.keywords.rgba16float,N.keywords.rgba32uint,N.keywords.rgba32sint,N.keywords.rgba32float];D.const_literal=[N.tokens.int_literal,N.tokens.uint_literal,N.tokens.decimal_float_literal,N.tokens.hex_float_literal,N.keywords.true,N.keywords.false];D.literal_or_ident=[N.tokens.ident,N.tokens.int_literal,N.tokens.uint_literal,N.tokens.decimal_float_literal,N.tokens.hex_float_literal];D.element_count_expression=[N.tokens.int_literal,N.tokens.uint_literal,N.tokens.ident];D.template_types=[N.keywords.vec2,N.keywords.vec3,N.keywords.vec4,N.keywords.mat2x2,N.keywords.mat2x3,N.keywords.mat2x4,N.keywords.mat3x2,N.keywords.mat3x3,N.keywords.mat3x4,N.keywords.mat4x2,N.keywords.mat4x3,N.keywords.mat4x4,N.keywords.atomic,N.keywords.bitcast,...N.any_texture_type];D.attribute_name=[N.tokens.ident,N.keywords.block,N.keywords.diagnostic];D.assignment_operators=[N.tokens.equal,N.tokens.plus_equal,N.tokens.minus_equal,N.tokens.times_equal,N.tokens.division_equal,N.tokens.modulo_equal,N.tokens.and_equal,N.tokens.or_equal,N.tokens.xor_equal,N.tokens.shift_right_equal,N.tokens.shift_left_equal];D.increment_operators=[N.tokens.plus_plus,N.tokens.minus_minus];class ra{constructor(t,n,u){this.type=t,this.lexeme=n,this.line=u}toString(){return this.lexeme}isTemplateType(){return D.template_types.indexOf(this.type)!=-1}isArrayType(){return this.type==D.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class t1{constructor(t){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=t??""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new ra(D.eof,"",this._line)),this._tokens}scanToken(){let t=this._advance();if(t==`
`)return this._line++,!0;if(this._isWhitespace(t))return!0;if(t=="/"){if(this._peekAhead()=="/"){for(;t!=`
`;){if(this._isAtEnd())return!0;t=this._advance()}return this._line++,!0}else if(this._peekAhead()=="*"){this._advance();let b=1;for(;b>0;){if(this._isAtEnd())return!0;if(t=this._advance(),t==`
`)this._line++;else if(t=="*"){if(this._peekAhead()=="/"&&(this._advance(),b--,b==0))return!0}else t=="/"&&this._peekAhead()=="*"&&(this._advance(),b++)}return!0}}const n=D.simpleTokens[t];if(n)return this._addToken(n),!0;let u=D.none;const h=this._isAlpha(t),_=t==="_";if(this._isAlphaNumeric(t)){let b=this._peekAhead();for(;this._isAlphaNumeric(b);)t+=this._advance(),b=this._peekAhead()}if(h){const b=D.keywords[t];if(b)return this._addToken(b),!0}if(h||_)return this._addToken(D.tokens.ident),!0;for(;;){let b=this._findType(t);const z=this._peekAhead();if(t==">"&&(z==">"||z=="=")){let P=!1,j=this._tokens.length-1;for(let K=0;K<5&&j>=0;++K,--j)if(this._tokens[j].type===D.tokens.less_than){j>0&&this._tokens[j-1].isArrayOrTemplateType()&&(P=!0);break}if(P)return this._addToken(b),!0}if(b===D.none){let P=t,j=0;const K=2;for(let Y=0;Y<K;++Y)if(P+=this._peekAhead(Y),b=this._findType(P),b!==D.none){j=Y;break}if(b===D.none)return u===D.none?!1:(this._current--,this._addToken(u),!0);t=P,this._current+=j+1}if(u=b,this._isAtEnd())break;t+=this._advance()}return u===D.none?!1:(this._addToken(u),!0)}_findType(t){for(const u in D.regexTokens){const h=D.regexTokens[u];if(this._match(t,h.rule))return h}const n=D.literalTokens[t];return n||D.none}_match(t,n){const u=n.exec(t);return u&&u.index==0&&u[0]==t}_isAtEnd(){return this._current>=this._source.length}_isAlpha(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}_isAlphaNumeric(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||t=="_"||t>="0"&&t<="9"}_isWhitespace(t){return t==" "||t=="	"||t=="\r"}_advance(t=0){let n=this._source[this._current];return t=t||0,t++,this._current+=t,n}_peekAhead(t=0){return t=t||0,this._current+t>=this._source.length?"\0":this._source[this._current+t]}_addToken(t){const n=this._source.substring(this._start,this._current);this._tokens.push(new ra(t,n,this._line))}}class e1{constructor(){this._tokens=[],this._current=0,this._currentLine=0,this._context=new xf,this._deferArrayCountEval=[]}parse(t){this._initialize(t),this._deferArrayCountEval.length=0;const n=[];for(;!this._isAtEnd();){const u=this._global_decl_or_directive();if(!u)break;n.push(u)}if(this._deferArrayCountEval.length>0){for(const u of this._deferArrayCountEval){const h=u.arrayType,_=u.countNode;if(_ instanceof Ds){const z=_.name,P=this._context.constants.get(z);if(P)try{const j=P.evaluate(this._context);h.count=j}catch{}}}this._deferArrayCountEval.length=0}return n}_initialize(t){if(t)if(typeof t=="string"){const n=new t1(t);this._tokens=n.scanTokens()}else this._tokens=t;else this._tokens=[];this._current=0}_error(t,n){return{token:t,message:n,toString:function(){return`${n}`}}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==D.eof}_match(t){if(t instanceof $)return this._check(t)?(this._advance(),!0):!1;for(let n=0,u=t.length;n<u;++n){const h=t[n];if(this._check(h))return this._advance(),!0}return!1}_consume(t,n){if(this._check(t))return this._advance();throw this._error(this._peek(),n)}_check(t){if(this._isAtEnd())return!1;const n=this._peek();if(t instanceof Array){const u=n.type;return t.indexOf(u)!=-1}return n.type==t}_advance(){var t,n;return this._currentLine=(n=(t=this._peek())===null||t===void 0?void 0:t.line)!==null&&n!==void 0?n:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(D.tokens.semicolon)&&!this._isAtEnd(););if(this._match(D.keywords.alias)){const n=this._type_alias();return this._consume(D.tokens.semicolon,"Expected ';'"),n}if(this._match(D.keywords.diagnostic)){const n=this._diagnostic();return this._consume(D.tokens.semicolon,"Expected ';'"),n}if(this._match(D.keywords.requires)){const n=this._requires_directive();return this._consume(D.tokens.semicolon,"Expected ';'"),n}if(this._match(D.keywords.enable)){const n=this._enable_directive();return this._consume(D.tokens.semicolon,"Expected ';'"),n}const t=this._attribute();if(this._check(D.keywords.var)){const n=this._global_variable_decl();return n!=null&&(n.attributes=t),this._consume(D.tokens.semicolon,"Expected ';'."),n}if(this._check(D.keywords.override)){const n=this._override_variable_decl();return n!=null&&(n.attributes=t),this._consume(D.tokens.semicolon,"Expected ';'."),n}if(this._check(D.keywords.let)){const n=this._global_let_decl();return n!=null&&(n.attributes=t),this._consume(D.tokens.semicolon,"Expected ';'."),n}if(this._check(D.keywords.const)){const n=this._global_const_decl();return n!=null&&(n.attributes=t),this._consume(D.tokens.semicolon,"Expected ';'."),n}if(this._check(D.keywords.struct)){const n=this._struct_decl();return n!=null&&(n.attributes=t),n}if(this._check(D.keywords.fn)){const n=this._function_decl();return n!=null&&(n.attributes=t),n}return null}_function_decl(){if(!this._match(D.keywords.fn))return null;const t=this._currentLine,n=this._consume(D.tokens.ident,"Expected function name.").toString();this._consume(D.tokens.paren_left,"Expected '(' for function arguments.");const u=[];if(!this._check(D.tokens.paren_right))do{if(this._check(D.tokens.paren_right))break;const z=this._attribute(),P=this._consume(D.tokens.ident,"Expected argument name.").toString();this._consume(D.tokens.colon,"Expected ':' for argument type.");const j=this._attribute(),K=this._type_decl();K!=null&&(K.attributes=j,u.push(new Jf(P,K,z)))}while(this._match(D.tokens.comma));this._consume(D.tokens.paren_right,"Expected ')' after function arguments.");let h=null;if(this._match(D.tokens.arrow)){const z=this._attribute();h=this._type_decl(),h!=null&&(h.attributes=z)}const _=this._compound_statement(),b=this._currentLine;return new ps(n,u,h,_,t,b)}_compound_statement(){const t=[];for(this._consume(D.tokens.brace_left,"Expected '{' for block.");!this._check(D.tokens.brace_right);){const n=this._statement();n!==null&&t.push(n)}return this._consume(D.tokens.brace_right,"Expected '}' for block."),t}_statement(){for(;this._match(D.tokens.semicolon)&&!this._isAtEnd(););if(this._check(D.tokens.attr)&&this._attribute(),this._check(D.keywords.if))return this._if_statement();if(this._check(D.keywords.switch))return this._switch_statement();if(this._check(D.keywords.loop))return this._loop_statement();if(this._check(D.keywords.for))return this._for_statement();if(this._check(D.keywords.while))return this._while_statement();if(this._check(D.keywords.continuing))return this._continuing_statement();if(this._check(D.keywords.static_assert))return this._static_assert_statement();if(this._check(D.tokens.brace_left))return this._compound_statement();let t=null;return this._check(D.keywords.return)?t=this._return_statement():this._check([D.keywords.var,D.keywords.let,D.keywords.const])?t=this._variable_statement():this._match(D.keywords.discard)?t=new Vf:this._match(D.keywords.break)?t=new Uf:this._match(D.keywords.continue)?t=new Rf:t=this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement(),t!=null&&this._consume(D.tokens.semicolon,"Expected ';' after statement."),t}_static_assert_statement(){if(!this._match(D.keywords.static_assert))return null;const t=this._optional_paren_expression();return new Cf(t)}_while_statement(){if(!this._match(D.keywords.while))return null;const t=this._optional_paren_expression();this._check(D.tokens.attr)&&this._attribute();const n=this._compound_statement();return new Bf(t,n)}_continuing_statement(){if(!this._match(D.keywords.continuing))return null;const t=this._compound_statement();return new Mf(t)}_for_statement(){if(!this._match(D.keywords.for))return null;this._consume(D.tokens.paren_left,"Expected '('.");const t=this._check(D.tokens.semicolon)?null:this._for_init();this._consume(D.tokens.semicolon,"Expected ';'.");const n=this._check(D.tokens.semicolon)?null:this._short_circuit_or_expression();this._consume(D.tokens.semicolon,"Expected ';'.");const u=this._check(D.tokens.paren_right)?null:this._for_increment();this._consume(D.tokens.paren_right,"Expected ')'."),this._check(D.tokens.attr)&&this._attribute();const h=this._compound_statement();return new Sf(t,n,u,h)}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(D.keywords.var)){const t=this._variable_decl();if(t===null)throw this._error(this._peek(),"Variable declaration expected.");let n=null;return this._match(D.tokens.equal)&&(n=this._short_circuit_or_expression()),new mn(t.name,t.type,t.storage,t.access,n)}if(this._match(D.keywords.let)){const t=this._consume(D.tokens.ident,"Expected name for let.").toString();let n=null;if(this._match(D.tokens.colon)){const h=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=h)}this._consume(D.tokens.equal,"Expected '=' for let.");const u=this._short_circuit_or_expression();return new gs(t,n,null,null,u)}if(this._match(D.keywords.const)){const t=this._consume(D.tokens.ident,"Expected name for const.").toString();let n=null;if(this._match(D.tokens.colon)){const h=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=h)}this._consume(D.tokens.equal,"Expected '=' for const.");const u=this._short_circuit_or_expression();return new Ju(t,n,null,null,u)}return null}_increment_decrement_statement(){const t=this._current,n=this._unary_expression();if(n==null)return null;if(!this._check(D.increment_operators))return this._current=t,null;const u=this._consume(D.increment_operators,"Expected increment operator");return new Tf(u.type===D.tokens.plus_plus?Gn.increment:Gn.decrement,n)}_assignment_statement(){let t=null;if(this._check(D.tokens.brace_right))return null;let n=this._match(D.tokens.underscore);if(n||(t=this._unary_expression()),!n&&t==null)return null;const u=this._consume(D.assignment_operators,"Expected assignment operator."),h=this._short_circuit_or_expression();return new $f(ur.parse(u.lexeme),t,h)}_func_call_statement(){if(!this._check(D.tokens.ident))return null;const t=this._current,n=this._consume(D.tokens.ident,"Expected function name."),u=this._argument_expression_list();return u===null?(this._current=t,null):new Pa(n.lexeme,u)}_loop_statement(){if(!this._match(D.keywords.loop))return null;this._check(D.tokens.attr)&&this._attribute(),this._consume(D.tokens.brace_left,"Expected '{' for loop.");const t=[];let n=this._statement();for(;n!==null;){if(Array.isArray(n))for(let h of n)t.push(h);else t.push(n);n=this._statement()}let u=null;return this._match(D.keywords.continuing)&&(u=this._compound_statement()),this._consume(D.tokens.brace_right,"Expected '}' for loop."),new zf(t,u)}_switch_statement(){if(!this._match(D.keywords.switch))return null;const t=this._optional_paren_expression();this._check(D.tokens.attr)&&this._attribute(),this._consume(D.tokens.brace_left,"Expected '{' for switch.");const n=this._switch_body();if(n==null||n.length==0)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(D.tokens.brace_right,"Expected '}' for switch."),new If(t,n)}_switch_body(){const t=[];if(this._match(D.keywords.case)){const n=this._case_selectors();this._match(D.tokens.colon),this._check(D.tokens.attr)&&this._attribute(),this._consume(D.tokens.brace_left,"Exected '{' for switch case.");const u=this._case_body();this._consume(D.tokens.brace_right,"Exected '}' for switch case."),t.push(new Yf(n,u))}if(this._match(D.keywords.default)){this._match(D.tokens.colon),this._check(D.tokens.attr)&&this._attribute(),this._consume(D.tokens.brace_left,"Exected '{' for switch default.");const n=this._case_body();this._consume(D.tokens.brace_right,"Exected '}' for switch default."),t.push(new Xf(n))}if(this._check([D.keywords.default,D.keywords.case])){const n=this._switch_body();t.push(n[0])}return t}_case_selectors(){const t=[this._shift_expression()];for(;this._match(D.tokens.comma);)t.push(this._shift_expression());return t}_case_body(){if(this._match(D.keywords.fallthrough))return this._consume(D.tokens.semicolon,"Expected ';'"),[];let t=this._statement();if(t==null)return[];t instanceof Array||(t=[t]);const n=this._case_body();return n.length==0?t:[...t,n[0]]}_if_statement(){if(!this._match(D.keywords.if))return null;const t=this._optional_paren_expression();this._check(D.tokens.attr)&&this._attribute();const n=this._compound_statement();let u=[];this._match_elseif()&&(this._check(D.tokens.attr)&&this._attribute(),u=this._elseif_statement(u));let h=null;return this._match(D.keywords.else)&&(this._check(D.tokens.attr)&&this._attribute(),h=this._compound_statement()),new Nf(t,n,u,h)}_match_elseif(){return this._tokens[this._current].type===D.keywords.else&&this._tokens[this._current+1].type===D.keywords.if?(this._advance(),this._advance(),!0):!1}_elseif_statement(t=[]){const n=this._optional_paren_expression(),u=this._compound_statement();return t.push(new Qf(n,u)),this._match_elseif()&&(this._check(D.tokens.attr)&&this._attribute(),this._elseif_statement(t)),t}_return_statement(){if(!this._match(D.keywords.return))return null;const t=this._short_circuit_or_expression();return new qf(t)}_short_circuit_or_expression(){let t=this._short_circuit_and_expr();for(;this._match(D.tokens.or_or);)t=new je(this._previous().toString(),t,this._short_circuit_and_expr());return t}_short_circuit_and_expr(){let t=this._inclusive_or_expression();for(;this._match(D.tokens.and_and);)t=new je(this._previous().toString(),t,this._inclusive_or_expression());return t}_inclusive_or_expression(){let t=this._exclusive_or_expression();for(;this._match(D.tokens.or);)t=new je(this._previous().toString(),t,this._exclusive_or_expression());return t}_exclusive_or_expression(){let t=this._and_expression();for(;this._match(D.tokens.xor);)t=new je(this._previous().toString(),t,this._and_expression());return t}_and_expression(){let t=this._equality_expression();for(;this._match(D.tokens.and);)t=new je(this._previous().toString(),t,this._equality_expression());return t}_equality_expression(){const t=this._relational_expression();return this._match([D.tokens.equal_equal,D.tokens.not_equal])?new je(this._previous().toString(),t,this._relational_expression()):t}_relational_expression(){let t=this._shift_expression();for(;this._match([D.tokens.less_than,D.tokens.greater_than,D.tokens.less_than_equal,D.tokens.greater_than_equal]);)t=new je(this._previous().toString(),t,this._shift_expression());return t}_shift_expression(){let t=this._additive_expression();for(;this._match([D.tokens.shift_left,D.tokens.shift_right]);)t=new je(this._previous().toString(),t,this._additive_expression());return t}_additive_expression(){let t=this._multiplicative_expression();for(;this._match([D.tokens.plus,D.tokens.minus]);)t=new je(this._previous().toString(),t,this._multiplicative_expression());return t}_multiplicative_expression(){let t=this._unary_expression();for(;this._match([D.tokens.star,D.tokens.forward_slash,D.tokens.modulo]);)t=new je(this._previous().toString(),t,this._unary_expression());return t}_unary_expression(){return this._match([D.tokens.minus,D.tokens.bang,D.tokens.tilde,D.tokens.star,D.tokens.and])?new Wf(this._previous().toString(),this._unary_expression()):this._singular_expression()}_singular_expression(){const t=this._primary_expression(),n=this._postfix_expression();return n&&(t.postfix=n),t}_postfix_expression(){if(this._match(D.tokens.bracket_left)){const t=this._short_circuit_or_expression();this._consume(D.tokens.bracket_right,"Expected ']'.");const n=new Zf(t),u=this._postfix_expression();return u&&(n.postfix=u),n}if(this._match(D.tokens.period)){const t=this._consume(D.tokens.ident,"Expected member name."),n=this._postfix_expression(),u=new Qu(t.lexeme);return n&&(u.postfix=n),u}return null}_getStruct(t){return this._context.aliases.has(t)?this._context.aliases.get(t).type:this._context.structs.has(t)?this._context.structs.get(t):null}_primary_expression(){if(this._match(D.tokens.ident)){const u=this._previous().toString();if(this._check(D.tokens.paren_left)){const h=this._argument_expression_list(),_=this._getStruct(u);return _!=null?new Un(_,h):new Ua(u,h)}if(this._context.constants.has(u)){const h=this._context.constants.get(u);return new Ku(u,h.value)}return new Ds(u)}if(this._match(D.const_literal))return new ta(parseFloat(this._previous().toString()));if(this._check(D.tokens.paren_left))return this._paren_expression();if(this._match(D.keywords.bitcast)){this._consume(D.tokens.less_than,"Expected '<'.");const u=this._type_decl();this._consume(D.tokens.greater_than,"Expected '>'.");const h=this._paren_expression();return new Gf(u,h)}const t=this._type_decl(),n=this._argument_expression_list();return new Hf(t,n)}_argument_expression_list(){if(!this._match(D.tokens.paren_left))return null;const t=[];do{if(this._check(D.tokens.paren_right))break;const n=this._short_circuit_or_expression();t.push(n)}while(this._match(D.tokens.comma));return this._consume(D.tokens.paren_right,"Expected ')' for agument list"),t}_optional_paren_expression(){this._match(D.tokens.paren_left);const t=this._short_circuit_or_expression();return this._match(D.tokens.paren_right),new ea([t])}_paren_expression(){this._consume(D.tokens.paren_left,"Expected '('.");const t=this._short_circuit_or_expression();return this._consume(D.tokens.paren_right,"Expected ')'."),new ea([t])}_struct_decl(){if(!this._match(D.keywords.struct))return null;const t=this._currentLine,n=this._consume(D.tokens.ident,"Expected name for struct.").toString();this._consume(D.tokens.brace_left,"Expected '{' for struct body.");const u=[];for(;!this._check(D.tokens.brace_right);){const b=this._attribute(),z=this._consume(D.tokens.ident,"Expected variable name.").toString();this._consume(D.tokens.colon,"Expected ':' for struct member type.");const P=this._attribute(),j=this._type_decl();j!=null&&(j.attributes=P),this._check(D.tokens.brace_right)?this._match(D.tokens.comma):this._consume(D.tokens.comma,"Expected ',' for struct member."),u.push(new Kf(z,j,b))}this._consume(D.tokens.brace_right,"Expected '}' after struct body.");const h=this._currentLine,_=new Dn(n,u,t,h);return this._context.structs.set(n,_),_}_global_variable_decl(){const t=this._variable_decl();return t&&this._match(D.tokens.equal)&&(t.value=this._const_expression()),t}_override_variable_decl(){const t=this._override_decl();return t&&this._match(D.tokens.equal)&&(t.value=this._const_expression()),t}_global_const_decl(){if(!this._match(D.keywords.const))return null;const t=this._consume(D.tokens.ident,"Expected variable name");let n=null;if(this._match(D.tokens.colon)){const _=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=_)}let u=null;if(this._match(D.tokens.equal)){const _=this._short_circuit_or_expression();if(_ instanceof Un)u=_;else if(_ instanceof Ku&&_.initializer instanceof Un)u=_.initializer;else try{const b=_.evaluate(this._context);u=new ta(b)}catch{u=_}}const h=new Ju(t.toString(),n,"","",u);return this._context.constants.set(h.name,h),h}_global_let_decl(){if(!this._match(D.keywords.let))return null;const t=this._consume(D.tokens.ident,"Expected variable name");let n=null;if(this._match(D.tokens.colon)){const h=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=h)}let u=null;return this._match(D.tokens.equal)&&(u=this._const_expression()),new gs(t.toString(),n,"","",u)}_const_expression(){if(this._match(D.const_literal))return new Qu(this._previous().toString());const t=this._type_decl();this._consume(D.tokens.paren_left,"Expected '('.");let n=[];for(;!this._check(D.tokens.paren_right)&&(n.push(this._const_expression()),!!this._check(D.tokens.comma));)this._advance();return this._consume(D.tokens.paren_right,"Expected ')'."),new Un(t,n)}_variable_decl(){if(!this._match(D.keywords.var))return null;let t="",n="";this._match(D.tokens.less_than)&&(t=this._consume(D.storage_class,"Expected storage_class.").toString(),this._match(D.tokens.comma)&&(n=this._consume(D.access_mode,"Expected access_mode.").toString()),this._consume(D.tokens.greater_than,"Expected '>'."));const u=this._consume(D.tokens.ident,"Expected variable name");let h=null;if(this._match(D.tokens.colon)){const _=this._attribute();h=this._type_decl(),h!=null&&(h.attributes=_)}return new mn(u.toString(),h,t,n,null)}_override_decl(){if(!this._match(D.keywords.override))return null;const t=this._consume(D.tokens.ident,"Expected variable name");let n=null;if(this._match(D.tokens.colon)){const u=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=u)}return new qa(t.toString(),n,null)}_diagnostic(){this._consume(D.tokens.paren_left,"Expected '('");const t=this._consume(D.tokens.ident,"Expected severity control name.");this._consume(D.tokens.comma,"Expected ','");const n=this._consume(D.tokens.ident,"Expected diagnostic rule name.");return this._consume(D.tokens.paren_right,"Expected ')'"),new Lf(t.toString(),n.toString())}_enable_directive(){const t=this._consume(D.tokens.ident,"identity expected.");return new Pf(t.toString())}_requires_directive(){const t=[this._consume(D.tokens.ident,"identity expected.").toString()];for(;this._match(D.tokens.comma);){const n=this._consume(D.tokens.ident,"identity expected.");t.push(n.toString())}return new Of(t)}_type_alias(){const t=this._consume(D.tokens.ident,"identity expected.");this._consume(D.tokens.equal,"Expected '=' for type alias.");let n=this._type_decl();if(n===null)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(n.name)&&(n=this._context.aliases.get(n.name).type);const u=new Oa(t.toString(),n);return this._context.aliases.set(u.name,u),u}_type_decl(){if(this._check([D.tokens.ident,...D.texel_format,D.keywords.bool,D.keywords.f32,D.keywords.i32,D.keywords.u32])){const u=this._advance(),h=u.toString();return this._context.structs.has(h)?this._context.structs.get(h):this._context.aliases.has(h)?this._context.aliases.get(h).type:new An(u.toString())}let t=this._texture_sampler_types();if(t)return t;if(this._check(D.template_types)){let u=this._advance().toString(),h=null,_=null;return this._match(D.tokens.less_than)&&(h=this._type_decl(),_=null,this._match(D.tokens.comma)&&(_=this._consume(D.access_mode,"Expected access_mode for pointer").toString()),this._consume(D.tokens.greater_than,"Expected '>' for type.")),new La(u,h,_)}if(this._match(D.keywords.ptr)){let u=this._previous().toString();this._consume(D.tokens.less_than,"Expected '<' for pointer.");const h=this._consume(D.storage_class,"Expected storage_class for pointer");this._consume(D.tokens.comma,"Expected ',' for pointer.");const _=this._type_decl();let b=null;return this._match(D.tokens.comma)&&(b=this._consume(D.access_mode,"Expected access_mode for pointer").toString()),this._consume(D.tokens.greater_than,"Expected '>' for pointer."),new jf(u,h.toString(),_,b)}const n=this._attribute();if(this._match(D.keywords.array)){let u=null,h=-1;const _=this._previous();let b=null;if(this._match(D.tokens.less_than)){u=this._type_decl(),this._context.aliases.has(u.name)&&(u=this._context.aliases.get(u.name).type);let P="";if(this._match(D.tokens.comma)){b=this._shift_expression();try{P=b.evaluate(this._context).toString(),b=null}catch{P="1"}}this._consume(D.tokens.greater_than,"Expected '>' for array."),h=P?parseInt(P):0}const z=new Va(_.toString(),n,u,h);return b&&this._deferArrayCountEval.push({arrayType:z,countNode:b}),z}return null}_texture_sampler_types(){if(this._match(D.sampler_type))return new er(this._previous().toString(),null,null);if(this._match(D.depth_texture_type))return new er(this._previous().toString(),null,null);if(this._match(D.sampled_texture_type)||this._match(D.multisampled_texture_type)){const t=this._previous();this._consume(D.tokens.less_than,"Expected '<' for sampler type.");const n=this._type_decl();return this._consume(D.tokens.greater_than,"Expected '>' for sampler type."),new er(t.toString(),n,null)}if(this._match(D.storage_texture_type)){const t=this._previous();this._consume(D.tokens.less_than,"Expected '<' for sampler type.");const n=this._consume(D.texel_format,"Invalid texel format.").toString();this._consume(D.tokens.comma,"Expected ',' after texel format.");const u=this._consume(D.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(D.tokens.greater_than,"Expected '>' for sampler type."),new er(t.toString(),n,u)}return null}_attribute(){let t=[];for(;this._match(D.tokens.attr);){const n=this._consume(D.attribute_name,"Expected attribute name"),u=new na(n.toString(),null);if(this._match(D.tokens.paren_left)){if(u.value=this._consume(D.literal_or_ident,"Expected attribute value").toString(),this._check(D.tokens.comma)){this._advance();do{const h=this._consume(D.literal_or_ident,"Expected attribute value").toString();u.value instanceof Array||(u.value=[u.value]),u.value.push(h)}while(this._match(D.tokens.comma))}this._consume(D.tokens.paren_right,"Expected ')'")}t.push(u)}for(;this._match(D.tokens.attr_left);){if(!this._check(D.tokens.attr_right))do{const n=this._consume(D.attribute_name,"Expected attribute name"),u=new na(n.toString(),null);if(this._match(D.tokens.paren_left)){if(u.value=[this._consume(D.literal_or_ident,"Expected attribute value").toString()],this._check(D.tokens.comma)){this._advance();do{const h=this._consume(D.literal_or_ident,"Expected attribute value").toString();u.value.push(h)}while(this._match(D.tokens.comma))}this._consume(D.tokens.paren_right,"Expected ')'")}t.push(u)}while(this._match(D.tokens.comma));this._consume(D.tokens.attr_right,"Expected ']]' after attribute declarations")}return t.length==0?null:t}}class Rn{constructor(t,n){this.name=t,this.attributes=n,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}}class sa{constructor(t,n,u){this.name=t,this.type=n,this.attributes=u,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray?this.type.format:this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class mr extends Rn{constructor(t,n){super(t,n),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}}class rs extends Rn{constructor(t,n){super(t,n),this.count=0,this.stride=0}get isArray(){return!0}}class ua extends Rn{constructor(t,n,u,h){super(t,u),this.format=n,this.access=h}get isTemplate(){return!0}}var ce;(function(e){e[e.Uniform=0]="Uniform",e[e.Storage=1]="Storage",e[e.Texture=2]="Texture",e[e.Sampler=3]="Sampler",e[e.StorageTexture=4]="StorageTexture"})(ce||(ce={}));class vr{constructor(t,n,u,h,_,b,z){this.name=t,this.type=n,this.group=u,this.binding=h,this.attributes=_,this.resourceType=b,this.access=z}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray?this.type.format:this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class n1{constructor(t,n){this.name=t,this.type=n}}class wr{constructor(t,n){this.align=t,this.size=n}}class r1{constructor(t,n,u,h){this.name=t,this.type=n,this.locationType=u,this.location=h,this.interpolation=null}}class aa{constructor(t,n,u,h){this.name=t,this.type=n,this.locationType=u,this.location=h}}class s1{constructor(t,n=null){this.stage=null,this.inputs=[],this.outputs=[],this.resources=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=t,this.stage=n}}class u1{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}class a1{constructor(t,n,u,h){this.name=t,this.type=n,this.attributes=u,this.id=h}}class o1{constructor(t){this.resources=null,this.inUse=!1,this.info=null,this.node=t}}class Je{constructor(t){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new u1,this.functions=[],this._types=new Map,this._functions=new Map,t&&this.update(t)}_isStorageTexture(t){return t.name=="texture_storage_1d"||t.name=="texture_storage_2d"||t.name=="texture_storage_2d_array"||t.name=="texture_storage_3d"}update(t){const u=new e1().parse(t);for(const h of u)h instanceof ps&&this._functions.set(h.name,new o1(h));for(const h of u)if(h instanceof Dn){const _=this._getTypeInfo(h,null);_ instanceof mr&&this.structs.push(_)}for(const h of u){if(h instanceof Oa){this.aliases.push(this._getAliasInfo(h));continue}if(h instanceof qa){const _=h,b=this._getAttributeNum(_.attributes,"id",0),z=_.type!=null?this._getTypeInfo(_.type,_.attributes):null;this.overrides.push(new a1(_.name,z,_.attributes,b));continue}if(this._isUniformVar(h)){const _=h,b=this._getAttributeNum(_.attributes,"group",0),z=this._getAttributeNum(_.attributes,"binding",0),P=this._getTypeInfo(_.type,_.attributes),j=new vr(_.name,P,b,z,_.attributes,ce.Uniform,_.access);this.uniforms.push(j);continue}if(this._isStorageVar(h)){const _=h,b=this._getAttributeNum(_.attributes,"group",0),z=this._getAttributeNum(_.attributes,"binding",0),P=this._getTypeInfo(_.type,_.attributes),j=this._isStorageTexture(P),K=new vr(_.name,P,b,z,_.attributes,j?ce.StorageTexture:ce.Storage,_.access);this.storage.push(K);continue}if(this._isTextureVar(h)){const _=h,b=this._getAttributeNum(_.attributes,"group",0),z=this._getAttributeNum(_.attributes,"binding",0),P=this._getTypeInfo(_.type,_.attributes),j=this._isStorageTexture(P),K=new vr(_.name,P,b,z,_.attributes,j?ce.StorageTexture:ce.Texture,_.access);j?this.storage.push(K):this.textures.push(K);continue}if(this._isSamplerVar(h)){const _=h,b=this._getAttributeNum(_.attributes,"group",0),z=this._getAttributeNum(_.attributes,"binding",0),P=this._getTypeInfo(_.type,_.attributes),j=new vr(_.name,P,b,z,_.attributes,ce.Sampler,_.access);this.samplers.push(j);continue}if(h instanceof ps){const _=this._getAttribute(h,"vertex"),b=this._getAttribute(h,"fragment"),z=this._getAttribute(h,"compute"),P=_||b||z,j=new s1(h.name,P==null?void 0:P.name);j.startLine=h.startLine,j.endLine=h.endLine,this.functions.push(j),this._functions.get(h.name).info=j,P&&(this._functions.get(h.name).inUse=!0,j.inUse=!0,j.resources=this._findResources(h,!!P),j.inputs=this._getInputs(h.args),j.outputs=this._getOutputs(h.returnType),this.entry[P.name].push(j));continue}}for(const h of this._functions.values())h.info&&(h.info.inUse=h.inUse,this._addCalls(h.node,h.info.calls));for(const h of this.uniforms)this._markStructsInUse(h.type);for(const h of this.storage)this._markStructsInUse(h.type)}_markStructsInUse(t){if(t.isStruct){t.inUse=!0;for(const n of t.members)this._markStructsInUse(n.type)}else if(t.isArray)this._markStructsInUse(t.format);else if(t.isTemplate)this._markStructsInUse(t.format);else{const n=this._getAlias(t.name);n&&this._markStructsInUse(n)}}_addCalls(t,n){var u;for(const h of t.calls){const _=(u=this._functions.get(h.name))===null||u===void 0?void 0:u.info;_&&n.add(_)}}findResource(t,n){for(const u of this.uniforms)if(u.group==t&&u.binding==n)return u;for(const u of this.storage)if(u.group==t&&u.binding==n)return u;for(const u of this.textures)if(u.group==t&&u.binding==n)return u;for(const u of this.samplers)if(u.group==t&&u.binding==n)return u;return null}_findResource(t){for(const n of this.uniforms)if(n.name==t)return n;for(const n of this.storage)if(n.name==t)return n;for(const n of this.textures)if(n.name==t)return n;for(const n of this.samplers)if(n.name==t)return n;return null}_markStructsFromAST(t){const n=this._getTypeInfo(t,null);this._markStructsInUse(n)}_findResources(t,n){const u=[],h=this,_=[];return t.search(b=>{if(b instanceof Ar)_.push({});else if(b instanceof kr)_.pop();else if(b instanceof mn){const z=b;n&&z.type!==null&&this._markStructsFromAST(z.type),_.length>0&&(_[_.length-1][z.name]=z)}else if(b instanceof Un){const z=b;n&&z.type!==null&&this._markStructsFromAST(z.type)}else if(b instanceof gs){const z=b;n&&z.type!==null&&this._markStructsFromAST(z.type),_.length>0&&(_[_.length-1][z.name]=z)}else if(b instanceof Ds){const z=b;if(_.length>0&&_[_.length-1][z.name])return;const P=h._findResource(z.name);P&&u.push(P)}else if(b instanceof Ua){const z=b,P=h._functions.get(z.name);P&&(n&&(P.inUse=!0),t.calls.add(P.node),P.resources===null&&(P.resources=h._findResources(P.node,n)),u.push(...P.resources))}else if(b instanceof Pa){const z=b,P=h._functions.get(z.name);P&&(n&&(P.inUse=!0),t.calls.add(P.node),P.resources===null&&(P.resources=h._findResources(P.node,n)),u.push(...P.resources))}}),[...new Map(u.map(b=>[b.name,b])).values()]}getBindGroups(){const t=[];function n(u,h){u>=t.length&&(t.length=u+1),t[u]===void 0&&(t[u]=[]),h>=t[u].length&&(t[u].length=h+1)}for(const u of this.uniforms){n(u.group,u.binding);const h=t[u.group];h[u.binding]=u}for(const u of this.storage){n(u.group,u.binding);const h=t[u.group];h[u.binding]=u}for(const u of this.textures){n(u.group,u.binding);const h=t[u.group];h[u.binding]=u}for(const u of this.samplers){n(u.group,u.binding);const h=t[u.group];h[u.binding]=u}return t}_getOutputs(t,n=void 0){if(n===void 0&&(n=[]),t instanceof Dn)this._getStructOutputs(t,n);else{const u=this._getOutputInfo(t);u!==null&&n.push(u)}return n}_getStructOutputs(t,n){for(const u of t.members)if(u.type instanceof Dn)this._getStructOutputs(u.type,n);else{const h=this._getAttribute(u,"location")||this._getAttribute(u,"builtin");if(h!==null){const _=this._getTypeInfo(u.type,u.type.attributes),b=this._parseInt(h.value),z=new aa(u.name,_,h.name,b);n.push(z)}}}_getOutputInfo(t){const n=this._getAttribute(t,"location")||this._getAttribute(t,"builtin");if(n!==null){const u=this._getTypeInfo(t,t.attributes),h=this._parseInt(n.value);return new aa("",u,n.name,h)}return null}_getInputs(t,n=void 0){n===void 0&&(n=[]);for(const u of t)if(u.type instanceof Dn)this._getStructInputs(u.type,n);else{const h=this._getInputInfo(u);h!==null&&n.push(h)}return n}_getStructInputs(t,n){for(const u of t.members)if(u.type instanceof Dn)this._getStructInputs(u.type,n);else{const h=this._getInputInfo(u);h!==null&&n.push(h)}}_getInputInfo(t){const n=this._getAttribute(t,"location")||this._getAttribute(t,"builtin");if(n!==null){const u=this._getAttribute(t,"interpolation"),h=this._getTypeInfo(t.type,t.attributes),_=this._parseInt(n.value),b=new r1(t.name,h,n.name,_);return u!==null&&(b.interpolation=this._parseString(u.value)),b}return null}_parseString(t){return t instanceof Array&&(t=t[0]),t}_parseInt(t){t instanceof Array&&(t=t[0]);const n=parseInt(t);return isNaN(n)?t:n}_getAlias(t){for(const n of this.aliases)if(n.name==t)return n.type;return null}_getAliasInfo(t){return new n1(t.name,this._getTypeInfo(t.type,null))}_getTypeInfo(t,n){if(this._types.has(t))return this._types.get(t);if(t instanceof Va){const h=t,_=this._getTypeInfo(h.format,h.attributes),b=new rs(h.name,n);return b.format=_,b.count=h.count,this._types.set(t,b),this._updateTypeInfo(b),b}if(t instanceof Dn){const h=t,_=new mr(h.name,n);_.startLine=h.startLine,_.endLine=h.endLine;for(const b of h.members){const z=this._getTypeInfo(b.type,b.attributes);_.members.push(new sa(b.name,z,b.attributes))}return this._types.set(t,_),this._updateTypeInfo(_),_}if(t instanceof er){const h=t,_=h.format instanceof An,b=h.format?_?this._getTypeInfo(h.format,null):new Rn(h.format,null):null,z=new ua(h.name,b,n,h.access);return this._types.set(t,z),this._updateTypeInfo(z),z}if(t instanceof La){const h=t,_=h.format?this._getTypeInfo(h.format,null):null,b=new ua(h.name,_,n,h.access);return this._types.set(t,b),this._updateTypeInfo(b),b}const u=new Rn(t.name,n);return this._types.set(t,u),this._updateTypeInfo(u),u}_updateTypeInfo(t){var n,u;const h=this._getTypeSize(t);if(t.size=(n=h==null?void 0:h.size)!==null&&n!==void 0?n:0,t instanceof rs){const _=this._getTypeSize(t.format);t.stride=(u=_==null?void 0:_.size)!==null&&u!==void 0?u:0,this._updateTypeInfo(t.format)}t instanceof mr&&this._updateStructInfo(t)}_updateStructInfo(t){var n;let u=0,h=0,_=0,b=0;for(let z=0,P=t.members.length;z<P;++z){const j=t.members[z],K=this._getTypeSize(j);if(!K)continue;(n=this._getAlias(j.type.name))!==null&&n!==void 0||j.type;const Y=K.align,ut=K.size;u=this._roundUp(Y,u+h),h=ut,_=u,b=Math.max(b,Y),j.offset=u,j.size=ut,this._updateTypeInfo(j.type)}t.size=this._roundUp(b,_+h),t.align=b}_getTypeSize(t){var n;if(t==null)return null;const u=this._getAttributeNum(t.attributes,"size",0),h=this._getAttributeNum(t.attributes,"align",0);if(t instanceof sa&&(t=t.type),t instanceof Rn){const _=this._getAlias(t.name);_!==null&&(t=_)}{const _=Je._typeInfo[t.name];if(_!==void 0){const b=t.format==="f16"?2:1;return new wr(Math.max(h,_.align/b),Math.max(u,_.size/b))}}{const _=Je._typeInfo[t.name.substring(0,t.name.length-1)];if(_){const b=t.name[t.name.length-1]==="h"?2:1;return new wr(Math.max(h,_.align/b),Math.max(u,_.size/b))}}if(t instanceof rs){let _=t,b=8,z=8;const P=this._getTypeSize(_.format);P!==null&&(z=P.size,b=P.align);const j=_.count,K=this._getAttributeNum((n=t==null?void 0:t.attributes)!==null&&n!==void 0?n:null,"stride",this._roundUp(b,z));return z=j*K,u&&(z=u),new wr(Math.max(h,b),Math.max(u,z))}if(t instanceof mr){let _=0,b=0,z=0,P=0,j=0;for(const K of t.members){const Y=this._getTypeSize(K.type);Y!==null&&(_=Math.max(Y.align,_),z=this._roundUp(Y.align,z+P),P=Y.size,j=z)}return b=this._roundUp(_,j+P),new wr(Math.max(h,_),Math.max(u,b))}return null}_isUniformVar(t){return t instanceof mn&&t.storage=="uniform"}_isStorageVar(t){return t instanceof mn&&t.storage=="storage"}_isTextureVar(t){return t instanceof mn&&t.type!==null&&Je._textureTypes.indexOf(t.type.name)!=-1}_isSamplerVar(t){return t instanceof mn&&t.type!==null&&Je._samplerTypes.indexOf(t.type.name)!=-1}_getAttribute(t,n){const u=t;if(!u||!u.attributes)return null;const h=u.attributes;for(let _ of h)if(_.name==n)return _;return null}_getAttributeNum(t,n,u){if(t===null)return u;for(let h of t)if(h.name==n){let _=h!==null&&h.value!==null?h.value:u;return _ instanceof Array&&(_=_[0]),typeof _=="number"?_:typeof _=="string"?parseInt(_):u}return u}_roundUp(t,n){return Math.ceil(n/t)*t}}Je._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}};Je._textureTypes=D.any_texture_type.map(e=>e.name);Je._samplerTypes=D.sampler_type.map(e=>e.name);function Ln(e,t){return Object.fromEntries(t.map(n=>{const u=h1(e,n,0);return[n.name,{typeDefinition:u,group:n.group,binding:n.binding,size:u.size}]}))}function Ga(e,t,n){return{fields:Object.fromEntries(t.members.map(h=>[h.name,{offset:h.offset,type:As(e,h.type,0)}])),size:t.size,offset:n}}function i1(e){var t;if(e.name.includes("depth"))return"depth";switch((t=e.format)==null?void 0:t.name){case"f32":return"float";case"i32":return"sint";case"u32":return"uint";default:throw new Error("unknown texture sample type")}}function oa(e){return e.name.includes("2d_array")?"2d-array":e.name.includes("cube_array")?"cube-array":e.name.includes("3d")?"3d":e.name.includes("1d")?"1d":e.name.includes("cube")?"cube":"2d"}function c1(e){switch(e.access){case"read":return"read-only";case"write":return"write-only";case"read_write":return"read-write";default:throw new Error("unknonw storage texture access")}}function l1(e){return e.name.endsWith("_comparison")?"comparison":"filtering"}function f1(e,t){const{binding:n,access:u,type:h}=e;switch(e.resourceType){case ce.Uniform:return{binding:n,visibility:t,buffer:{...e.size&&{minBindingSize:e.size}}};case ce.Storage:return{binding:n,visibility:t,buffer:{type:u===""||u==="read"?"read-only-storage":"storage",...e.size&&{minBindingSize:e.size}}};case ce.Texture:{if(h.name==="texture_external")return{binding:n,visibility:t,externalTexture:{}};const _=h.name.includes("multisampled");return{binding:n,visibility:t,texture:{sampleType:i1(h),viewDimension:oa(h),multisampled:_}}}case ce.Sampler:return{binding:n,visibility:t,sampler:{type:l1(h)}};case ce.StorageTexture:return{binding:n,visibility:t,storageTexture:{access:c1(h),format:h.format.name,viewDimension:oa(h)}};default:throw new Error("unknown resource type")}}function ss(e,t){const n={};for(const u of e)n[u.name]={stage:t,resources:u.resources.map(h=>{const{name:_,group:b}=h;return{name:_,group:b,entry:f1(h,t)}})};return n}function X1(e){const t=new Je(e),n=Object.fromEntries(t.structs.map(K=>[K.name,Ga(t,K,0)])),u=Ln(t,t.uniforms),h=Ln(t,t.storage.filter(K=>K.resourceType===ce.Storage)),_=Ln(t,t.storage.filter(K=>K.resourceType===ce.StorageTexture)),b=Ln(t,t.textures.filter(K=>K.type.name!=="texture_external")),z=Ln(t,t.textures.filter(K=>K.type.name==="texture_external")),P=Ln(t,t.samplers),j={...ss(t.entry.vertex,GPUShaderStage.VERTEX),...ss(t.entry.fragment,GPUShaderStage.FRAGMENT),...ss(t.entry.compute,GPUShaderStage.COMPUTE)};return{externalTextures:z,samplers:P,structs:n,storages:h,storageTextures:_,textures:b,uniforms:u,entryPoints:j}}function us(e,t=""){if(!e)throw new Error(t)}function h1(e,t,n){switch(t.resourceType){case ce.Uniform:case ce.Storage:case ce.StorageTexture:return As(e,t.type,n);default:return{size:0,type:t.type.name}}}function As(e,t,n){if(t.isArray){us(!t.isStruct,"struct array is invalid"),us(!t.isStruct,"template array is invalid");const u=t;return{size:u.size,elementType:As(e,u.format,n),numElements:u.count}}else{if(t.isStruct)return us(!t.isTemplate,"template struct is invalid"),Ga(e,t,n);{const u=t,h=t.isTemplate?`${u.name}<${u.format.name}>`:t.name;return{size:t.size,type:h}}}}const Ha=new Map([[Int8Array,{formats:["sint8","snorm8"],defaultForType:1}],[Uint8Array,{formats:["uint8","unorm8"],defaultForType:1}],[Int16Array,{formats:["sint16","snorm16"],defaultForType:1}],[Uint16Array,{formats:["uint16","unorm16"],defaultForType:1}],[Int32Array,{formats:["sint32","snorm32"],defaultForType:0}],[Uint32Array,{formats:["uint32","unorm32"],defaultForType:0}],[Float32Array,{formats:["float32","float32"],defaultForType:0}]]),d1=new Map([...Ha.entries()].map(([e,{formats:[t,n]}])=>[[t,e],[n,e]]).flat());function ks(e){return e==="indices"}function Za(e,t){if(sr(e))return e;let n=e;if(sr(n.data))return n.data;(Array.isArray(e)||typeof e=="number")&&(n={data:e});let u=n.type;return u||(ks(t)?u=Uint32Array:u=Float32Array),new u(n.data)}function p1(e){return e.length?e:e.data}const g1=[{re:/coord|texture|uv/i,numComponents:2},{re:/color|colour/i,numComponents:4}];function D1(e){for(const{re:t,numComponents:n}of g1)if(t.test(e))return n;return 3}function _1(e,t){const n=D1(e);if(t%n>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${n} but ${t} values is not evenly divisible by ${n}. You should specify it.`);return n}function m1(e,t){return e.numComponents||_1(t,p1(e).length)}const v1=/(\w+)(?:x(\d))$/;function Wa(e){const t=v1.exec(e),[n,u]=t?[t[1],parseInt(t[2])]:[e,1];return{Type:d1.get(n),numComponents:u}}function ia(e,t){const n=Object.getPrototypeOf(e).constructor;return new n(t)}function w1(e,t={}){const n=t.interleave===void 0?!0:t.interleave,u=t.stepMode||"vertex",h=t.shaderLocation?Array.isArray(t.shaderLocation)?t.shaderLocation:[t.shaderLocation]:[0];let _=0;const b=[],z=[],P=[];return Object.keys(e).filter(j=>!ks(j)).forEach(j=>{const K=e[j],Y=Za(K,j),ut=m1(K,j),et=ut/4,rt=ut/3,M=et%1===0?4:rt%1===0?3:4;for(let Z=0;Z<ut;Z+=M){const Q=Math.min(M,ut-Z),tt=_;_+=Q*Y.BYTES_PER_ELEMENT;const{defaultForType:lt,formats:ht}=Ha.get(Object.getPrototypeOf(Y).constructor),pt=K.normalize,jt=`${ht[typeof pt>"u"?lt:pt?1:0]}${Q>1?`x${Q}`:""}`,Ft=h.shift();h.length===0&&h.push(Ft+1),z.push({offset:tt,format:jt,shaderLocation:Ft}),P.push({data:Y,offset:Z,stride:ut})}n||(b.push({stepMode:u,arrayStride:_,attributes:z.slice()}),_=0,z.length=0)}),z.length&&b.push({stepMode:u,arrayStride:_,attributes:z}),{bufferLayouts:b,typedArrays:P}}function Ya(e,t){return sr(e)?{data:e,offset:0,stride:t}:e}function y1(e,t,n,u){const h=new Map,_=b=>{const z=Object.getPrototypeOf(b).constructor,P=h.get(z);if(P)return P;const j=new z(u);return h.set(z,j),j};e.forEach((b,z)=>{const{offset:P,format:j}=b,{numComponents:K}=Wa(j),{data:Y,offset:ut,stride:et}=Ya(t[z],K),rt=_(Y);for(let M=0;M<Y.length;M+=et){const Z=M/et,Q=(P+Z*n)/rt.BYTES_PER_ELEMENT,tt=M+ut,lt=Y.subarray(tt,tt+K);rt.set(lt,Q)}})}function J1(e,t,n={}){const u=n.usage||0,{bufferLayouts:h,typedArrays:_}=w1(t,n),b=[];let z=-1,P=0;for(const{attributes:Y,arrayStride:ut}of h){const et=Y,rt=et[0],{numComponents:M}=Wa(rt.format),{data:Z,stride:Q}=Ya(_[P],M);z<0&&(z=Z.length/Q);const tt=ut*z,lt=e.createBuffer({usage:u|GPUBufferUsage.VERTEX,size:tt,mappedAtCreation:!0}),ht=lt.getMappedRange();et.length===1&&ut===Z.BYTES_PER_ELEMENT*M?ia(Z,ht).set(Z):y1(et,_.slice(P),ut,ht),lt.unmap(),b.push(lt),P+=et.length}const j={numElements:z,bufferLayouts:h,buffers:b},K=Object.entries(t).find(([Y])=>ks(Y));if(K){const Y=Za(K[1],"indices"),ut=e.createBuffer({size:Y.byteLength,usage:GPUBufferUsage.INDEX|u,mappedAtCreation:!0});ia(Y,ut.getMappedRange()).set(Y),ut.unmap(),j.indexBuffer=ut,j.indexFormat=Y instanceof Uint16Array?"uint16":"uint32",j.numElements=Y.length}return j}export{Hn as A,G1 as B,F1 as C,J1 as D,R1 as E,H1 as F,Me as G,Rl as H,B1 as I,On as J,$a as K,bn as L,is as N,Vn as O,k1 as _,da as a,Ve as b,Z0 as c,Le as d,j1 as e,S1 as f,I1 as g,Y0 as h,ms as i,z1 as j,xl as k,$1 as l,ve as m,X1 as n,Jt as o,Z1 as p,N1 as q,T1 as r,el as s,q1 as t,vn as u,E1 as v,X0 as w,x1 as x,C1 as y,M1 as z};
