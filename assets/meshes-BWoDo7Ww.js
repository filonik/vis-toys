import{q as Ns,r as Xt,m as xr,s as Ei,x as J0,y as Zr,F as Fi,d as pn,l as $t,z as Xu,w as Ci,A as Bi,o as Yn,c as Xn,a as Na,B as Q0,C as K0,D as ef,j as tf,b as va,f as Gn,k as nf,E as rf,G as Ju,H as sf,p as af,u as uf,I as of,J as cf}from"./index-BuIB1ruo.js";function lf(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}var Qu;let ff=Symbol("headlessui.useid"),df=0;const Si=(Qu=void 0)!=null?Qu:function(){return Ns(ff,()=>`${++df}`)()};function it(t){var e;if(t==null||t.value==null)return null;let n=(e=t.value.$el)!=null?e:t.value;return n instanceof Node?n:null}function wr(t,e,...n){if(t in e){let s=e[t];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,wr),r}var hf=Object.defineProperty,pf=(t,e,n)=>e in t?hf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ku=(t,e,n)=>(pf(t,typeof e!="symbol"?e+"":e,n),n);let mf=class{constructor(){Ku(this,"current",this.detect()),Ku(this,"currentId",0)}set(e){this.current!==e&&(this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},gf=new mf;function _f(t){if(gf.isServer)return null;if(t instanceof Node)return t.ownerDocument;if(t!=null&&t.hasOwnProperty("value")){let e=it(t);if(e)return e.ownerDocument}return document}let vf=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var en=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(en||{}),zr=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(zr||{}),yf=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(yf||{});function Df(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(vf)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var wf=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(wf||{}),bf=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(bf||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let kf=["textarea","input"].join(",");function xf(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,kf))!=null?n:!1}function _r(t,e=n=>n){return t.slice().sort((n,r)=>{let s=e(n),i=e(r);if(s===null||i===null)return 0;let m=s.compareDocumentPosition(i);return m&Node.DOCUMENT_POSITION_FOLLOWING?-1:m&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function mr(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){var i;let m=(i=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t==null?void 0:t.ownerDocument)!=null?i:document,v=Array.isArray(t)?n?_r(t):t:Df(t);s.length>0&&v.length>1&&(v=v.filter(se=>!s.includes(se))),r=r??m.activeElement;let F=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),T=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,v.indexOf(r))-1;if(e&4)return Math.max(0,v.indexOf(r))+1;if(e&8)return v.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),R=e&32?{preventScroll:!0}:{},W=0,ie=v.length,te;do{if(W>=ie||W+ie<=0)return 0;let se=T+W;if(e&16)se=(se+ie)%ie;else{if(se<0)return 3;if(se>=ie)return 1}te=v[se],te==null||te.focus(R),W+=F}while(te!==m.activeElement);return e&6&&xf(te)&&te.select(),2}function ei(t,e){if(t)return t;let n=e??"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function Af(t,e){let n=Xt(ei(t.value.type,t.value.as));return xr(()=>{n.value=ei(t.value.type,t.value.as)}),Ei(()=>{var r;n.value||it(e)&&it(e)instanceof HTMLButtonElement&&!((r=it(e))!=null&&r.hasAttribute("type"))&&(n.value="button")}),n}var ya=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(ya||{}),Ef=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Ef||{});function Br({visible:t=!0,features:e=0,ourProps:n,theirProps:r,...s}){var i;let m=Mi(r,n),v=Object.assign(s,{props:m});if(t||e&2&&m.static)return ca(v);if(e&1){let F=(i=m.unmount)==null||i?0:1;return wr(F,{0(){return null},1(){return ca({...s,props:{...m,hidden:!0,style:{display:"none"}}})}})}return ca(v)}function ca({props:t,attrs:e,slots:n,slot:r,name:s}){var i,m;let{as:v,...F}=Ni(t,["unmount","static"]),T=(i=n.default)==null?void 0:i.call(n,r),R={};if(r){let W=!1,ie=[];for(let[te,se]of Object.entries(r))typeof se=="boolean"&&(W=!0),se===!0&&ie.push(te);W&&(R["data-headlessui-state"]=ie.join(" "))}if(v==="template"){if(T=Ti(T??[]),Object.keys(F).length>0||Object.keys(e).length>0){let[W,...ie]=T??[];if(!Ff(W)||ie.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${s} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(F).concat(Object.keys(e)).map(N=>N.trim()).filter((N,Y,K)=>K.indexOf(N)===Y).sort((N,Y)=>N.localeCompare(Y)).map(N=>`  - ${N}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(N=>`  - ${N}`).join(`
`)].join(`
`));let te=Mi((m=W.props)!=null?m:{},F,R),se=J0(W,te,!0);for(let N in te)N.startsWith("on")&&(se.props||(se.props={}),se.props[N]=te[N]);return se}return Array.isArray(T)&&T.length===1?T[0]:T}return Zr(v,Object.assign({},F,R),{default:()=>T})}function Ti(t){return t.flatMap(e=>e.type===Fi?Ti(e.children):[e])}function Mi(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):e[s]=r[s];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(e,{[r](s,...i){let m=n[r];for(let v of m){if(s instanceof Event&&s.defaultPrevented)return;v(s,...i)}}});return e}function Ni(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function Ff(t){return t==null?!1:typeof t.type=="string"||typeof t.type=="object"||typeof t.type=="function"}var Ii=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(Ii||{});let $i=pn({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(t,{slots:e,attrs:n}){return()=>{var r;let{features:s,...i}=t,m={"aria-hidden":(s&2)===2?!0:(r=i["aria-hidden"])!=null?r:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return Br({ourProps:m,theirProps:i,slot:{},attrs:n,slots:e,name:"Hidden"})}}});var tn=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(tn||{});let Cf=pn({props:{onFocus:{type:Function,required:!0}},setup(t){let e=Xt(!0);return()=>e.value?Zr($i,{as:"button",type:"button",features:Ii.Focusable,onFocus(n){n.preventDefault();let r,s=50;function i(){var m;if(s--<=0){r&&cancelAnimationFrame(r);return}if((m=t.onFocus)!=null&&m.call(t)){e.value=!1,cancelAnimationFrame(r);return}r=requestAnimationFrame(i)}r=requestAnimationFrame(i)}}):null}});var Bf=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Bf||{}),Sf=(t=>(t[t.Less=-1]="Less",t[t.Equal=0]="Equal",t[t.Greater=1]="Greater",t))(Sf||{});let zi=Symbol("TabsContext");function as(t){let e=Ns(zi,null);if(e===null){let n=new Error(`<${t} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,as),n}return e}let Ia=Symbol("TabsSSRContext"),tp=pn({name:"TabGroup",emits:{change:t=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:e,attrs:n,emit:r}){var s;let i=Xt((s=t.selectedIndex)!=null?s:t.defaultIndex),m=Xt([]),v=Xt([]),F=$t(()=>t.selectedIndex!==null),T=$t(()=>F.value?t.selectedIndex:i.value);function R(N){var Y;let K=_r(W.tabs.value,it),ne=_r(W.panels.value,it),he=K.filter(me=>{var ve;return!((ve=it(me))!=null&&ve.hasAttribute("disabled"))});if(N<0||N>K.length-1){let me=wr(i.value===null?0:Math.sign(N-i.value),{[-1]:()=>1,0:()=>wr(Math.sign(N),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),ve=wr(me,{0:()=>K.indexOf(he[0]),1:()=>K.indexOf(he[he.length-1])});ve!==-1&&(i.value=ve),W.tabs.value=K,W.panels.value=ne}else{let me=K.slice(0,N),ve=[...K.slice(N),...me].find(Ke=>he.includes(Ke));if(!ve)return;let ue=(Y=K.indexOf(ve))!=null?Y:W.selectedIndex.value;ue===-1&&(ue=W.selectedIndex.value),i.value=ue,W.tabs.value=K,W.panels.value=ne}}let W={selectedIndex:$t(()=>{var N,Y;return(Y=(N=i.value)!=null?N:t.defaultIndex)!=null?Y:null}),orientation:$t(()=>t.vertical?"vertical":"horizontal"),activation:$t(()=>t.manual?"manual":"auto"),tabs:m,panels:v,setSelectedIndex(N){T.value!==N&&r("change",N),F.value||R(N)},registerTab(N){var Y;if(m.value.includes(N))return;let K=m.value[i.value];if(m.value.push(N),m.value=_r(m.value,it),!F.value){let ne=(Y=m.value.indexOf(K))!=null?Y:i.value;ne!==-1&&(i.value=ne)}},unregisterTab(N){let Y=m.value.indexOf(N);Y!==-1&&m.value.splice(Y,1)},registerPanel(N){v.value.includes(N)||(v.value.push(N),v.value=_r(v.value,it))},unregisterPanel(N){let Y=v.value.indexOf(N);Y!==-1&&v.value.splice(Y,1)}};Xu(zi,W);let ie=Xt({tabs:[],panels:[]}),te=Xt(!1);xr(()=>{te.value=!0}),Xu(Ia,$t(()=>te.value?null:ie.value));let se=$t(()=>t.selectedIndex);return xr(()=>{Ci([se],()=>{var N;return R((N=t.selectedIndex)!=null?N:t.defaultIndex)},{immediate:!0})}),Ei(()=>{if(!F.value||T.value==null||W.tabs.value.length<=0)return;let N=_r(W.tabs.value,it);N.some((Y,K)=>it(W.tabs.value[K])!==it(Y))&&W.setSelectedIndex(N.findIndex(Y=>it(Y)===it(W.tabs.value[T.value])))}),()=>{let N={selectedIndex:i.value};return Zr(Fi,[m.value.length<=0&&Zr(Cf,{onFocus:()=>{for(let Y of m.value){let K=it(Y);if((K==null?void 0:K.tabIndex)===0)return K.focus(),!0}return!1}}),Br({theirProps:{...n,...Ni(t,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:N,slots:e,attrs:n,name:"TabGroup"})])}}}),np=pn({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(t,{attrs:e,slots:n}){let r=as("TabList");return()=>{let s={selectedIndex:r.selectedIndex.value},i={role:"tablist","aria-orientation":r.orientation.value};return Br({ourProps:i,theirProps:t,slot:s,attrs:e,slots:n,name:"TabList"})}}}),rp=pn({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(t,{attrs:e,slots:n,expose:r}){var s;let i=(s=t.id)!=null?s:`headlessui-tabs-tab-${Si()}`,m=as("Tab"),v=Xt(null);r({el:v,$el:v}),xr(()=>m.registerTab(v)),Bi(()=>m.unregisterTab(v));let F=Ns(Ia),T=$t(()=>{if(F.value){let ne=F.value.tabs.indexOf(i);return ne===-1?F.value.tabs.push(i)-1:ne}return-1}),R=$t(()=>{let ne=m.tabs.value.indexOf(v);return ne===-1?T.value:ne}),W=$t(()=>R.value===m.selectedIndex.value);function ie(ne){var he;let me=ne();if(me===zr.Success&&m.activation.value==="auto"){let ve=(he=_f(v))==null?void 0:he.activeElement,ue=m.tabs.value.findIndex(Ke=>it(Ke)===ve);ue!==-1&&m.setSelectedIndex(ue)}return me}function te(ne){let he=m.tabs.value.map(me=>it(me)).filter(Boolean);if(ne.key===tn.Space||ne.key===tn.Enter){ne.preventDefault(),ne.stopPropagation(),m.setSelectedIndex(R.value);return}switch(ne.key){case tn.Home:case tn.PageUp:return ne.preventDefault(),ne.stopPropagation(),ie(()=>mr(he,en.First));case tn.End:case tn.PageDown:return ne.preventDefault(),ne.stopPropagation(),ie(()=>mr(he,en.Last))}if(ie(()=>wr(m.orientation.value,{vertical(){return ne.key===tn.ArrowUp?mr(he,en.Previous|en.WrapAround):ne.key===tn.ArrowDown?mr(he,en.Next|en.WrapAround):zr.Error},horizontal(){return ne.key===tn.ArrowLeft?mr(he,en.Previous|en.WrapAround):ne.key===tn.ArrowRight?mr(he,en.Next|en.WrapAround):zr.Error}}))===zr.Success)return ne.preventDefault()}let se=Xt(!1);function N(){var ne;se.value||(se.value=!0,!t.disabled&&((ne=it(v))==null||ne.focus({preventScroll:!0}),m.setSelectedIndex(R.value),lf(()=>{se.value=!1})))}function Y(ne){ne.preventDefault()}let K=Af($t(()=>({as:t.as,type:e.type})),v);return()=>{var ne,he;let me={selected:W.value,disabled:(ne=t.disabled)!=null?ne:!1},{...ve}=t,ue={ref:v,onKeydown:te,onMousedown:Y,onClick:N,id:i,role:"tab",type:K.value,"aria-controls":(he=it(m.panels.value[R.value]))==null?void 0:he.id,"aria-selected":W.value,tabIndex:W.value?0:-1,disabled:t.disabled?!0:void 0};return Br({ourProps:ue,theirProps:ve,slot:me,attrs:e,slots:n,name:"Tab"})}}}),sp=pn({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:e,attrs:n}){let r=as("TabPanels");return()=>{let s={selectedIndex:r.selectedIndex.value};return Br({theirProps:t,ourProps:{},slot:s,attrs:n,slots:e,name:"TabPanels"})}}}),ap=pn({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(t,{attrs:e,slots:n,expose:r}){var s;let i=(s=t.id)!=null?s:`headlessui-tabs-panel-${Si()}`,m=as("TabPanel"),v=Xt(null);r({el:v,$el:v}),xr(()=>m.registerPanel(v)),Bi(()=>m.unregisterPanel(v));let F=Ns(Ia),T=$t(()=>{if(F.value){let ie=F.value.panels.indexOf(i);return ie===-1?F.value.panels.push(i)-1:ie}return-1}),R=$t(()=>{let ie=m.panels.value.indexOf(v);return ie===-1?T.value:ie}),W=$t(()=>R.value===m.selectedIndex.value);return()=>{var ie;let te={selected:W.value},{tabIndex:se,...N}=t,Y={ref:v,id:i,role:"tabpanel","aria-labelledby":(ie=it(m.tabs.value[R.value]))==null?void 0:ie.id,tabIndex:W.value?se:-1};return!W.value&&t.unmount&&!t.static?Zr($i,{as:"span","aria-hidden":!0,...Y}):Br({ourProps:Y,theirProps:N,slot:te,attrs:e,slots:n,features:ya.Static|ya.RenderStrategy,visible:W.value,name:"TabPanel"})}}});function Tf(t,e){return Yn(),Xn("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[Na("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 8.25H7.5a2.25 2.25 0 0 0-2.25 2.25v9a2.25 2.25 0 0 0 2.25 2.25h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25H15m0-3-3-3m0 0-3 3m3-3V15"})])}const Mf=(t,e)=>t+e,Nf=(t,e)=>t-e,Oi=(t,e)=>t*e,If=(t,e)=>t/e,$f={append:Oi,empty:()=>1},zf=function*(t){yield*t},Of=({append:t,empty:e})=>function*(n){let r=e();for(let s of n)yield r,r=t(r,s)},Pf=function*(t,e){for(let n=0,r=0;n<t.length||r<e.length;){const s=t[n++];if(s!==void 0){yield s;continue}const i=e[r++];if(i!==void 0){yield i;continue}console.error("Ran out of values to combine.");break}},qf=()=>[],fn=(t,e)=>Array.from({length:e},(n,r)=>t(r)),up=(t,e)=>fn(()=>t,e),Vf=(t,e)=>{const n=e-t;return fn(r=>t+r,n)},ip=(t,e,n)=>{const r=(e-t)/(n-1);return fn(s=>t+s*r,n)},Lf=t=>e=>fn(n=>t==n?e:void 0,t+1),Zf=({append:t,empty:e})=>n=>{let r=e();for(let s of n)r=t(r,s);return r},Rf=t=>e=>Array.from(Of(t)(zf(e))),op=Rf($f),jf=()=>({append:(t,e)=>t.flatMap(n=>e.map(r=>[...n,r])),empty:()=>[[]]}),cp=Zf(jf()),Uf=t=>Array.isArray(t)?t[0]:t,Gf=(...t)=>qf().concat(...t);function Wf(t){return t!==void 0}const ti=t=>e=>Wf(e)?t(e):void 0,ni=(t,e)=>n=>e(t(n)),Rt=(t,e)=>{const n=t,r=e;return n.inv=e,r.inv=t,n};Rt.compose=(t,e)=>Rt(ni(t,e),ni(e.inv,t.inv));Rt.inverse=t=>Rt(t.inv,t);Rt.maybe=t=>Rt(ti(t),ti(t.inv));const Hf=(t,e)=>Object.keys(t).reduce((n,r)=>(n[r]=e[r]??t[r],n),{});var Yf=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,Xf=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,Jf=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,la={Space_Separator:Yf,ID_Start:Xf,ID_Continue:Jf},rt={isSpaceSeparator(t){return typeof t=="string"&&la.Space_Separator.test(t)},isIdStartChar(t){return typeof t=="string"&&(t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="$"||t==="_"||la.ID_Start.test(t))},isIdContinueChar(t){return typeof t=="string"&&(t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||t==="$"||t==="_"||t==="‌"||t==="‍"||la.ID_Continue.test(t))},isDigit(t){return typeof t=="string"&&/[0-9]/.test(t)},isHexDigit(t){return typeof t=="string"&&/[0-9A-Fa-f]/.test(t)}};let Da,zt,wn,bs,Mn,rn,vt,$a,Lr;var Qf=function(e,n){Da=String(e),zt="start",wn=[],bs=0,Mn=1,rn=0,vt=void 0,$a=void 0,Lr=void 0;do vt=Kf(),nd[zt]();while(vt.type!=="eof");return typeof n=="function"?wa({"":Lr},"",n):Lr};function wa(t,e,n){const r=t[e];if(r!=null&&typeof r=="object")if(Array.isArray(r))for(let s=0;s<r.length;s++){const i=String(s),m=wa(r,i,n);m===void 0?delete r[i]:Object.defineProperty(r,i,{value:m,writable:!0,enumerable:!0,configurable:!0})}else for(const s in r){const i=wa(r,s,n);i===void 0?delete r[s]:Object.defineProperty(r,s,{value:i,writable:!0,enumerable:!0,configurable:!0})}return n.call(t,e,r)}let Ee,be,Or,yn,ze;function Kf(){for(Ee="default",be="",Or=!1,yn=1;;){ze=kn();const t=Pi[Ee]();if(t)return t}}function kn(){if(Da[bs])return String.fromCodePoint(Da.codePointAt(bs))}function H(){const t=kn();return t===`
`?(Mn++,rn=0):t?rn+=t.length:rn++,t&&(bs+=t.length),t}const Pi={default(){switch(ze){case"	":case"\v":case"\f":case" ":case" ":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":H();return;case"/":H(),Ee="comment";return;case void 0:return H(),Xe("eof")}if(rt.isSpaceSeparator(ze)){H();return}return Pi[zt]()},comment(){switch(ze){case"*":H(),Ee="multiLineComment";return;case"/":H(),Ee="singleLineComment";return}throw Je(H())},multiLineComment(){switch(ze){case"*":H(),Ee="multiLineCommentAsterisk";return;case void 0:throw Je(H())}H()},multiLineCommentAsterisk(){switch(ze){case"*":H();return;case"/":H(),Ee="default";return;case void 0:throw Je(H())}H(),Ee="multiLineComment"},singleLineComment(){switch(ze){case`
`:case"\r":case"\u2028":case"\u2029":H(),Ee="default";return;case void 0:return H(),Xe("eof")}H()},value(){switch(ze){case"{":case"[":return Xe("punctuator",H());case"n":return H(),Rn("ull"),Xe("null",null);case"t":return H(),Rn("rue"),Xe("boolean",!0);case"f":return H(),Rn("alse"),Xe("boolean",!1);case"-":case"+":H()==="-"&&(yn=-1),Ee="sign";return;case".":be=H(),Ee="decimalPointLeading";return;case"0":be=H(),Ee="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":be=H(),Ee="decimalInteger";return;case"I":return H(),Rn("nfinity"),Xe("numeric",1/0);case"N":return H(),Rn("aN"),Xe("numeric",NaN);case'"':case"'":Or=H()==='"',be="",Ee="string";return}throw Je(H())},identifierNameStartEscape(){if(ze!=="u")throw Je(H());H();const t=ba();switch(t){case"$":case"_":break;default:if(!rt.isIdStartChar(t))throw ri();break}be+=t,Ee="identifierName"},identifierName(){switch(ze){case"$":case"_":case"‌":case"‍":be+=H();return;case"\\":H(),Ee="identifierNameEscape";return}if(rt.isIdContinueChar(ze)){be+=H();return}return Xe("identifier",be)},identifierNameEscape(){if(ze!=="u")throw Je(H());H();const t=ba();switch(t){case"$":case"_":case"‌":case"‍":break;default:if(!rt.isIdContinueChar(t))throw ri();break}be+=t,Ee="identifierName"},sign(){switch(ze){case".":be=H(),Ee="decimalPointLeading";return;case"0":be=H(),Ee="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":be=H(),Ee="decimalInteger";return;case"I":return H(),Rn("nfinity"),Xe("numeric",yn*(1/0));case"N":return H(),Rn("aN"),Xe("numeric",NaN)}throw Je(H())},zero(){switch(ze){case".":be+=H(),Ee="decimalPoint";return;case"e":case"E":be+=H(),Ee="decimalExponent";return;case"x":case"X":be+=H(),Ee="hexadecimal";return}return Xe("numeric",yn*0)},decimalInteger(){switch(ze){case".":be+=H(),Ee="decimalPoint";return;case"e":case"E":be+=H(),Ee="decimalExponent";return}if(rt.isDigit(ze)){be+=H();return}return Xe("numeric",yn*Number(be))},decimalPointLeading(){if(rt.isDigit(ze)){be+=H(),Ee="decimalFraction";return}throw Je(H())},decimalPoint(){switch(ze){case"e":case"E":be+=H(),Ee="decimalExponent";return}if(rt.isDigit(ze)){be+=H(),Ee="decimalFraction";return}return Xe("numeric",yn*Number(be))},decimalFraction(){switch(ze){case"e":case"E":be+=H(),Ee="decimalExponent";return}if(rt.isDigit(ze)){be+=H();return}return Xe("numeric",yn*Number(be))},decimalExponent(){switch(ze){case"+":case"-":be+=H(),Ee="decimalExponentSign";return}if(rt.isDigit(ze)){be+=H(),Ee="decimalExponentInteger";return}throw Je(H())},decimalExponentSign(){if(rt.isDigit(ze)){be+=H(),Ee="decimalExponentInteger";return}throw Je(H())},decimalExponentInteger(){if(rt.isDigit(ze)){be+=H();return}return Xe("numeric",yn*Number(be))},hexadecimal(){if(rt.isHexDigit(ze)){be+=H(),Ee="hexadecimalInteger";return}throw Je(H())},hexadecimalInteger(){if(rt.isHexDigit(ze)){be+=H();return}return Xe("numeric",yn*Number(be))},string(){switch(ze){case"\\":H(),be+=ed();return;case'"':if(Or)return H(),Xe("string",be);be+=H();return;case"'":if(!Or)return H(),Xe("string",be);be+=H();return;case`
`:case"\r":throw Je(H());case"\u2028":case"\u2029":rd(ze);break;case void 0:throw Je(H())}be+=H()},start(){switch(ze){case"{":case"[":return Xe("punctuator",H())}Ee="value"},beforePropertyName(){switch(ze){case"$":case"_":be=H(),Ee="identifierName";return;case"\\":H(),Ee="identifierNameStartEscape";return;case"}":return Xe("punctuator",H());case'"':case"'":Or=H()==='"',Ee="string";return}if(rt.isIdStartChar(ze)){be+=H(),Ee="identifierName";return}throw Je(H())},afterPropertyName(){if(ze===":")return Xe("punctuator",H());throw Je(H())},beforePropertyValue(){Ee="value"},afterPropertyValue(){switch(ze){case",":case"}":return Xe("punctuator",H())}throw Je(H())},beforeArrayValue(){if(ze==="]")return Xe("punctuator",H());Ee="value"},afterArrayValue(){switch(ze){case",":case"]":return Xe("punctuator",H())}throw Je(H())},end(){throw Je(H())}};function Xe(t,e){return{type:t,value:e,line:Mn,column:rn}}function Rn(t){for(const e of t){if(kn()!==e)throw Je(H());H()}}function ed(){switch(kn()){case"b":return H(),"\b";case"f":return H(),"\f";case"n":return H(),`
`;case"r":return H(),"\r";case"t":return H(),"	";case"v":return H(),"\v";case"0":if(H(),rt.isDigit(kn()))throw Je(H());return"\0";case"x":return H(),td();case"u":return H(),ba();case`
`:case"\u2028":case"\u2029":return H(),"";case"\r":return H(),kn()===`
`&&H(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw Je(H());case void 0:throw Je(H())}return H()}function td(){let t="",e=kn();if(!rt.isHexDigit(e)||(t+=H(),e=kn(),!rt.isHexDigit(e)))throw Je(H());return t+=H(),String.fromCodePoint(parseInt(t,16))}function ba(){let t="",e=4;for(;e-- >0;){const n=kn();if(!rt.isHexDigit(n))throw Je(H());t+=H()}return String.fromCodePoint(parseInt(t,16))}const nd={start(){if(vt.type==="eof")throw jn();fa()},beforePropertyName(){switch(vt.type){case"identifier":case"string":$a=vt.value,zt="afterPropertyName";return;case"punctuator":_s();return;case"eof":throw jn()}},afterPropertyName(){if(vt.type==="eof")throw jn();zt="beforePropertyValue"},beforePropertyValue(){if(vt.type==="eof")throw jn();fa()},beforeArrayValue(){if(vt.type==="eof")throw jn();if(vt.type==="punctuator"&&vt.value==="]"){_s();return}fa()},afterPropertyValue(){if(vt.type==="eof")throw jn();switch(vt.value){case",":zt="beforePropertyName";return;case"}":_s()}},afterArrayValue(){if(vt.type==="eof")throw jn();switch(vt.value){case",":zt="beforeArrayValue";return;case"]":_s()}},end(){}};function fa(){let t;switch(vt.type){case"punctuator":switch(vt.value){case"{":t={};break;case"[":t=[];break}break;case"null":case"boolean":case"numeric":case"string":t=vt.value;break}if(Lr===void 0)Lr=t;else{const e=wn[wn.length-1];Array.isArray(e)?e.push(t):Object.defineProperty(e,$a,{value:t,writable:!0,enumerable:!0,configurable:!0})}if(t!==null&&typeof t=="object")wn.push(t),Array.isArray(t)?zt="beforeArrayValue":zt="beforePropertyName";else{const e=wn[wn.length-1];e==null?zt="end":Array.isArray(e)?zt="afterArrayValue":zt="afterPropertyValue"}}function _s(){wn.pop();const t=wn[wn.length-1];t==null?zt="end":Array.isArray(t)?zt="afterArrayValue":zt="afterPropertyValue"}function Je(t){return ks(t===void 0?`JSON5: invalid end of input at ${Mn}:${rn}`:`JSON5: invalid character '${qi(t)}' at ${Mn}:${rn}`)}function jn(){return ks(`JSON5: invalid end of input at ${Mn}:${rn}`)}function ri(){return rn-=5,ks(`JSON5: invalid identifier character at ${Mn}:${rn}`)}function rd(t){console.warn(`JSON5: '${qi(t)}' in strings is not valid ECMAScript; consider escaping`)}function qi(t){const e={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(e[t])return e[t];if(t<" "){const n=t.charCodeAt(0).toString(16);return"\\x"+("00"+n).substring(n.length)}return t}function ks(t){const e=new SyntaxError(t);return e.lineNumber=Mn,e.columnNumber=rn,e}var sd=function(e,n,r){const s=[];let i="",m,v,F="",T;if(n!=null&&typeof n=="object"&&!Array.isArray(n)&&(r=n.space,T=n.quote,n=n.replacer),typeof n=="function")v=n;else if(Array.isArray(n)){m=[];for(const N of n){let Y;typeof N=="string"?Y=N:(typeof N=="number"||N instanceof String||N instanceof Number)&&(Y=String(N)),Y!==void 0&&m.indexOf(Y)<0&&m.push(Y)}}return r instanceof Number?r=Number(r):r instanceof String&&(r=String(r)),typeof r=="number"?r>0&&(r=Math.min(10,Math.floor(r)),F="          ".substr(0,r)):typeof r=="string"&&(F=r.substr(0,10)),R("",{"":e});function R(N,Y){let K=Y[N];switch(K!=null&&(typeof K.toJSON5=="function"?K=K.toJSON5(N):typeof K.toJSON=="function"&&(K=K.toJSON(N))),v&&(K=v.call(Y,N,K)),K instanceof Number?K=Number(K):K instanceof String?K=String(K):K instanceof Boolean&&(K=K.valueOf()),K){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof K=="string")return W(K);if(typeof K=="number")return String(K);if(typeof K=="object")return Array.isArray(K)?se(K):ie(K)}function W(N){const Y={"'":.1,'"':.2},K={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let ne="";for(let me=0;me<N.length;me++){const ve=N[me];switch(ve){case"'":case'"':Y[ve]++,ne+=ve;continue;case"\0":if(rt.isDigit(N[me+1])){ne+="\\x00";continue}}if(K[ve]){ne+=K[ve];continue}if(ve<" "){let ue=ve.charCodeAt(0).toString(16);ne+="\\x"+("00"+ue).substring(ue.length);continue}ne+=ve}const he=T||Object.keys(Y).reduce((me,ve)=>Y[me]<Y[ve]?me:ve);return ne=ne.replace(new RegExp(he,"g"),K[he]),he+ne+he}function ie(N){if(s.indexOf(N)>=0)throw TypeError("Converting circular structure to JSON5");s.push(N);let Y=i;i=i+F;let K=m||Object.keys(N),ne=[];for(const me of K){const ve=R(me,N);if(ve!==void 0){let ue=te(me)+":";F!==""&&(ue+=" "),ue+=ve,ne.push(ue)}}let he;if(ne.length===0)he="{}";else{let me;if(F==="")me=ne.join(","),he="{"+me+"}";else{let ve=`,
`+i;me=ne.join(ve),he=`{
`+i+me+`,
`+Y+"}"}}return s.pop(),i=Y,he}function te(N){if(N.length===0)return W(N);const Y=String.fromCodePoint(N.codePointAt(0));if(!rt.isIdStartChar(Y))return W(N);for(let K=Y.length;K<N.length;K++)if(!rt.isIdContinueChar(String.fromCodePoint(N.codePointAt(K))))return W(N);return N}function se(N){if(s.indexOf(N)>=0)throw TypeError("Converting circular structure to JSON5");s.push(N);let Y=i;i=i+F;let K=[];for(let he=0;he<N.length;he++){const me=R(String(he),N);K.push(me!==void 0?me:"null")}let ne;if(K.length===0)ne="[]";else if(F==="")ne="["+K.join(",")+"]";else{let he=`,
`+i,me=K.join(he);ne=`[
`+i+me+`,
`+Y+"]"}return s.pop(),i=Y,ne}};const ad={parse:Qf,stringify:sd};var Vi=ad;const ud=({reviver:t}={})=>e=>Vi.parse(e,t),id=({replacer:t,space:e}={})=>n=>Vi.stringify(n,t,e),od=t=>Rt(ud(t),id(t)),Li=t=>btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),Zi=t=>atob(t.replace(/-/g,"+").replace(/_/g,"/"));Rt(Li,Zi);const cd=Rt(Zi,Li),ld=Rt(t=>Uf(t)??void 0,t=>t??null),si=Rt.compose(ld,Rt.maybe(cd));function fd(t,e){const n=K0(),r=$t(()=>{const i=window.location.origin,m=window.location.pathname,v=e.inv(t.value);return i+m+"#"+n.path+"?"+ef(v)}),{copy:s}=Q0({source:r});return Ci(()=>n.query,i=>{const m=e(i);m&&(t.value=Hf(t.value,m))},{immediate:!0}),{copy:s,source:r}}const lp=pn({__name:"ShareLinkButton",props:{modelValue:{}},emits:["update:modelValue"],setup(t,{emit:e}){const s=tf(t,"modelValue",e),i=Rt.maybe(od()),{copy:m}=fd(s,Rt(({state:v})=>i(si(v)),v=>({state:si.inv(i.inv(v))})));return(v,F)=>(Yn(),Xn("button",{class:"rounded-lg p-2",type:"button",onClick:F[0]||(F[0]=T=>Gn(m)())},[va(Gn(Tf),{class:"w-5 h-5"})]))}});function dd(t,e){return Yn(),Xn("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[Na("path",{"fill-rule":"evenodd",d:"M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z","clip-rule":"evenodd"})])}function hd(t,e){return Yn(),Xn("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[Na("path",{d:"M12 2.25a.75.75 0 0 1 .75.75v2.25a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75ZM7.5 12a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM18.894 6.166a.75.75 0 0 0-1.06-1.06l-1.591 1.59a.75.75 0 1 0 1.06 1.061l1.591-1.59ZM21.75 12a.75.75 0 0 1-.75.75h-2.25a.75.75 0 0 1 0-1.5H21a.75.75 0 0 1 .75.75ZM17.834 18.894a.75.75 0 0 0 1.06-1.06l-1.59-1.591a.75.75 0 1 0-1.061 1.06l1.59 1.591ZM12 18a.75.75 0 0 1 .75.75V21a.75.75 0 0 1-1.5 0v-2.25A.75.75 0 0 1 12 18ZM7.758 17.303a.75.75 0 0 0-1.061-1.06l-1.591 1.59a.75.75 0 0 0 1.06 1.061l1.591-1.59ZM6 12a.75.75 0 0 1-.75.75H3a.75.75 0 0 1 0-1.5h2.25A.75.75 0 0 1 6 12ZM6.697 7.757a.75.75 0 0 0 1.06-1.06l-1.59-1.591a.75.75 0 0 0-1.061 1.06l1.59 1.591Z"})])}const fp=pn({__name:"ToggleDarkButton",setup(t){const e=nf(),n=rf(e);return(r,s)=>(Yn(),Xn("button",{class:"rounded-lg p-2",type:"button",onClick:s[0]||(s[0]=i=>Gn(n)())},[va(Gn(dd),{class:Ju(["w-5 h-5",[Gn(e)?"hidden":"visible"]])},null,8,["class"]),va(Gn(hd),{class:Ju(["w-5 h-5",[Gn(e)?"visible":"hidden"]])},null,8,["class"])]))}});async function pd(t,e,n={},r={}){let s=null;const i=te=>{let se,N,Y;return te.devicePixelContentBoxSize?(se=te.devicePixelContentBoxSize[0].inlineSize,N=te.devicePixelContentBoxSize[0].blockSize,Y=1):(se=te.contentRect.width,N=te.contentRect.height,Y=window.devicePixelRatio),[Math.round(se*Y),Math.round(N*Y)]},m=(te,se)=>{const[N,Y]=se,K=te.width!==N||te.height!==Y;return K&&(te.width=N,te.height=Y),K},{pause:v,resume:F}=sf(te=>{var se;if(s){if(r.autoResize){const N=t.value;m(N,s.display)}(se=e.onRender)==null||se.call(e,{...s,...te})}},{immediate:!1});af(t,te=>{var se;s&&(s.display=i(te[0]),(se=e.onResize)==null||se.call(e,{...s,entries:te}))});for(const[te,se]of Object.entries(n))uf(t,te,se);if(xr(()=>{var te;W(),s&&((te=e.onCreate)==null||te.call(e,s),F())}),of(()=>{var te;s&&(v(),(te=e.onDelete)==null||te.call(e,s)),ie()}),!navigator.gpu)return console.log("WebGPU not supported."),!1;const T=await navigator.gpu.requestAdapter();if(!T)return console.log("Invalid adapter."),!1;const R=await T.requestDevice();if(!R)return console.log("Invalid device."),!1;const W=()=>{console.log("useWebGpu::initialize");const te=t.value;if(!te){console.log("Invalid canvas.");return}const se=te.getContext("webgpu");if(!se){console.log("Invalid context.");return}const N=navigator.gpu.getPreferredCanvasFormat(),{alphaMode:Y}=r;se.configure({device:R,format:N,alphaMode:Y});const{width:K,height:ne}=te.getBoundingClientRect();s={adapter:T,device:R,context:se,format:N,display:[K,ne]}},ie=()=>{console.log("useWebGpu::finalize"),s=null};return!0}const md=["width","height"],gd={key:1,class:"flex items-center justify-center"},dp=pn({__name:"WebGpuCanvas",props:{renderer:{},width:{default:1920},height:{default:1080},options:{default:()=>({})},listeners:{default:()=>({})}},async setup(t){let e,n;const r=t,s=Xt(),i=Xt(!0);return i.value=([e,n]=cf(()=>pd(s,r.renderer,r.listeners,r.options)),e=await e,n(),e),(m,v)=>i.value?(Yn(),Xn("canvas",{key:0,ref_key:"canvasRef",ref:s,class:"cursor-default focus:outline-none focus:ring focus:ring-inset focus:ring-border-hover",width:m.width,height:m.height,tabindex:"1"},null,8,md)):(Yn(),Xn("div",gd,"WebGPU not supported."))}});var _d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ri={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(t,e){(function(n,r){t.exports=r()})(_d,function(){for(var n=function(u,c,p){return c===void 0&&(c=0),p===void 0&&(p=1),u<c?c:u>p?p:u},r=n,s=function(u){u._clipped=!1,u._unclipped=u.slice(0);for(var c=0;c<=3;c++)c<3?((u[c]<0||u[c]>255)&&(u._clipped=!0),u[c]=r(u[c],0,255)):c===3&&(u[c]=r(u[c],0,1));return u},i={},m=0,v=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];m<v.length;m+=1){var F=v[m];i["[object "+F+"]"]=F.toLowerCase()}var T=function(u){return i[Object.prototype.toString.call(u)]||"object"},R=T,W=function(u,c){return c===void 0&&(c=null),u.length>=3?Array.prototype.slice.call(u):R(u[0])=="object"&&c?c.split("").filter(function(p){return u[0][p]!==void 0}).map(function(p){return u[0][p]}):u[0]},ie=T,te=function(u){if(u.length<2)return null;var c=u.length-1;return ie(u[c])=="string"?u[c].toLowerCase():null},se=Math.PI,N={clip_rgb:s,limit:n,type:T,unpack:W,last:te,PI:se,TWOPI:se*2,PITHIRD:se/3,DEG2RAD:se/180,RAD2DEG:180/se},Y={format:{},autodetect:[]},K=N.last,ne=N.clip_rgb,he=N.type,me=Y,ve=function(){for(var c=[],p=arguments.length;p--;)c[p]=arguments[p];var b=this;if(he(c[0])==="object"&&c[0].constructor&&c[0].constructor===this.constructor)return c[0];var C=K(c),I=!1;if(!C){I=!0,me.sorted||(me.autodetect=me.autodetect.sort(function(X,re){return re.p-X.p}),me.sorted=!0);for(var E=0,O=me.autodetect;E<O.length;E+=1){var q=O[E];if(C=q.test.apply(q,c),C)break}}if(me.format[C]){var G=me.format[C].apply(null,I?c:c.slice(0,-1));b._rgb=ne(G)}else throw new Error("unknown format: "+c);b._rgb.length===3&&b._rgb.push(1)};ve.prototype.toString=function(){return he(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var ue=ve,Ke=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];return new(Function.prototype.bind.apply(Ke.Color,[null].concat(u)))};Ke.Color=ue,Ke.version="2.4.2";var Ie=Ke,St=N.unpack,st=Math.max,qt=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];var p=St(u,"rgb"),b=p[0],C=p[1],I=p[2];b=b/255,C=C/255,I=I/255;var E=1-st(b,st(C,I)),O=E<1?1/(1-E):0,q=(1-b-E)*O,G=(1-C-E)*O,X=(1-I-E)*O;return[q,G,X,E]},Me=qt,Re=N.unpack,Ae=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];u=Re(u,"cmyk");var p=u[0],b=u[1],C=u[2],I=u[3],E=u.length>4?u[4]:1;return I===1?[0,0,0,E]:[p>=1?0:255*(1-p)*(1-I),b>=1?0:255*(1-b)*(1-I),C>=1?0:255*(1-C)*(1-I),E]},jt=Ae,Dt=Ie,Vt=ue,ct=Y,Ut=N.unpack,We=N.type,Gt=Me;Vt.prototype.cmyk=function(){return Gt(this._rgb)},Dt.cmyk=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];return new(Function.prototype.bind.apply(Vt,[null].concat(u,["cmyk"])))},ct.format.cmyk=jt,ct.autodetect.push({p:2,test:function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];if(u=Ut(u,"cmyk"),We(u)==="array"&&u.length===4)return"cmyk"}});var Ct=N.unpack,Wt=N.last,lt=function(u){return Math.round(u*100)/100},Lt=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];var p=Ct(u,"hsla"),b=Wt(u)||"lsa";return p[0]=lt(p[0]||0),p[1]=lt(p[1]*100)+"%",p[2]=lt(p[2]*100)+"%",b==="hsla"||p.length>3&&p[3]<1?(p[3]=p.length>3?p[3]:1,b="hsla"):p.length=3,b+"("+p.join(",")+")"},Tt=Lt,d=N.unpack,x=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];u=d(u,"rgba");var p=u[0],b=u[1],C=u[2];p/=255,b/=255,C/=255;var I=Math.min(p,b,C),E=Math.max(p,b,C),O=(E+I)/2,q,G;return E===I?(q=0,G=Number.NaN):q=O<.5?(E-I)/(E+I):(E-I)/(2-E-I),p==E?G=(b-C)/(E-I):b==E?G=2+(C-p)/(E-I):C==E&&(G=4+(p-b)/(E-I)),G*=60,G<0&&(G+=360),u.length>3&&u[3]!==void 0?[G,q,O,u[3]]:[G,q,O]},l=x,h=N.unpack,k=N.last,A=Tt,L=l,a=Math.round,g=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];var p=h(u,"rgba"),b=k(u)||"rgb";return b.substr(0,3)=="hsl"?A(L(p),b):(p[0]=a(p[0]),p[1]=a(p[1]),p[2]=a(p[2]),(b==="rgba"||p.length>3&&p[3]<1)&&(p[3]=p.length>3?p[3]:1,b="rgba"),b+"("+p.slice(0,b==="rgb"?3:4).join(",")+")")},o=g,f=N.unpack,D=Math.round,S=function(){for(var u,c=[],p=arguments.length;p--;)c[p]=arguments[p];c=f(c,"hsl");var b=c[0],C=c[1],I=c[2],E,O,q;if(C===0)E=O=q=I*255;else{var G=[0,0,0],X=[0,0,0],re=I<.5?I*(1+C):I+C-I*C,J=2*I-re,le=b/360;G[0]=le+1/3,G[1]=le,G[2]=le-1/3;for(var ce=0;ce<3;ce++)G[ce]<0&&(G[ce]+=1),G[ce]>1&&(G[ce]-=1),6*G[ce]<1?X[ce]=J+(re-J)*6*G[ce]:2*G[ce]<1?X[ce]=re:3*G[ce]<2?X[ce]=J+(re-J)*(2/3-G[ce])*6:X[ce]=J;u=[D(X[0]*255),D(X[1]*255),D(X[2]*255)],E=u[0],O=u[1],q=u[2]}return c.length>3?[E,O,q,c[3]]:[E,O,q,1]},Z=S,_=Z,w=Y,B=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,M=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,V=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,j=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,U=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,de=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,ye=Math.round,fe=function(u){u=u.toLowerCase().trim();var c;if(w.format.named)try{return w.format.named(u)}catch{}if(c=u.match(B)){for(var p=c.slice(1,4),b=0;b<3;b++)p[b]=+p[b];return p[3]=1,p}if(c=u.match(M)){for(var C=c.slice(1,5),I=0;I<4;I++)C[I]=+C[I];return C}if(c=u.match(V)){for(var E=c.slice(1,4),O=0;O<3;O++)E[O]=ye(E[O]*2.55);return E[3]=1,E}if(c=u.match(j)){for(var q=c.slice(1,5),G=0;G<3;G++)q[G]=ye(q[G]*2.55);return q[3]=+q[3],q}if(c=u.match(U)){var X=c.slice(1,4);X[1]*=.01,X[2]*=.01;var re=_(X);return re[3]=1,re}if(c=u.match(de)){var J=c.slice(1,4);J[1]*=.01,J[2]*=.01;var le=_(J);return le[3]=+c[4],le}};fe.test=function(u){return B.test(u)||M.test(u)||V.test(u)||j.test(u)||U.test(u)||de.test(u)};var pe=fe,xe=Ie,Be=ue,He=Y,tt=N.type,nt=o,at=pe;Be.prototype.css=function(u){return nt(this._rgb,u)},xe.css=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];return new(Function.prototype.bind.apply(Be,[null].concat(u,["css"])))},He.format.css=at,He.autodetect.push({p:5,test:function(u){for(var c=[],p=arguments.length-1;p-- >0;)c[p]=arguments[p+1];if(!c.length&&tt(u)==="string"&&at.test(u))return"css"}});var ot=ue,ft=Ie,dt=Y,ht=N.unpack;dt.format.gl=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];var p=ht(u,"rgba");return p[0]*=255,p[1]*=255,p[2]*=255,p},ft.gl=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];return new(Function.prototype.bind.apply(ot,[null].concat(u,["gl"])))},ot.prototype.gl=function(){var u=this._rgb;return[u[0]/255,u[1]/255,u[2]/255,u[3]]};var pt=N.unpack,wt=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];var p=pt(u,"rgb"),b=p[0],C=p[1],I=p[2],E=Math.min(b,C,I),O=Math.max(b,C,I),q=O-E,G=q*100/255,X=E/(255-q)*100,re;return q===0?re=Number.NaN:(b===O&&(re=(C-I)/q),C===O&&(re=2+(I-b)/q),I===O&&(re=4+(b-C)/q),re*=60,re<0&&(re+=360)),[re,G,X]},bt=wt,kt=N.unpack,xt=Math.floor,Mt=function(){for(var u,c,p,b,C,I,E=[],O=arguments.length;O--;)E[O]=arguments[O];E=kt(E,"hcg");var q=E[0],G=E[1],X=E[2],re,J,le;X=X*255;var ce=G*255;if(G===0)re=J=le=X;else{q===360&&(q=0),q>360&&(q-=360),q<0&&(q+=360),q/=60;var Se=xt(q),$e=q-Se,Pe=X*(1-G),Ze=Pe+ce*(1-$e),At=Pe+ce*$e,_t=Pe+ce;switch(Se){case 0:u=[_t,At,Pe],re=u[0],J=u[1],le=u[2];break;case 1:c=[Ze,_t,Pe],re=c[0],J=c[1],le=c[2];break;case 2:p=[Pe,_t,At],re=p[0],J=p[1],le=p[2];break;case 3:b=[Pe,Ze,_t],re=b[0],J=b[1],le=b[2];break;case 4:C=[At,Pe,_t],re=C[0],J=C[1],le=C[2];break;case 5:I=[_t,Pe,Ze],re=I[0],J=I[1],le=I[2];break}}return[re,J,le,E.length>3?E[3]:1]},Nt=Mt,It=N.unpack,er=N.type,tr=Ie,On=ue,Pn=Y,nr=bt;On.prototype.hcg=function(){return nr(this._rgb)},tr.hcg=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];return new(Function.prototype.bind.apply(On,[null].concat(u,["hcg"])))},Pn.format.hcg=Nt,Pn.autodetect.push({p:1,test:function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];if(u=It(u,"hcg"),er(u)==="array"&&u.length===3)return"hcg"}});var rr=N.unpack,sr=N.last,qn=Math.round,is=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];var p=rr(u,"rgba"),b=p[0],C=p[1],I=p[2],E=p[3],O=sr(u)||"auto";E===void 0&&(E=1),O==="auto"&&(O=E<1?"rgba":"rgb"),b=qn(b),C=qn(C),I=qn(I);var q=b<<16|C<<8|I,G="000000"+q.toString(16);G=G.substr(G.length-6);var X="0"+qn(E*255).toString(16);switch(X=X.substr(X.length-2),O.toLowerCase()){case"rgba":return"#"+G+X;case"argb":return"#"+X+G;default:return"#"+G}},Tr=is,os=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,mt=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Do=function(u){if(u.match(os)){(u.length===4||u.length===7)&&(u=u.substr(1)),u.length===3&&(u=u.split(""),u=u[0]+u[0]+u[1]+u[1]+u[2]+u[2]);var c=parseInt(u,16),p=c>>16,b=c>>8&255,C=c&255;return[p,b,C,1]}if(u.match(mt)){(u.length===5||u.length===9)&&(u=u.substr(1)),u.length===4&&(u=u.split(""),u=u[0]+u[0]+u[1]+u[1]+u[2]+u[2]+u[3]+u[3]);var I=parseInt(u,16),E=I>>24&255,O=I>>16&255,q=I>>8&255,G=Math.round((I&255)/255*100)/100;return[E,O,q,G]}throw new Error("unknown hex color: "+u)},La=Do,wo=Ie,Za=ue,bo=N.type,Ra=Y,ko=Tr;Za.prototype.hex=function(u){return ko(this._rgb,u)},wo.hex=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];return new(Function.prototype.bind.apply(Za,[null].concat(u,["hex"])))},Ra.format.hex=La,Ra.autodetect.push({p:4,test:function(u){for(var c=[],p=arguments.length-1;p-- >0;)c[p]=arguments[p+1];if(!c.length&&bo(u)==="string"&&[3,4,5,6,7,8,9].indexOf(u.length)>=0)return"hex"}});var xo=N.unpack,ja=N.TWOPI,Ao=Math.min,Eo=Math.sqrt,Fo=Math.acos,Co=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];var p=xo(u,"rgb"),b=p[0],C=p[1],I=p[2];b/=255,C/=255,I/=255;var E,O=Ao(b,C,I),q=(b+C+I)/3,G=q>0?1-O/q:0;return G===0?E=NaN:(E=(b-C+(b-I))/2,E/=Eo((b-C)*(b-C)+(b-I)*(C-I)),E=Fo(E),I>C&&(E=ja-E),E/=ja),[E*360,G,q]},Bo=Co,So=N.unpack,zs=N.limit,ar=N.TWOPI,Os=N.PITHIRD,ur=Math.cos,To=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];u=So(u,"hsi");var p=u[0],b=u[1],C=u[2],I,E,O;return isNaN(p)&&(p=0),isNaN(b)&&(b=0),p>360&&(p-=360),p<0&&(p+=360),p/=360,p<1/3?(O=(1-b)/3,I=(1+b*ur(ar*p)/ur(Os-ar*p))/3,E=1-(O+I)):p<2/3?(p-=1/3,I=(1-b)/3,E=(1+b*ur(ar*p)/ur(Os-ar*p))/3,O=1-(I+E)):(p-=2/3,E=(1-b)/3,O=(1+b*ur(ar*p)/ur(Os-ar*p))/3,I=1-(E+O)),I=zs(C*I*3),E=zs(C*E*3),O=zs(C*O*3),[I*255,E*255,O*255,u.length>3?u[3]:1]},Mo=To,No=N.unpack,Io=N.type,$o=Ie,Ua=ue,Ga=Y,zo=Bo;Ua.prototype.hsi=function(){return zo(this._rgb)},$o.hsi=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];return new(Function.prototype.bind.apply(Ua,[null].concat(u,["hsi"])))},Ga.format.hsi=Mo,Ga.autodetect.push({p:2,test:function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];if(u=No(u,"hsi"),Io(u)==="array"&&u.length===3)return"hsi"}});var Oo=N.unpack,Po=N.type,qo=Ie,Wa=ue,Ha=Y,Vo=l;Wa.prototype.hsl=function(){return Vo(this._rgb)},qo.hsl=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];return new(Function.prototype.bind.apply(Wa,[null].concat(u,["hsl"])))},Ha.format.hsl=Z,Ha.autodetect.push({p:2,test:function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];if(u=Oo(u,"hsl"),Po(u)==="array"&&u.length===3)return"hsl"}});var Lo=N.unpack,Zo=Math.min,Ro=Math.max,jo=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];u=Lo(u,"rgb");var p=u[0],b=u[1],C=u[2],I=Zo(p,b,C),E=Ro(p,b,C),O=E-I,q,G,X;return X=E/255,E===0?(q=Number.NaN,G=0):(G=O/E,p===E&&(q=(b-C)/O),b===E&&(q=2+(C-p)/O),C===E&&(q=4+(p-b)/O),q*=60,q<0&&(q+=360)),[q,G,X]},Uo=jo,Go=N.unpack,Wo=Math.floor,Ho=function(){for(var u,c,p,b,C,I,E=[],O=arguments.length;O--;)E[O]=arguments[O];E=Go(E,"hsv");var q=E[0],G=E[1],X=E[2],re,J,le;if(X*=255,G===0)re=J=le=X;else{q===360&&(q=0),q>360&&(q-=360),q<0&&(q+=360),q/=60;var ce=Wo(q),Se=q-ce,$e=X*(1-G),Pe=X*(1-G*Se),Ze=X*(1-G*(1-Se));switch(ce){case 0:u=[X,Ze,$e],re=u[0],J=u[1],le=u[2];break;case 1:c=[Pe,X,$e],re=c[0],J=c[1],le=c[2];break;case 2:p=[$e,X,Ze],re=p[0],J=p[1],le=p[2];break;case 3:b=[$e,Pe,X],re=b[0],J=b[1],le=b[2];break;case 4:C=[Ze,$e,X],re=C[0],J=C[1],le=C[2];break;case 5:I=[X,$e,Pe],re=I[0],J=I[1],le=I[2];break}}return[re,J,le,E.length>3?E[3]:1]},Yo=Ho,Xo=N.unpack,Jo=N.type,Qo=Ie,Ya=ue,Xa=Y,Ko=Uo;Ya.prototype.hsv=function(){return Ko(this._rgb)},Qo.hsv=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];return new(Function.prototype.bind.apply(Ya,[null].concat(u,["hsv"])))},Xa.format.hsv=Yo,Xa.autodetect.push({p:2,test:function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];if(u=Xo(u,"hsv"),Jo(u)==="array"&&u.length===3)return"hsv"}});var cs={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ir=cs,ec=N.unpack,Ja=Math.pow,tc=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];var p=ec(u,"rgb"),b=p[0],C=p[1],I=p[2],E=nc(b,C,I),O=E[0],q=E[1],G=E[2],X=116*q-16;return[X<0?0:X,500*(O-q),200*(q-G)]},Ps=function(u){return(u/=255)<=.04045?u/12.92:Ja((u+.055)/1.055,2.4)},qs=function(u){return u>ir.t3?Ja(u,1/3):u/ir.t2+ir.t0},nc=function(u,c,p){u=Ps(u),c=Ps(c),p=Ps(p);var b=qs((.4124564*u+.3575761*c+.1804375*p)/ir.Xn),C=qs((.2126729*u+.7151522*c+.072175*p)/ir.Yn),I=qs((.0193339*u+.119192*c+.9503041*p)/ir.Zn);return[b,C,I]},Qa=tc,or=cs,rc=N.unpack,sc=Math.pow,ac=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];u=rc(u,"lab");var p=u[0],b=u[1],C=u[2],I,E,O,q,G,X;return E=(p+16)/116,I=isNaN(b)?E:E+b/500,O=isNaN(C)?E:E-C/200,E=or.Yn*Ls(E),I=or.Xn*Ls(I),O=or.Zn*Ls(O),q=Vs(3.2404542*I-1.5371385*E-.4985314*O),G=Vs(-.969266*I+1.8760108*E+.041556*O),X=Vs(.0556434*I-.2040259*E+1.0572252*O),[q,G,X,u.length>3?u[3]:1]},Vs=function(u){return 255*(u<=.00304?12.92*u:1.055*sc(u,1/2.4)-.055)},Ls=function(u){return u>or.t1?u*u*u:or.t2*(u-or.t0)},Ka=ac,uc=N.unpack,ic=N.type,oc=Ie,eu=ue,tu=Y,cc=Qa;eu.prototype.lab=function(){return cc(this._rgb)},oc.lab=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];return new(Function.prototype.bind.apply(eu,[null].concat(u,["lab"])))},tu.format.lab=Ka,tu.autodetect.push({p:2,test:function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];if(u=uc(u,"lab"),ic(u)==="array"&&u.length===3)return"lab"}});var lc=N.unpack,fc=N.RAD2DEG,dc=Math.sqrt,hc=Math.atan2,pc=Math.round,mc=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];var p=lc(u,"lab"),b=p[0],C=p[1],I=p[2],E=dc(C*C+I*I),O=(hc(I,C)*fc+360)%360;return pc(E*1e4)===0&&(O=Number.NaN),[b,E,O]},nu=mc,gc=N.unpack,_c=Qa,vc=nu,yc=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];var p=gc(u,"rgb"),b=p[0],C=p[1],I=p[2],E=_c(b,C,I),O=E[0],q=E[1],G=E[2];return vc(O,q,G)},Dc=yc,wc=N.unpack,bc=N.DEG2RAD,kc=Math.sin,xc=Math.cos,Ac=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];var p=wc(u,"lch"),b=p[0],C=p[1],I=p[2];return isNaN(I)&&(I=0),I=I*bc,[b,xc(I)*C,kc(I)*C]},ru=Ac,Ec=N.unpack,Fc=ru,Cc=Ka,Bc=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];u=Ec(u,"lch");var p=u[0],b=u[1],C=u[2],I=Fc(p,b,C),E=I[0],O=I[1],q=I[2],G=Cc(E,O,q),X=G[0],re=G[1],J=G[2];return[X,re,J,u.length>3?u[3]:1]},su=Bc,Sc=N.unpack,Tc=su,Mc=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];var p=Sc(u,"hcl").reverse();return Tc.apply(void 0,p)},Nc=Mc,Ic=N.unpack,$c=N.type,au=Ie,ls=ue,Zs=Y,uu=Dc;ls.prototype.lch=function(){return uu(this._rgb)},ls.prototype.hcl=function(){return uu(this._rgb).reverse()},au.lch=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];return new(Function.prototype.bind.apply(ls,[null].concat(u,["lch"])))},au.hcl=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];return new(Function.prototype.bind.apply(ls,[null].concat(u,["hcl"])))},Zs.format.lch=su,Zs.format.hcl=Nc,["lch","hcl"].forEach(function(u){return Zs.autodetect.push({p:2,test:function(){for(var c=[],p=arguments.length;p--;)c[p]=arguments[p];if(c=Ic(c,u),$c(c)==="array"&&c.length===3)return u}})});var zc={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},iu=zc,Oc=ue,ou=Y,Pc=N.type,Mr=iu,qc=La,Vc=Tr;Oc.prototype.name=function(){for(var u=Vc(this._rgb,"rgb"),c=0,p=Object.keys(Mr);c<p.length;c+=1){var b=p[c];if(Mr[b]===u)return b.toLowerCase()}return u},ou.format.named=function(u){if(u=u.toLowerCase(),Mr[u])return qc(Mr[u]);throw new Error("unknown color name: "+u)},ou.autodetect.push({p:5,test:function(u){for(var c=[],p=arguments.length-1;p-- >0;)c[p]=arguments[p+1];if(!c.length&&Pc(u)==="string"&&Mr[u.toLowerCase()])return"named"}});var Lc=N.unpack,Zc=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];var p=Lc(u,"rgb"),b=p[0],C=p[1],I=p[2];return(b<<16)+(C<<8)+I},Rc=Zc,jc=N.type,Uc=function(u){if(jc(u)=="number"&&u>=0&&u<=16777215){var c=u>>16,p=u>>8&255,b=u&255;return[c,p,b,1]}throw new Error("unknown num color: "+u)},Gc=Uc,Wc=Ie,cu=ue,lu=Y,Hc=N.type,Yc=Rc;cu.prototype.num=function(){return Yc(this._rgb)},Wc.num=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];return new(Function.prototype.bind.apply(cu,[null].concat(u,["num"])))},lu.format.num=Gc,lu.autodetect.push({p:5,test:function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];if(u.length===1&&Hc(u[0])==="number"&&u[0]>=0&&u[0]<=16777215)return"num"}});var Xc=Ie,Rs=ue,fu=Y,du=N.unpack,hu=N.type,pu=Math.round;Rs.prototype.rgb=function(u){return u===void 0&&(u=!0),u===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(pu)},Rs.prototype.rgba=function(u){return u===void 0&&(u=!0),this._rgb.slice(0,4).map(function(c,p){return p<3?u===!1?c:pu(c):c})},Xc.rgb=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];return new(Function.prototype.bind.apply(Rs,[null].concat(u,["rgb"])))},fu.format.rgb=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];var p=du(u,"rgba");return p[3]===void 0&&(p[3]=1),p},fu.autodetect.push({p:3,test:function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];if(u=du(u,"rgba"),hu(u)==="array"&&(u.length===3||u.length===4&&hu(u[3])=="number"&&u[3]>=0&&u[3]<=1))return"rgb"}});var fs=Math.log,Jc=function(u){var c=u/100,p,b,C;return c<66?(p=255,b=c<6?0:-155.25485562709179-.44596950469579133*(b=c-2)+104.49216199393888*fs(b),C=c<20?0:-254.76935184120902+.8274096064007395*(C=c-10)+115.67994401066147*fs(C)):(p=351.97690566805693+.114206453784165*(p=c-55)-40.25366309332127*fs(p),b=325.4494125711974+.07943456536662342*(b=c-50)-28.0852963507957*fs(b),C=255),[p,b,C,1]},mu=Jc,Qc=mu,Kc=N.unpack,el=Math.round,tl=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];for(var p=Kc(u,"rgb"),b=p[0],C=p[2],I=1e3,E=4e4,O=.4,q;E-I>O;){q=(E+I)*.5;var G=Qc(q);G[2]/G[0]>=C/b?E=q:I=q}return el(q)},nl=tl,js=Ie,ds=ue,Us=Y,rl=nl;ds.prototype.temp=ds.prototype.kelvin=ds.prototype.temperature=function(){return rl(this._rgb)},js.temp=js.kelvin=js.temperature=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];return new(Function.prototype.bind.apply(ds,[null].concat(u,["temp"])))},Us.format.temp=Us.format.kelvin=Us.format.temperature=mu;var sl=N.unpack,Gs=Math.cbrt,al=Math.pow,ul=Math.sign,il=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];var p=sl(u,"rgb"),b=p[0],C=p[1],I=p[2],E=[Ws(b/255),Ws(C/255),Ws(I/255)],O=E[0],q=E[1],G=E[2],X=Gs(.4122214708*O+.5363325363*q+.0514459929*G),re=Gs(.2119034982*O+.6806995451*q+.1073969566*G),J=Gs(.0883024619*O+.2817188376*q+.6299787005*G);return[.2104542553*X+.793617785*re-.0040720468*J,1.9779984951*X-2.428592205*re+.4505937099*J,.0259040371*X+.7827717662*re-.808675766*J]},gu=il;function Ws(u){var c=Math.abs(u);return c<.04045?u/12.92:(ul(u)||1)*al((c+.055)/1.055,2.4)}var ol=N.unpack,hs=Math.pow,cl=Math.sign,ll=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];u=ol(u,"lab");var p=u[0],b=u[1],C=u[2],I=hs(p+.3963377774*b+.2158037573*C,3),E=hs(p-.1055613458*b-.0638541728*C,3),O=hs(p-.0894841775*b-1.291485548*C,3);return[255*Hs(4.0767416621*I-3.3077115913*E+.2309699292*O),255*Hs(-1.2684380046*I+2.6097574011*E-.3413193965*O),255*Hs(-.0041960863*I-.7034186147*E+1.707614701*O),u.length>3?u[3]:1]},_u=ll;function Hs(u){var c=Math.abs(u);return c>.0031308?(cl(u)||1)*(1.055*hs(c,1/2.4)-.055):u*12.92}var fl=N.unpack,dl=N.type,hl=Ie,vu=ue,yu=Y,pl=gu;vu.prototype.oklab=function(){return pl(this._rgb)},hl.oklab=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];return new(Function.prototype.bind.apply(vu,[null].concat(u,["oklab"])))},yu.format.oklab=_u,yu.autodetect.push({p:3,test:function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];if(u=fl(u,"oklab"),dl(u)==="array"&&u.length===3)return"oklab"}});var ml=N.unpack,gl=gu,_l=nu,vl=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];var p=ml(u,"rgb"),b=p[0],C=p[1],I=p[2],E=gl(b,C,I),O=E[0],q=E[1],G=E[2];return _l(O,q,G)},yl=vl,Dl=N.unpack,wl=ru,bl=_u,kl=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];u=Dl(u,"lch");var p=u[0],b=u[1],C=u[2],I=wl(p,b,C),E=I[0],O=I[1],q=I[2],G=bl(E,O,q),X=G[0],re=G[1],J=G[2];return[X,re,J,u.length>3?u[3]:1]},xl=kl,Al=N.unpack,El=N.type,Fl=Ie,Du=ue,wu=Y,Cl=yl;Du.prototype.oklch=function(){return Cl(this._rgb)},Fl.oklch=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];return new(Function.prototype.bind.apply(Du,[null].concat(u,["oklch"])))},wu.format.oklch=xl,wu.autodetect.push({p:3,test:function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];if(u=Al(u,"oklch"),El(u)==="array"&&u.length===3)return"oklch"}});var bu=ue,Bl=N.type;bu.prototype.alpha=function(u,c){return c===void 0&&(c=!1),u!==void 0&&Bl(u)==="number"?c?(this._rgb[3]=u,this):new bu([this._rgb[0],this._rgb[1],this._rgb[2],u],"rgb"):this._rgb[3]};var Sl=ue;Sl.prototype.clipped=function(){return this._rgb._clipped||!1};var Vn=ue,Tl=cs;Vn.prototype.darken=function(u){u===void 0&&(u=1);var c=this,p=c.lab();return p[0]-=Tl.Kn*u,new Vn(p,"lab").alpha(c.alpha(),!0)},Vn.prototype.brighten=function(u){return u===void 0&&(u=1),this.darken(-u)},Vn.prototype.darker=Vn.prototype.darken,Vn.prototype.brighter=Vn.prototype.brighten;var Ml=ue;Ml.prototype.get=function(u){var c=u.split("."),p=c[0],b=c[1],C=this[p]();if(b){var I=p.indexOf(b)-(p.substr(0,2)==="ok"?2:0);if(I>-1)return C[I];throw new Error("unknown channel "+b+" in mode "+p)}else return C};var cr=ue,Nl=N.type,Il=Math.pow,$l=1e-7,zl=20;cr.prototype.luminance=function(u){if(u!==void 0&&Nl(u)==="number"){if(u===0)return new cr([0,0,0,this._rgb[3]],"rgb");if(u===1)return new cr([255,255,255,this._rgb[3]],"rgb");var c=this.luminance(),p="rgb",b=zl,C=function(E,O){var q=E.interpolate(O,.5,p),G=q.luminance();return Math.abs(u-G)<$l||!b--?q:G>u?C(E,q):C(q,O)},I=(c>u?C(new cr([0,0,0]),this):C(this,new cr([255,255,255]))).rgb();return new cr(I.concat([this._rgb[3]]))}return Ol.apply(void 0,this._rgb.slice(0,3))};var Ol=function(u,c,p){return u=Ys(u),c=Ys(c),p=Ys(p),.2126*u+.7152*c+.0722*p},Ys=function(u){return u/=255,u<=.03928?u/12.92:Il((u+.055)/1.055,2.4)},Ht={},ku=ue,xu=N.type,ps=Ht,Au=function(u,c,p){p===void 0&&(p=.5);for(var b=[],C=arguments.length-3;C-- >0;)b[C]=arguments[C+3];var I=b[0]||"lrgb";if(!ps[I]&&!b.length&&(I=Object.keys(ps)[0]),!ps[I])throw new Error("interpolation mode "+I+" is not defined");return xu(u)!=="object"&&(u=new ku(u)),xu(c)!=="object"&&(c=new ku(c)),ps[I](u,c,p).alpha(u.alpha()+p*(c.alpha()-u.alpha()))},Eu=ue,Pl=Au;Eu.prototype.mix=Eu.prototype.interpolate=function(u,c){c===void 0&&(c=.5);for(var p=[],b=arguments.length-2;b-- >0;)p[b]=arguments[b+2];return Pl.apply(void 0,[this,u,c].concat(p))};var Fu=ue;Fu.prototype.premultiply=function(u){u===void 0&&(u=!1);var c=this._rgb,p=c[3];return u?(this._rgb=[c[0]*p,c[1]*p,c[2]*p,p],this):new Fu([c[0]*p,c[1]*p,c[2]*p,p],"rgb")};var Xs=ue,ql=cs;Xs.prototype.saturate=function(u){u===void 0&&(u=1);var c=this,p=c.lch();return p[1]+=ql.Kn*u,p[1]<0&&(p[1]=0),new Xs(p,"lch").alpha(c.alpha(),!0)},Xs.prototype.desaturate=function(u){return u===void 0&&(u=1),this.saturate(-u)};var Cu=ue,Bu=N.type;Cu.prototype.set=function(u,c,p){p===void 0&&(p=!1);var b=u.split("."),C=b[0],I=b[1],E=this[C]();if(I){var O=C.indexOf(I)-(C.substr(0,2)==="ok"?2:0);if(O>-1){if(Bu(c)=="string")switch(c.charAt(0)){case"+":E[O]+=+c;break;case"-":E[O]+=+c;break;case"*":E[O]*=+c.substr(1);break;case"/":E[O]/=+c.substr(1);break;default:E[O]=+c}else if(Bu(c)==="number")E[O]=c;else throw new Error("unsupported value for Color.set");var q=new Cu(E,C);return p?(this._rgb=q._rgb,this):q}throw new Error("unknown channel "+I+" in mode "+C)}else return E};var Vl=ue,Ll=function(u,c,p){var b=u._rgb,C=c._rgb;return new Vl(b[0]+p*(C[0]-b[0]),b[1]+p*(C[1]-b[1]),b[2]+p*(C[2]-b[2]),"rgb")};Ht.rgb=Ll;var Zl=ue,Js=Math.sqrt,lr=Math.pow,Rl=function(u,c,p){var b=u._rgb,C=b[0],I=b[1],E=b[2],O=c._rgb,q=O[0],G=O[1],X=O[2];return new Zl(Js(lr(C,2)*(1-p)+lr(q,2)*p),Js(lr(I,2)*(1-p)+lr(G,2)*p),Js(lr(E,2)*(1-p)+lr(X,2)*p),"rgb")};Ht.lrgb=Rl;var jl=ue,Ul=function(u,c,p){var b=u.lab(),C=c.lab();return new jl(b[0]+p*(C[0]-b[0]),b[1]+p*(C[1]-b[1]),b[2]+p*(C[2]-b[2]),"lab")};Ht.lab=Ul;var Su=ue,fr=function(u,c,p,b){var C,I,E,O;b==="hsl"?(E=u.hsl(),O=c.hsl()):b==="hsv"?(E=u.hsv(),O=c.hsv()):b==="hcg"?(E=u.hcg(),O=c.hcg()):b==="hsi"?(E=u.hsi(),O=c.hsi()):b==="lch"||b==="hcl"?(b="hcl",E=u.hcl(),O=c.hcl()):b==="oklch"&&(E=u.oklch().reverse(),O=c.oklch().reverse());var q,G,X,re,J,le;(b.substr(0,1)==="h"||b==="oklch")&&(C=E,q=C[0],X=C[1],J=C[2],I=O,G=I[0],re=I[1],le=I[2]);var ce,Se,$e,Pe;return!isNaN(q)&&!isNaN(G)?(G>q&&G-q>180?Pe=G-(q+360):G<q&&q-G>180?Pe=G+360-q:Pe=G-q,Se=q+p*Pe):isNaN(q)?isNaN(G)?Se=Number.NaN:(Se=G,(J==1||J==0)&&b!="hsv"&&(ce=re)):(Se=q,(le==1||le==0)&&b!="hsv"&&(ce=X)),ce===void 0&&(ce=X+p*(re-X)),$e=J+p*(le-J),b==="oklch"?new Su([$e,ce,Se],b):new Su([Se,ce,$e],b)},Gl=fr,Tu=function(u,c,p){return Gl(u,c,p,"lch")};Ht.lch=Tu,Ht.hcl=Tu;var Wl=ue,Hl=function(u,c,p){var b=u.num(),C=c.num();return new Wl(b+p*(C-b),"num")};Ht.num=Hl;var Yl=fr,Xl=function(u,c,p){return Yl(u,c,p,"hcg")};Ht.hcg=Xl;var Jl=fr,Ql=function(u,c,p){return Jl(u,c,p,"hsi")};Ht.hsi=Ql;var Kl=fr,e0=function(u,c,p){return Kl(u,c,p,"hsl")};Ht.hsl=e0;var t0=fr,n0=function(u,c,p){return t0(u,c,p,"hsv")};Ht.hsv=n0;var r0=ue,s0=function(u,c,p){var b=u.oklab(),C=c.oklab();return new r0(b[0]+p*(C[0]-b[0]),b[1]+p*(C[1]-b[1]),b[2]+p*(C[2]-b[2]),"oklab")};Ht.oklab=s0;var a0=fr,u0=function(u,c,p){return a0(u,c,p,"oklch")};Ht.oklch=u0;var Qs=ue,i0=N.clip_rgb,Ks=Math.pow,ea=Math.sqrt,ta=Math.PI,Mu=Math.cos,Nu=Math.sin,o0=Math.atan2,c0=function(u,c,p){c===void 0&&(c="lrgb"),p===void 0&&(p=null);var b=u.length;p||(p=Array.from(new Array(b)).map(function(){return 1}));var C=b/p.reduce(function(Se,$e){return Se+$e});if(p.forEach(function(Se,$e){p[$e]*=C}),u=u.map(function(Se){return new Qs(Se)}),c==="lrgb")return l0(u,p);for(var I=u.shift(),E=I.get(c),O=[],q=0,G=0,X=0;X<E.length;X++)if(E[X]=(E[X]||0)*p[0],O.push(isNaN(E[X])?0:p[0]),c.charAt(X)==="h"&&!isNaN(E[X])){var re=E[X]/180*ta;q+=Mu(re)*p[0],G+=Nu(re)*p[0]}var J=I.alpha()*p[0];u.forEach(function(Se,$e){var Pe=Se.get(c);J+=Se.alpha()*p[$e+1];for(var Ze=0;Ze<E.length;Ze++)if(!isNaN(Pe[Ze]))if(O[Ze]+=p[$e+1],c.charAt(Ze)==="h"){var At=Pe[Ze]/180*ta;q+=Mu(At)*p[$e+1],G+=Nu(At)*p[$e+1]}else E[Ze]+=Pe[Ze]*p[$e+1]});for(var le=0;le<E.length;le++)if(c.charAt(le)==="h"){for(var ce=o0(G/O[le],q/O[le])/ta*180;ce<0;)ce+=360;for(;ce>=360;)ce-=360;E[le]=ce}else E[le]=E[le]/O[le];return J/=b,new Qs(E,c).alpha(J>.99999?1:J,!0)},l0=function(u,c){for(var p=u.length,b=[0,0,0,0],C=0;C<u.length;C++){var I=u[C],E=c[C]/p,O=I._rgb;b[0]+=Ks(O[0],2)*E,b[1]+=Ks(O[1],2)*E,b[2]+=Ks(O[2],2)*E,b[3]+=O[3]*E}return b[0]=ea(b[0]),b[1]=ea(b[1]),b[2]=ea(b[2]),b[3]>.9999999&&(b[3]=1),new Qs(i0(b))},Jt=Ie,dr=N.type,f0=Math.pow,na=function(u){var c="rgb",p=Jt("#ccc"),b=0,C=[0,1],I=[],E=[0,0],O=!1,q=[],G=!1,X=0,re=1,J=!1,le={},ce=!0,Se=1,$e=function(Q){if(Q=Q||["#fff","#000"],Q&&dr(Q)==="string"&&Jt.brewer&&Jt.brewer[Q.toLowerCase()]&&(Q=Jt.brewer[Q.toLowerCase()]),dr(Q)==="array"){Q.length===1&&(Q=[Q[0],Q[0]]),Q=Q.slice(0);for(var _e=0;_e<Q.length;_e++)Q[_e]=Jt(Q[_e]);I.length=0;for(var Ne=0;Ne<Q.length;Ne++)I.push(Ne/(Q.length-1))}return Zt(),q=Q},Pe=function(Q){if(O!=null){for(var _e=O.length-1,Ne=0;Ne<_e&&Q>=O[Ne];)Ne++;return Ne-1}return 0},Ze=function(Q){return Q},At=function(Q){return Q},_t=function(Q,_e){var Ne,Te;if(_e==null&&(_e=!1),isNaN(Q)||Q===null)return p;if(_e)Te=Q;else if(O&&O.length>2){var Et=Pe(Q);Te=Et/(O.length-2)}else re!==X?Te=(Q-X)/(re-X):Te=1;Te=At(Te),_e||(Te=Ze(Te)),Se!==1&&(Te=f0(Te,Se)),Te=E[0]+Te*(1-E[0]-E[1]),Te=Math.min(1,Math.max(0,Te));var Ye=Math.floor(Te*1e4);if(ce&&le[Ye])Ne=le[Ye];else{if(dr(q)==="array")for(var qe=0;qe<I.length;qe++){var je=I[qe];if(Te<=je){Ne=q[qe];break}if(Te>=je&&qe===I.length-1){Ne=q[qe];break}if(Te>je&&Te<I[qe+1]){Te=(Te-je)/(I[qe+1]-je),Ne=Jt.interpolate(q[qe],q[qe+1],Te,c);break}}else dr(q)==="function"&&(Ne=q(Te));ce&&(le[Ye]=Ne)}return Ne},Zt=function(){return le={}};$e(u);var Oe=function(Q){var _e=Jt(_t(Q));return G&&_e[G]?_e[G]():_e};return Oe.classes=function(Q){if(Q!=null){if(dr(Q)==="array")O=Q,C=[Q[0],Q[Q.length-1]];else{var _e=Jt.analyze(C);Q===0?O=[_e.min,_e.max]:O=Jt.limits(_e,"e",Q)}return Oe}return O},Oe.domain=function(Q){if(!arguments.length)return C;X=Q[0],re=Q[Q.length-1],I=[];var _e=q.length;if(Q.length===_e&&X!==re)for(var Ne=0,Te=Array.from(Q);Ne<Te.length;Ne+=1){var Et=Te[Ne];I.push((Et-X)/(re-X))}else{for(var Ye=0;Ye<_e;Ye++)I.push(Ye/(_e-1));if(Q.length>2){var qe=Q.map(function(Ue,Ge){return Ge/(Q.length-1)}),je=Q.map(function(Ue){return(Ue-X)/(re-X)});je.every(function(Ue,Ge){return qe[Ge]===Ue})||(At=function(Ue){if(Ue<=0||Ue>=1)return Ue;for(var Ge=0;Ue>=je[Ge+1];)Ge++;var Kt=(Ue-je[Ge])/(je[Ge+1]-je[Ge]),Cn=qe[Ge]+Kt*(qe[Ge+1]-qe[Ge]);return Cn})}}return C=[X,re],Oe},Oe.mode=function(Q){return arguments.length?(c=Q,Zt(),Oe):c},Oe.range=function(Q,_e){return $e(Q),Oe},Oe.out=function(Q){return G=Q,Oe},Oe.spread=function(Q){return arguments.length?(b=Q,Oe):b},Oe.correctLightness=function(Q){return Q==null&&(Q=!0),J=Q,Zt(),J?Ze=function(_e){for(var Ne=_t(0,!0).lab()[0],Te=_t(1,!0).lab()[0],Et=Ne>Te,Ye=_t(_e,!0).lab()[0],qe=Ne+(Te-Ne)*_e,je=Ye-qe,Ue=0,Ge=1,Kt=20;Math.abs(je)>.01&&Kt-- >0;)(function(){return Et&&(je*=-1),je<0?(Ue=_e,_e+=(Ge-_e)*.5):(Ge=_e,_e+=(Ue-_e)*.5),Ye=_t(_e,!0).lab()[0],je=Ye-qe})();return _e}:Ze=function(_e){return _e},Oe},Oe.padding=function(Q){return Q!=null?(dr(Q)==="number"&&(Q=[Q,Q]),E=Q,Oe):E},Oe.colors=function(Q,_e){arguments.length<2&&(_e="hex");var Ne=[];if(arguments.length===0)Ne=q.slice(0);else if(Q===1)Ne=[Oe(.5)];else if(Q>1){var Te=C[0],Et=C[1]-Te;Ne=d0(0,Q).map(function(Ge){return Oe(Te+Ge/(Q-1)*Et)})}else{u=[];var Ye=[];if(O&&O.length>2)for(var qe=1,je=O.length,Ue=1<=je;Ue?qe<je:qe>je;Ue?qe++:qe--)Ye.push((O[qe-1]+O[qe])*.5);else Ye=C;Ne=Ye.map(function(Ge){return Oe(Ge)})}return Jt[_e]&&(Ne=Ne.map(function(Ge){return Ge[_e]()})),Ne},Oe.cache=function(Q){return Q!=null?(ce=Q,Oe):ce},Oe.gamma=function(Q){return Q!=null?(Se=Q,Oe):Se},Oe.nodata=function(Q){return Q!=null?(p=Jt(Q),Oe):p},Oe};function d0(u,c,p){for(var b=[],C=u<c,I=c,E=u;C?E<I:E>I;C?E++:E--)b.push(E);return b}var Nr=ue,h0=na,p0=function(u){for(var c=[1,1],p=1;p<u;p++){for(var b=[1],C=1;C<=c.length;C++)b[C]=(c[C]||0)+c[C-1];c=b}return c},m0=function(u){var c,p,b,C,I,E,O;if(u=u.map(function(J){return new Nr(J)}),u.length===2)c=u.map(function(J){return J.lab()}),I=c[0],E=c[1],C=function(J){var le=[0,1,2].map(function(ce){return I[ce]+J*(E[ce]-I[ce])});return new Nr(le,"lab")};else if(u.length===3)p=u.map(function(J){return J.lab()}),I=p[0],E=p[1],O=p[2],C=function(J){var le=[0,1,2].map(function(ce){return(1-J)*(1-J)*I[ce]+2*(1-J)*J*E[ce]+J*J*O[ce]});return new Nr(le,"lab")};else if(u.length===4){var q;b=u.map(function(J){return J.lab()}),I=b[0],E=b[1],O=b[2],q=b[3],C=function(J){var le=[0,1,2].map(function(ce){return(1-J)*(1-J)*(1-J)*I[ce]+3*(1-J)*(1-J)*J*E[ce]+3*(1-J)*J*J*O[ce]+J*J*J*q[ce]});return new Nr(le,"lab")}}else if(u.length>=5){var G,X,re;G=u.map(function(J){return J.lab()}),re=u.length-1,X=p0(re),C=function(J){var le=1-J,ce=[0,1,2].map(function(Se){return G.reduce(function($e,Pe,Ze){return $e+X[Ze]*Math.pow(le,re-Ze)*Math.pow(J,Ze)*Pe[Se]},0)});return new Nr(ce,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return C},g0=function(u){var c=m0(u);return c.scale=function(){return h0(c)},c},ra=Ie,Qt=function(u,c,p){if(!Qt[p])throw new Error("unknown blend mode "+p);return Qt[p](u,c)},En=function(u){return function(c,p){var b=ra(p).rgb(),C=ra(c).rgb();return ra.rgb(u(b,C))}},Fn=function(u){return function(c,p){var b=[];return b[0]=u(c[0],p[0]),b[1]=u(c[1],p[1]),b[2]=u(c[2],p[2]),b}},_0=function(u){return u},v0=function(u,c){return u*c/255},y0=function(u,c){return u>c?c:u},D0=function(u,c){return u>c?u:c},w0=function(u,c){return 255*(1-(1-u/255)*(1-c/255))},b0=function(u,c){return c<128?2*u*c/255:255*(1-2*(1-u/255)*(1-c/255))},k0=function(u,c){return 255*(1-(1-c/255)/(u/255))},x0=function(u,c){return u===255?255:(u=255*(c/255)/(1-u/255),u>255?255:u)};Qt.normal=En(Fn(_0)),Qt.multiply=En(Fn(v0)),Qt.screen=En(Fn(w0)),Qt.overlay=En(Fn(b0)),Qt.darken=En(Fn(y0)),Qt.lighten=En(Fn(D0)),Qt.dodge=En(Fn(x0)),Qt.burn=En(Fn(k0));for(var A0=Qt,sa=N.type,E0=N.clip_rgb,F0=N.TWOPI,C0=Math.pow,B0=Math.sin,S0=Math.cos,Iu=Ie,T0=function(u,c,p,b,C){u===void 0&&(u=300),c===void 0&&(c=-1.5),p===void 0&&(p=1),b===void 0&&(b=1),C===void 0&&(C=[0,1]);var I=0,E;sa(C)==="array"?E=C[1]-C[0]:(E=0,C=[C,C]);var O=function(q){var G=F0*((u+120)/360+c*q),X=C0(C[0]+E*q,b),re=I!==0?p[0]+q*I:p,J=re*X*(1-X)/2,le=S0(G),ce=B0(G),Se=X+J*(-.14861*le+1.78277*ce),$e=X+J*(-.29227*le-.90649*ce),Pe=X+J*(1.97294*le);return Iu(E0([Se*255,$e*255,Pe*255,1]))};return O.start=function(q){return q==null?u:(u=q,O)},O.rotations=function(q){return q==null?c:(c=q,O)},O.gamma=function(q){return q==null?b:(b=q,O)},O.hue=function(q){return q==null?p:(p=q,sa(p)==="array"?(I=p[1]-p[0],I===0&&(p=p[1])):I=0,O)},O.lightness=function(q){return q==null?C:(sa(q)==="array"?(C=q,E=q[1]-q[0]):(C=[q,q],E=0),O)},O.scale=function(){return Iu.scale(O)},O.hue(p),O},M0=ue,N0="0123456789abcdef",I0=Math.floor,$0=Math.random,z0=function(){for(var u="#",c=0;c<6;c++)u+=N0.charAt(I0($0()*16));return new M0(u,"hex")},aa=T,$u=Math.log,O0=Math.pow,P0=Math.floor,q0=Math.abs,zu=function(u,c){c===void 0&&(c=null);var p={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return aa(u)==="object"&&(u=Object.values(u)),u.forEach(function(b){c&&aa(b)==="object"&&(b=b[c]),b!=null&&!isNaN(b)&&(p.values.push(b),p.sum+=b,b<p.min&&(p.min=b),b>p.max&&(p.max=b),p.count+=1)}),p.domain=[p.min,p.max],p.limits=function(b,C){return Ou(p,b,C)},p},Ou=function(u,c,p){c===void 0&&(c="equal"),p===void 0&&(p=7),aa(u)=="array"&&(u=zu(u));var b=u.min,C=u.max,I=u.values.sort(function(ia,oa){return ia-oa});if(p===1)return[b,C];var E=[];if(c.substr(0,1)==="c"&&(E.push(b),E.push(C)),c.substr(0,1)==="e"){E.push(b);for(var O=1;O<p;O++)E.push(b+O/p*(C-b));E.push(C)}else if(c.substr(0,1)==="l"){if(b<=0)throw new Error("Logarithmic scales are only possible for values > 0");var q=Math.LOG10E*$u(b),G=Math.LOG10E*$u(C);E.push(b);for(var X=1;X<p;X++)E.push(O0(10,q+X/p*(G-q)));E.push(C)}else if(c.substr(0,1)==="q"){E.push(b);for(var re=1;re<p;re++){var J=(I.length-1)*re/p,le=P0(J);if(le===J)E.push(I[le]);else{var ce=J-le;E.push(I[le]*(1-ce)+I[le+1]*ce)}}E.push(C)}else if(c.substr(0,1)==="k"){var Se,$e=I.length,Pe=new Array($e),Ze=new Array(p),At=!0,_t=0,Zt=null;Zt=[],Zt.push(b);for(var Oe=1;Oe<p;Oe++)Zt.push(b+Oe/p*(C-b));for(Zt.push(C);At;){for(var Q=0;Q<p;Q++)Ze[Q]=0;for(var _e=0;_e<$e;_e++)for(var Ne=I[_e],Te=Number.MAX_VALUE,Et=void 0,Ye=0;Ye<p;Ye++){var qe=q0(Zt[Ye]-Ne);qe<Te&&(Te=qe,Et=Ye),Ze[Et]++,Pe[_e]=Et}for(var je=new Array(p),Ue=0;Ue<p;Ue++)je[Ue]=null;for(var Ge=0;Ge<$e;Ge++)Se=Pe[Ge],je[Se]===null?je[Se]=I[Ge]:je[Se]+=I[Ge];for(var Kt=0;Kt<p;Kt++)je[Kt]*=1/Ze[Kt];At=!1;for(var Cn=0;Cn<p;Cn++)if(je[Cn]!==Zt[Cn]){At=!0;break}Zt=je,_t++,_t>200&&(At=!1)}for(var Bn={},hr=0;hr<p;hr++)Bn[hr]=[];for(var pr=0;pr<$e;pr++)Se=Pe[pr],Bn[Se].push(I[pr]);for(var gn=[],Ln=0;Ln<p;Ln++)gn.push(Bn[Ln][0]),gn.push(Bn[Ln][Bn[Ln].length-1]);gn=gn.sort(function(ia,oa){return ia-oa}),E.push(gn[0]);for(var Ir=1;Ir<gn.length;Ir+=2){var Zn=gn[Ir];!isNaN(Zn)&&E.indexOf(Zn)===-1&&E.push(Zn)}}return E},Pu={analyze:zu,limits:Ou},qu=ue,V0=function(u,c){u=new qu(u),c=new qu(c);var p=u.luminance(),b=c.luminance();return p>b?(p+.05)/(b+.05):(b+.05)/(p+.05)},Vu=ue,mn=Math.sqrt,ut=Math.pow,L0=Math.min,Z0=Math.max,Lu=Math.atan2,Zu=Math.abs,ms=Math.cos,Ru=Math.sin,R0=Math.exp,ju=Math.PI,j0=function(u,c,p,b,C){p===void 0&&(p=1),b===void 0&&(b=1),C===void 0&&(C=1);var I=function(Zn){return 360*Zn/(2*ju)},E=function(Zn){return 2*ju*Zn/360};u=new Vu(u),c=new Vu(c);var O=Array.from(u.lab()),q=O[0],G=O[1],X=O[2],re=Array.from(c.lab()),J=re[0],le=re[1],ce=re[2],Se=(q+J)/2,$e=mn(ut(G,2)+ut(X,2)),Pe=mn(ut(le,2)+ut(ce,2)),Ze=($e+Pe)/2,At=.5*(1-mn(ut(Ze,7)/(ut(Ze,7)+ut(25,7)))),_t=G*(1+At),Zt=le*(1+At),Oe=mn(ut(_t,2)+ut(X,2)),Q=mn(ut(Zt,2)+ut(ce,2)),_e=(Oe+Q)/2,Ne=I(Lu(X,_t)),Te=I(Lu(ce,Zt)),Et=Ne>=0?Ne:Ne+360,Ye=Te>=0?Te:Te+360,qe=Zu(Et-Ye)>180?(Et+Ye+360)/2:(Et+Ye)/2,je=1-.17*ms(E(qe-30))+.24*ms(E(2*qe))+.32*ms(E(3*qe+6))-.2*ms(E(4*qe-63)),Ue=Ye-Et;Ue=Zu(Ue)<=180?Ue:Ye<=Et?Ue+360:Ue-360,Ue=2*mn(Oe*Q)*Ru(E(Ue)/2);var Ge=J-q,Kt=Q-Oe,Cn=1+.015*ut(Se-50,2)/mn(20+ut(Se-50,2)),Bn=1+.045*_e,hr=1+.015*_e*je,pr=30*R0(-ut((qe-275)/25,2)),gn=2*mn(ut(_e,7)/(ut(_e,7)+ut(25,7))),Ln=-gn*Ru(2*E(pr)),Ir=mn(ut(Ge/(p*Cn),2)+ut(Kt/(b*Bn),2)+ut(Ue/(C*hr),2)+Ln*(Kt/(b*Bn))*(Ue/(C*hr)));return Z0(0,L0(100,Ir))},Uu=ue,U0=function(u,c,p){p===void 0&&(p="lab"),u=new Uu(u),c=new Uu(c);var b=u.get(p),C=c.get(p),I=0;for(var E in b){var O=(b[E]||0)-(C[E]||0);I+=O*O}return Math.sqrt(I)},G0=ue,W0=function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];try{return new(Function.prototype.bind.apply(G0,[null].concat(u))),!0}catch{return!1}},Gu=Ie,Wu=na,H0={cool:function(){return Wu([Gu.hsl(180,1,.9),Gu.hsl(250,.7,.4)])},hot:function(){return Wu(["#000","#f00","#ff0","#fff"]).mode("rgb")}},gs={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},ua=0,Hu=Object.keys(gs);ua<Hu.length;ua+=1){var Yu=Hu[ua];gs[Yu.toLowerCase()]=gs[Yu]}var Y0=gs,gt=Ie;gt.average=c0,gt.bezier=g0,gt.blend=A0,gt.cubehelix=T0,gt.mix=gt.interpolate=Au,gt.random=z0,gt.scale=na,gt.analyze=Pu.analyze,gt.contrast=V0,gt.deltaE=j0,gt.distance=U0,gt.limits=Pu.limits,gt.valid=W0,gt.scales=H0,gt.colors=iu,gt.brewer=Y0;var X0=gt;return X0})})(Ri);var yd=Ri.exports;const Dd=vd(yd),za=(t,e)=>((t+e-1)/e|0)*e;function wd(t){return Object.keys(t)}function bd(t,e){return new Array(t).fill(0).map((n,r)=>e(r))}const Rr=t=>t&&typeof t.length=="number"&&t.buffer instanceof ArrayBuffer&&typeof t.byteLength=="number",ji=t=>t,Le=ji({i32:{numElements:1,align:4,size:4,type:"i32",View:Int32Array},u32:{numElements:1,align:4,size:4,type:"u32",View:Uint32Array},f32:{numElements:1,align:4,size:4,type:"f32",View:Float32Array},f16:{numElements:1,align:2,size:2,type:"u16",View:Uint16Array},vec2f:{numElements:2,align:8,size:8,type:"f32",View:Float32Array},vec2i:{numElements:2,align:8,size:8,type:"i32",View:Int32Array},vec2u:{numElements:2,align:8,size:8,type:"u32",View:Uint32Array},vec2h:{numElements:2,align:4,size:4,type:"u16",View:Uint16Array},vec3i:{numElements:3,align:16,size:12,type:"i32",View:Int32Array},vec3u:{numElements:3,align:16,size:12,type:"u32",View:Uint32Array},vec3f:{numElements:3,align:16,size:12,type:"f32",View:Float32Array},vec3h:{numElements:3,align:8,size:6,type:"u16",View:Uint16Array},vec4i:{numElements:4,align:16,size:16,type:"i32",View:Int32Array},vec4u:{numElements:4,align:16,size:16,type:"u32",View:Uint32Array},vec4f:{numElements:4,align:16,size:16,type:"f32",View:Float32Array},vec4h:{numElements:4,align:8,size:8,type:"u16",View:Uint16Array},mat2x2f:{numElements:4,align:8,size:16,type:"f32",View:Float32Array},mat2x2h:{numElements:4,align:4,size:8,type:"u16",View:Uint16Array},mat3x2f:{numElements:6,align:8,size:24,type:"f32",View:Float32Array},mat3x2h:{numElements:6,align:4,size:12,type:"u16",View:Uint16Array},mat4x2f:{numElements:8,align:8,size:32,type:"f32",View:Float32Array},mat4x2h:{numElements:8,align:4,size:16,type:"u16",View:Uint16Array},mat2x3f:{numElements:8,align:16,size:32,pad:[3,1],type:"f32",View:Float32Array},mat2x3h:{numElements:8,align:8,size:16,pad:[3,1],type:"u16",View:Uint16Array},mat3x3f:{numElements:12,align:16,size:48,pad:[3,1],type:"f32",View:Float32Array},mat3x3h:{numElements:12,align:8,size:24,pad:[3,1],type:"u16",View:Uint16Array},mat4x3f:{numElements:16,align:16,size:64,pad:[3,1],type:"f32",View:Float32Array},mat4x3h:{numElements:16,align:8,size:32,pad:[3,1],type:"u16",View:Uint16Array},mat2x4f:{numElements:8,align:16,size:32,type:"f32",View:Float32Array},mat2x4h:{numElements:8,align:8,size:16,type:"u16",View:Uint16Array},mat3x4f:{numElements:12,align:16,size:48,pad:[3,1],type:"f32",View:Float32Array},mat3x4h:{numElements:12,align:8,size:24,pad:[3,1],type:"u16",View:Uint16Array},mat4x4f:{numElements:16,align:16,size:64,type:"f32",View:Float32Array},mat4x4h:{numElements:16,align:8,size:32,type:"u16",View:Uint16Array},bool:{numElements:0,align:1,size:0,type:"bool",View:Uint32Array}}),Sr=ji({...Le,"atomic<i32>":Le.i32,"atomic<u32>":Le.u32,"vec2<i32>":Le.vec2i,"vec2<u32>":Le.vec2u,"vec2<f32>":Le.vec2f,"vec2<f16>":Le.vec2h,"vec3<i32>":Le.vec3i,"vec3<u32>":Le.vec3u,"vec3<f32>":Le.vec3f,"vec3<f16>":Le.vec3h,"vec4<i32>":Le.vec4i,"vec4<u32>":Le.vec4u,"vec4<f32>":Le.vec4f,"vec4<f16>":Le.vec4h,"mat2x2<f32>":Le.mat2x2f,"mat2x2<f16>":Le.mat2x2h,"mat3x2<f32>":Le.mat3x2f,"mat3x2<f16>":Le.mat3x2h,"mat4x2<f32>":Le.mat4x2f,"mat4x2<f16>":Le.mat4x2h,"mat2x3<f32>":Le.mat2x3f,"mat2x3<f16>":Le.mat2x3h,"mat3x3<f32>":Le.mat3x3f,"mat3x3<f16>":Le.mat3x3h,"mat4x3<f32>":Le.mat4x3f,"mat4x3<f16>":Le.mat4x3h,"mat2x4<f32>":Le.mat2x4f,"mat2x4<f16>":Le.mat2x4h,"mat3x4<f32>":Le.mat3x4f,"mat3x4<f16>":Le.mat3x4h,"mat4x4<f32>":Le.mat4x4f,"mat4x4<f16>":Le.mat4x4h}),kd=wd(Sr);function xd(t=[],e){const n=new Set;for(const r of kd){const s=Sr[r];n.has(s)||(n.add(s),s.flatten=t.includes(r)?e:!e)}}xd();function Ad(t){const e=t;if(e.elementType)return e.size;{const r=t,s=e.numElements||1;if(r.fields)return t.size*s;{const i=t,{align:m}=Sr[i.type];return s>1?za(t.size,m)*s:t.size}}}function ai(t,e,n,r){const{size:s,type:i}=t;try{const{View:m,align:v}=Sr[i],F=r!==void 0,T=F?za(s,v):s,R=T/m.BYTES_PER_ELEMENT,W=F?r===0?(e.byteLength-n)/T:r:1;return new m(e,n,R*W)}catch{throw new Error(`unknown type: ${i}`)}}function Ed(t){return!t.fields&&!t.elementType}function Fd(t,e,n){const r=n||0,s=new ArrayBuffer(Ad(t)),i=(m,v)=>{const F=m,T=F.elementType;if(T){if(Ed(T)&&Sr[T.type].flatten)return ai(T,s,v,F.numElements);{const{size:R}=Ui(m),W=F.numElements===0?(s.byteLength-v)/R:F.numElements;return bd(W,ie=>i(T,v+R*ie))}}else{if(typeof m=="string")throw Error("unreachable");{const R=m.fields;if(R){const W={};for(const[ie,{type:te,offset:se}]of Object.entries(R))W[ie]=i(te,v+se);return W}else return ai(m,s,v)}}};return{views:i(t,r),arrayBuffer:s}}function ka(t,e){if(t!==void 0)if(Rr(e)){const n=e;if(n.length===1&&typeof t=="number")n[0]=t;else if(Array.isArray(t[0])||Rr(t[0])){const r=t[0].length,s=r===3?4:r;for(let i=0;i<t.length;++i){const m=i*s;n.set(t[i],m)}}else n.set(t)}else if(Array.isArray(e)){const n=e;t.forEach((r,s)=>{ka(r,n[s])})}else{const n=e;for(const[r,s]of Object.entries(t)){const i=n[r];i&&ka(s,i)}}}function hp(t,e,n=0){const r=t,s=r.group===void 0?t:r.typeDefinition,i=Fd(s,e,n);return{...i,set(m){ka(m,i.views)}}}function xa(t){const n=t.elementType;if(n)return xa(n);const s=t.fields;if(s)return Object.values(s).reduce((v,{type:F})=>Math.max(v,xa(F)),0);const{type:i}=t,{align:m}=Sr[i];return m}function Ui(t){const n=t.elementType;if(n){const i=n.size,m=xa(n);return{unalignedSize:i,align:m,size:za(i,m)}}const s=t.fields;if(s){const i=Object.values(s).pop();if(i.type.size===0)return Ui(i.type)}return{size:0,unalignedSize:0,align:1}}class Cd{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}let An=class{constructor(){}get isAstNode(){return!0}get astNodeType(){return""}evaluate(e){throw new Error("Cannot evaluate node")}evaluateString(e){return this.evaluate(e).toString()}search(e){}searchBlock(e,n){if(e){n(xs.instance);for(const r of e)r instanceof Array?this.searchBlock(r,n):r.search(n);n(As.instance)}}};class xs extends An{}xs.instance=new xs;class As extends An{}As.instance=new As;class Qe extends An{constructor(){super()}}let Aa=class extends Qe{constructor(e,n,r,s,i,m){super(),this.calls=new Set,this.name=e,this.args=n,this.returnType=r,this.body=s,this.startLine=i,this.endLine=m}get astNodeType(){return"function"}search(e){this.searchBlock(this.body,e)}};class Bd extends Qe{constructor(e){super(),this.expression=e}get astNodeType(){return"staticAssert"}search(e){this.expression.search(e)}}class Sd extends Qe{constructor(e,n){super(),this.condition=e,this.body=n}get astNodeType(){return"while"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class Td extends Qe{constructor(e){super(),this.body=e}get astNodeType(){return"continuing"}search(e){this.searchBlock(this.body,e)}}class Md extends Qe{constructor(e,n,r,s){super(),this.init=e,this.condition=n,this.increment=r,this.body=s}get astNodeType(){return"for"}search(e){var n,r,s;(n=this.init)===null||n===void 0||n.search(e),(r=this.condition)===null||r===void 0||r.search(e),(s=this.increment)===null||s===void 0||s.search(e),this.searchBlock(this.body,e)}}class Wn extends Qe{constructor(e,n,r,s,i){super(),this.name=e,this.type=n,this.storage=r,this.access=s,this.value=i}get astNodeType(){return"var"}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}}class Gi extends Qe{constructor(e,n,r){super(),this.name=e,this.type=n,this.value=r}get astNodeType(){return"override"}search(e){var n;(n=this.value)===null||n===void 0||n.search(e)}}class Ea extends Qe{constructor(e,n,r,s,i){super(),this.name=e,this.type=n,this.storage=r,this.access=s,this.value=i}get astNodeType(){return"let"}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}}class ui extends Qe{constructor(e,n,r,s,i){super(),this.name=e,this.type=n,this.storage=r,this.access=s,this.value=i}get astNodeType(){return"const"}evaluate(e){return this.value.evaluate(e)}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}}var Ar;(function(t){t.increment="++",t.decrement="--"})(Ar||(Ar={}));(function(t){function e(n){const r=n;if(r=="parse")throw new Error("Invalid value for IncrementOperator");return t[r]}t.parse=e})(Ar||(Ar={}));class Nd extends Qe{constructor(e,n){super(),this.operator=e,this.variable=n}get astNodeType(){return"increment"}search(e){this.variable.search(e)}}var jr;(function(t){t.assign="=",t.addAssign="+=",t.subtractAssin="-=",t.multiplyAssign="*=",t.divideAssign="/=",t.moduloAssign="%=",t.andAssign="&=",t.orAssign="|=",t.xorAssign="^=",t.shiftLeftAssign="<<=",t.shiftRightAssign=">>="})(jr||(jr={}));(function(t){function e(n){const r=n;if(r=="parse")throw new Error("Invalid value for AssignOperator");return r}t.parse=e})(jr||(jr={}));class Id extends Qe{constructor(e,n,r){super(),this.operator=e,this.variable=n,this.value=r}get astNodeType(){return"assign"}search(e){this.variable.search(e),this.value.search(e)}}class Wi extends Qe{constructor(e,n){super(),this.name=e,this.args=n}get astNodeType(){return"call"}search(e){for(const n of this.args)n.search(e);e(this)}}class $d extends Qe{constructor(e,n){super(),this.body=e,this.continuing=n}get astNodeType(){return"loop"}}class zd extends Qe{constructor(e,n){super(),this.condition=e,this.body=n}get astNodeType(){return"body"}}class Od extends Qe{constructor(e,n,r,s){super(),this.condition=e,this.body=n,this.elseif=r,this.else=s}get astNodeType(){return"if"}search(e){this.condition.search(e),this.searchBlock(this.body,e),this.searchBlock(this.elseif,e),this.searchBlock(this.else,e)}}class Pd extends Qe{constructor(e){super(),this.value=e}get astNodeType(){return"return"}search(e){var n;(n=this.value)===null||n===void 0||n.search(e)}}class qd extends Qe{constructor(e){super(),this.name=e}get astNodeType(){return"enable"}}class Vd extends Qe{constructor(e){super(),this.extensions=e}get astNodeType(){return"requires"}}class Ld extends Qe{constructor(e,n){super(),this.severity=e,this.rule=n}get astNodeType(){return"diagnostic"}}class Hi extends Qe{constructor(e,n){super(),this.name=e,this.type=n}get astNodeType(){return"alias"}}class Zd extends Qe{constructor(){super()}get astNodeType(){return"discard"}}class Rd extends Qe{constructor(){super()}get astNodeType(){return"break"}}class jd extends Qe{constructor(){super()}get astNodeType(){return"continue"}}class Kn extends Qe{constructor(e){super(),this.name=e}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}}class Un extends Kn{constructor(e,n,r,s){super(e),this.members=n,this.startLine=r,this.endLine=s}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(e){for(let n=0;n<this.members.length;n++)if(this.members[n].name==e)return n;return-1}}class Yi extends Kn{constructor(e,n,r){super(e),this.format=n,this.access=r}get astNodeType(){return"template"}}class Ud extends Kn{constructor(e,n,r,s){super(e),this.storage=n,this.type=r,this.access=s}get astNodeType(){return"pointer"}}class Xi extends Kn{constructor(e,n,r,s){super(e),this.attributes=n,this.format=r,this.count=s}get astNodeType(){return"array"}get isArray(){return!0}}class Pr extends Kn{constructor(e,n,r){super(e),this.format=n,this.access=r}get astNodeType(){return"sampler"}}class un extends An{constructor(){super()}}class ii extends un{constructor(e){super(),this.value=e}get astNodeType(){return"stringExpr"}toString(){return this.value}evaluateString(){return this.value}}class yr extends un{constructor(e,n){super(),this.type=e,this.args=n}get astNodeType(){return"createExpr"}search(e){e(this);for(const n of this.args)n.search(e)}}class Ji extends un{constructor(e,n){super(),this.name=e,this.args=n}get astNodeType(){return"callExpr"}evaluate(e){switch(this.name){case"abs":return Math.abs(this.args[0].evaluate(e));case"acos":return Math.acos(this.args[0].evaluate(e));case"acosh":return Math.acosh(this.args[0].evaluate(e));case"asin":return Math.asin(this.args[0].evaluate(e));case"asinh":return Math.asinh(this.args[0].evaluate(e));case"atan":return Math.atan(this.args[0].evaluate(e));case"atan2":return Math.atan2(this.args[0].evaluate(e),this.args[1].evaluate(e));case"atanh":return Math.atanh(this.args[0].evaluate(e));case"ceil":return Math.ceil(this.args[0].evaluate(e));case"clamp":return Math.min(Math.max(this.args[0].evaluate(e),this.args[1].evaluate(e)),this.args[2].evaluate(e));case"cos":return Math.cos(this.args[0].evaluate(e));case"degrees":return this.args[0].evaluate(e)*180/Math.PI;case"distance":return Math.sqrt(Math.pow(this.args[0].evaluate(e)-this.args[1].evaluate(e),2));case"dot":case"exp":return Math.exp(this.args[0].evaluate(e));case"exp2":return Math.pow(2,this.args[0].evaluate(e));case"floor":return Math.floor(this.args[0].evaluate(e));case"fma":return this.args[0].evaluate(e)*this.args[1].evaluate(e)+this.args[2].evaluate(e);case"fract":return this.args[0].evaluate(e)-Math.floor(this.args[0].evaluate(e));case"inverseSqrt":return 1/Math.sqrt(this.args[0].evaluate(e));case"log":return Math.log(this.args[0].evaluate(e));case"log2":return Math.log2(this.args[0].evaluate(e));case"max":return Math.max(this.args[0].evaluate(e),this.args[1].evaluate(e));case"min":return Math.min(this.args[0].evaluate(e),this.args[1].evaluate(e));case"mix":return this.args[0].evaluate(e)*(1-this.args[2].evaluate(e))+this.args[1].evaluate(e)*this.args[2].evaluate(e);case"modf":return this.args[0].evaluate(e)-Math.floor(this.args[0].evaluate(e));case"pow":return Math.pow(this.args[0].evaluate(e),this.args[1].evaluate(e));case"radians":return this.args[0].evaluate(e)*Math.PI/180;case"round":return Math.round(this.args[0].evaluate(e));case"sign":return Math.sign(this.args[0].evaluate(e));case"sin":return Math.sin(this.args[0].evaluate(e));case"sinh":return Math.sinh(this.args[0].evaluate(e));case"saturate":return Math.min(Math.max(this.args[0].evaluate(e),0),1);case"smoothstep":return this.args[0].evaluate(e)*this.args[0].evaluate(e)*(3-2*this.args[0].evaluate(e));case"sqrt":return Math.sqrt(this.args[0].evaluate(e));case"step":return this.args[0].evaluate(e)<this.args[1].evaluate(e)?0:1;case"tan":return Math.tan(this.args[0].evaluate(e));case"tanh":return Math.tanh(this.args[0].evaluate(e));case"trunc":return Math.trunc(this.args[0].evaluate(e));default:throw new Error("Non const function: "+this.name)}}search(e){for(const n of this.args)n.search(e);e(this)}}class Fa extends un{constructor(e){super(),this.name=e}get astNodeType(){return"varExpr"}search(e){e(this),this.postfix&&this.postfix.search(e)}evaluate(e){const n=e.constants.get(this.name);if(!n)throw new Error("Cannot evaluate node");return n.evaluate(e)}}class oi extends un{constructor(e,n){super(),this.name=e,this.initializer=n}get astNodeType(){return"constExpr"}evaluate(e){var n,r;if(this.initializer instanceof yr){const s=(n=this.postfix)===null||n===void 0?void 0:n.evaluateString(e),i=(r=this.initializer.type)===null||r===void 0?void 0:r.name,m=e.structs.get(i),v=m==null?void 0:m.getMemberIndex(s);if(v!=-1)return this.initializer.args[v].evaluate(e);console.log(v)}return this.initializer.evaluate(e)}search(e){this.initializer.search(e)}}class ci extends un{constructor(e){super(),this.value=e}get astNodeType(){return"literalExpr"}evaluate(){return this.value}}class Gd extends un{constructor(e,n){super(),this.type=e,this.value=n}get astNodeType(){return"bitcastExpr"}search(e){this.value.search(e)}}class Wd extends un{constructor(e,n){super(),this.type=e,this.args=n}get astNodeType(){return"typecastExpr"}evaluate(e){return this.args[0].evaluate(e)}search(e){this.searchBlock(this.args,e)}}class li extends un{constructor(e){super(),this.contents=e}get astNodeType(){return"groupExpr"}evaluate(e){return this.contents[0].evaluate(e)}search(e){this.searchBlock(this.contents,e)}}class Hd extends un{constructor(e){super(),this.index=e}search(e){this.index.search(e)}}class Qi extends un{constructor(){super()}}class Yd extends Qi{constructor(e,n){super(),this.operator=e,this.right=n}get astNodeType(){return"unaryOp"}evaluate(e){switch(this.operator){case"+":return this.right.evaluate(e);case"-":return-this.right.evaluate(e);case"!":return this.right.evaluate(e)?0:1;case"~":return~this.right.evaluate(e);default:throw new Error("Unknown unary operator: "+this.operator)}}search(e){this.right.search(e)}}class on extends Qi{constructor(e,n,r){super(),this.operator=e,this.left=n,this.right=r}get astNodeType(){return"binaryOp"}evaluate(e){switch(this.operator){case"+":return this.left.evaluate(e)+this.right.evaluate(e);case"-":return this.left.evaluate(e)-this.right.evaluate(e);case"*":return this.left.evaluate(e)*this.right.evaluate(e);case"/":return this.left.evaluate(e)/this.right.evaluate(e);case"%":return this.left.evaluate(e)%this.right.evaluate(e);case"==":return this.left.evaluate(e)==this.right.evaluate(e)?1:0;case"!=":return this.left.evaluate(e)!=this.right.evaluate(e)?1:0;case"<":return this.left.evaluate(e)<this.right.evaluate(e)?1:0;case">":return this.left.evaluate(e)>this.right.evaluate(e)?1:0;case"<=":return this.left.evaluate(e)<=this.right.evaluate(e)?1:0;case">=":return this.left.evaluate(e)>=this.right.evaluate(e)?1:0;case"&&":return this.left.evaluate(e)&&this.right.evaluate(e)?1:0;case"||":return this.left.evaluate(e)||this.right.evaluate(e)?1:0;default:throw new Error(`Unknown operator ${this.operator}`)}}search(e){this.left.search(e),this.right.search(e)}}class Ki extends An{constructor(){super()}}class Xd extends Ki{constructor(e,n){super(),this.selector=e,this.body=n}get astNodeType(){return"case"}search(e){this.searchBlock(this.body,e)}}class Jd extends Ki{constructor(e){super(),this.body=e}get astNodeType(){return"default"}search(e){this.searchBlock(this.body,e)}}class Qd extends An{constructor(e,n,r){super(),this.name=e,this.type=n,this.attributes=r}get astNodeType(){return"argument"}}class Kd extends An{constructor(e,n){super(),this.condition=e,this.body=n}get astNodeType(){return"elseif"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class eh extends An{constructor(e,n,r){super(),this.name=e,this.type=n,this.attributes=r}get astNodeType(){return"member"}}class fi extends An{constructor(e,n){super(),this.name=e,this.value=n}get astNodeType(){return"attribute"}}var P,$;(function(t){t[t.token=0]="token",t[t.keyword=1]="keyword",t[t.reserved=2]="reserved"})($||($={}));class z{constructor(e,n,r){this.name=e,this.type=n,this.rule=r}toString(){return this.name}}class y{}P=y;y.none=new z("",$.reserved,"");y.eof=new z("EOF",$.token,"");y.reserved={asm:new z("asm",$.reserved,"asm"),bf16:new z("bf16",$.reserved,"bf16"),do:new z("do",$.reserved,"do"),enum:new z("enum",$.reserved,"enum"),f16:new z("f16",$.reserved,"f16"),f64:new z("f64",$.reserved,"f64"),handle:new z("handle",$.reserved,"handle"),i8:new z("i8",$.reserved,"i8"),i16:new z("i16",$.reserved,"i16"),i64:new z("i64",$.reserved,"i64"),mat:new z("mat",$.reserved,"mat"),premerge:new z("premerge",$.reserved,"premerge"),regardless:new z("regardless",$.reserved,"regardless"),typedef:new z("typedef",$.reserved,"typedef"),u8:new z("u8",$.reserved,"u8"),u16:new z("u16",$.reserved,"u16"),u64:new z("u64",$.reserved,"u64"),unless:new z("unless",$.reserved,"unless"),using:new z("using",$.reserved,"using"),vec:new z("vec",$.reserved,"vec"),void:new z("void",$.reserved,"void")};y.keywords={array:new z("array",$.keyword,"array"),atomic:new z("atomic",$.keyword,"atomic"),bool:new z("bool",$.keyword,"bool"),f32:new z("f32",$.keyword,"f32"),i32:new z("i32",$.keyword,"i32"),mat2x2:new z("mat2x2",$.keyword,"mat2x2"),mat2x3:new z("mat2x3",$.keyword,"mat2x3"),mat2x4:new z("mat2x4",$.keyword,"mat2x4"),mat3x2:new z("mat3x2",$.keyword,"mat3x2"),mat3x3:new z("mat3x3",$.keyword,"mat3x3"),mat3x4:new z("mat3x4",$.keyword,"mat3x4"),mat4x2:new z("mat4x2",$.keyword,"mat4x2"),mat4x3:new z("mat4x3",$.keyword,"mat4x3"),mat4x4:new z("mat4x4",$.keyword,"mat4x4"),ptr:new z("ptr",$.keyword,"ptr"),sampler:new z("sampler",$.keyword,"sampler"),sampler_comparison:new z("sampler_comparison",$.keyword,"sampler_comparison"),struct:new z("struct",$.keyword,"struct"),texture_1d:new z("texture_1d",$.keyword,"texture_1d"),texture_2d:new z("texture_2d",$.keyword,"texture_2d"),texture_2d_array:new z("texture_2d_array",$.keyword,"texture_2d_array"),texture_3d:new z("texture_3d",$.keyword,"texture_3d"),texture_cube:new z("texture_cube",$.keyword,"texture_cube"),texture_cube_array:new z("texture_cube_array",$.keyword,"texture_cube_array"),texture_multisampled_2d:new z("texture_multisampled_2d",$.keyword,"texture_multisampled_2d"),texture_storage_1d:new z("texture_storage_1d",$.keyword,"texture_storage_1d"),texture_storage_2d:new z("texture_storage_2d",$.keyword,"texture_storage_2d"),texture_storage_2d_array:new z("texture_storage_2d_array",$.keyword,"texture_storage_2d_array"),texture_storage_3d:new z("texture_storage_3d",$.keyword,"texture_storage_3d"),texture_depth_2d:new z("texture_depth_2d",$.keyword,"texture_depth_2d"),texture_depth_2d_array:new z("texture_depth_2d_array",$.keyword,"texture_depth_2d_array"),texture_depth_cube:new z("texture_depth_cube",$.keyword,"texture_depth_cube"),texture_depth_cube_array:new z("texture_depth_cube_array",$.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new z("texture_depth_multisampled_2d",$.keyword,"texture_depth_multisampled_2d"),texture_external:new z("texture_external",$.keyword,"texture_external"),u32:new z("u32",$.keyword,"u32"),vec2:new z("vec2",$.keyword,"vec2"),vec3:new z("vec3",$.keyword,"vec3"),vec4:new z("vec4",$.keyword,"vec4"),bitcast:new z("bitcast",$.keyword,"bitcast"),block:new z("block",$.keyword,"block"),break:new z("break",$.keyword,"break"),case:new z("case",$.keyword,"case"),continue:new z("continue",$.keyword,"continue"),continuing:new z("continuing",$.keyword,"continuing"),default:new z("default",$.keyword,"default"),diagnostic:new z("diagnostic",$.keyword,"diagnostic"),discard:new z("discard",$.keyword,"discard"),else:new z("else",$.keyword,"else"),enable:new z("enable",$.keyword,"enable"),fallthrough:new z("fallthrough",$.keyword,"fallthrough"),false:new z("false",$.keyword,"false"),fn:new z("fn",$.keyword,"fn"),for:new z("for",$.keyword,"for"),function:new z("function",$.keyword,"function"),if:new z("if",$.keyword,"if"),let:new z("let",$.keyword,"let"),const:new z("const",$.keyword,"const"),loop:new z("loop",$.keyword,"loop"),while:new z("while",$.keyword,"while"),private:new z("private",$.keyword,"private"),read:new z("read",$.keyword,"read"),read_write:new z("read_write",$.keyword,"read_write"),return:new z("return",$.keyword,"return"),requires:new z("requires",$.keyword,"requires"),storage:new z("storage",$.keyword,"storage"),switch:new z("switch",$.keyword,"switch"),true:new z("true",$.keyword,"true"),alias:new z("alias",$.keyword,"alias"),type:new z("type",$.keyword,"type"),uniform:new z("uniform",$.keyword,"uniform"),var:new z("var",$.keyword,"var"),override:new z("override",$.keyword,"override"),workgroup:new z("workgroup",$.keyword,"workgroup"),write:new z("write",$.keyword,"write"),r8unorm:new z("r8unorm",$.keyword,"r8unorm"),r8snorm:new z("r8snorm",$.keyword,"r8snorm"),r8uint:new z("r8uint",$.keyword,"r8uint"),r8sint:new z("r8sint",$.keyword,"r8sint"),r16uint:new z("r16uint",$.keyword,"r16uint"),r16sint:new z("r16sint",$.keyword,"r16sint"),r16float:new z("r16float",$.keyword,"r16float"),rg8unorm:new z("rg8unorm",$.keyword,"rg8unorm"),rg8snorm:new z("rg8snorm",$.keyword,"rg8snorm"),rg8uint:new z("rg8uint",$.keyword,"rg8uint"),rg8sint:new z("rg8sint",$.keyword,"rg8sint"),r32uint:new z("r32uint",$.keyword,"r32uint"),r32sint:new z("r32sint",$.keyword,"r32sint"),r32float:new z("r32float",$.keyword,"r32float"),rg16uint:new z("rg16uint",$.keyword,"rg16uint"),rg16sint:new z("rg16sint",$.keyword,"rg16sint"),rg16float:new z("rg16float",$.keyword,"rg16float"),rgba8unorm:new z("rgba8unorm",$.keyword,"rgba8unorm"),rgba8unorm_srgb:new z("rgba8unorm_srgb",$.keyword,"rgba8unorm_srgb"),rgba8snorm:new z("rgba8snorm",$.keyword,"rgba8snorm"),rgba8uint:new z("rgba8uint",$.keyword,"rgba8uint"),rgba8sint:new z("rgba8sint",$.keyword,"rgba8sint"),bgra8unorm:new z("bgra8unorm",$.keyword,"bgra8unorm"),bgra8unorm_srgb:new z("bgra8unorm_srgb",$.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new z("rgb10a2unorm",$.keyword,"rgb10a2unorm"),rg11b10float:new z("rg11b10float",$.keyword,"rg11b10float"),rg32uint:new z("rg32uint",$.keyword,"rg32uint"),rg32sint:new z("rg32sint",$.keyword,"rg32sint"),rg32float:new z("rg32float",$.keyword,"rg32float"),rgba16uint:new z("rgba16uint",$.keyword,"rgba16uint"),rgba16sint:new z("rgba16sint",$.keyword,"rgba16sint"),rgba16float:new z("rgba16float",$.keyword,"rgba16float"),rgba32uint:new z("rgba32uint",$.keyword,"rgba32uint"),rgba32sint:new z("rgba32sint",$.keyword,"rgba32sint"),rgba32float:new z("rgba32float",$.keyword,"rgba32float"),static_assert:new z("static_assert",$.keyword,"static_assert")};y.tokens={decimal_float_literal:new z("decimal_float_literal",$.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?f?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+f?)|([0-9]+f)/),hex_float_literal:new z("hex_float_literal",$.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+f?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+f?))/),int_literal:new z("int_literal",$.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new z("uint_literal",$.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),ident:new z("ident",$.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new z("and",$.token,"&"),and_and:new z("and_and",$.token,"&&"),arrow:new z("arrow ",$.token,"->"),attr:new z("attr",$.token,"@"),attr_left:new z("attr_left",$.token,"[["),attr_right:new z("attr_right",$.token,"]]"),forward_slash:new z("forward_slash",$.token,"/"),bang:new z("bang",$.token,"!"),bracket_left:new z("bracket_left",$.token,"["),bracket_right:new z("bracket_right",$.token,"]"),brace_left:new z("brace_left",$.token,"{"),brace_right:new z("brace_right",$.token,"}"),colon:new z("colon",$.token,":"),comma:new z("comma",$.token,","),equal:new z("equal",$.token,"="),equal_equal:new z("equal_equal",$.token,"=="),not_equal:new z("not_equal",$.token,"!="),greater_than:new z("greater_than",$.token,">"),greater_than_equal:new z("greater_than_equal",$.token,">="),shift_right:new z("shift_right",$.token,">>"),less_than:new z("less_than",$.token,"<"),less_than_equal:new z("less_than_equal",$.token,"<="),shift_left:new z("shift_left",$.token,"<<"),modulo:new z("modulo",$.token,"%"),minus:new z("minus",$.token,"-"),minus_minus:new z("minus_minus",$.token,"--"),period:new z("period",$.token,"."),plus:new z("plus",$.token,"+"),plus_plus:new z("plus_plus",$.token,"++"),or:new z("or",$.token,"|"),or_or:new z("or_or",$.token,"||"),paren_left:new z("paren_left",$.token,"("),paren_right:new z("paren_right",$.token,")"),semicolon:new z("semicolon",$.token,";"),star:new z("star",$.token,"*"),tilde:new z("tilde",$.token,"~"),underscore:new z("underscore",$.token,"_"),xor:new z("xor",$.token,"^"),plus_equal:new z("plus_equal",$.token,"+="),minus_equal:new z("minus_equal",$.token,"-="),times_equal:new z("times_equal",$.token,"*="),division_equal:new z("division_equal",$.token,"/="),modulo_equal:new z("modulo_equal",$.token,"%="),and_equal:new z("and_equal",$.token,"&="),or_equal:new z("or_equal",$.token,"|="),xor_equal:new z("xor_equal",$.token,"^="),shift_right_equal:new z("shift_right_equal",$.token,">>="),shift_left_equal:new z("shift_left_equal",$.token,"<<=")};y.simpleTokens={"@":P.tokens.attr,"{":P.tokens.brace_left,"}":P.tokens.brace_right,":":P.tokens.colon,",":P.tokens.comma,"(":P.tokens.paren_left,")":P.tokens.paren_right,";":P.tokens.semicolon};y.literalTokens={"&":P.tokens.and,"&&":P.tokens.and_and,"->":P.tokens.arrow,"[[":P.tokens.attr_left,"]]":P.tokens.attr_right,"/":P.tokens.forward_slash,"!":P.tokens.bang,"[":P.tokens.bracket_left,"]":P.tokens.bracket_right,"=":P.tokens.equal,"==":P.tokens.equal_equal,"!=":P.tokens.not_equal,">":P.tokens.greater_than,">=":P.tokens.greater_than_equal,">>":P.tokens.shift_right,"<":P.tokens.less_than,"<=":P.tokens.less_than_equal,"<<":P.tokens.shift_left,"%":P.tokens.modulo,"-":P.tokens.minus,"--":P.tokens.minus_minus,".":P.tokens.period,"+":P.tokens.plus,"++":P.tokens.plus_plus,"|":P.tokens.or,"||":P.tokens.or_or,"*":P.tokens.star,"~":P.tokens.tilde,_:P.tokens.underscore,"^":P.tokens.xor,"+=":P.tokens.plus_equal,"-=":P.tokens.minus_equal,"*=":P.tokens.times_equal,"/=":P.tokens.division_equal,"%=":P.tokens.modulo_equal,"&=":P.tokens.and_equal,"|=":P.tokens.or_equal,"^=":P.tokens.xor_equal,">>=":P.tokens.shift_right_equal,"<<=":P.tokens.shift_left_equal};y.regexTokens={decimal_float_literal:P.tokens.decimal_float_literal,hex_float_literal:P.tokens.hex_float_literal,int_literal:P.tokens.int_literal,uint_literal:P.tokens.uint_literal,ident:P.tokens.ident};y.storage_class=[P.keywords.function,P.keywords.private,P.keywords.workgroup,P.keywords.uniform,P.keywords.storage];y.access_mode=[P.keywords.read,P.keywords.write,P.keywords.read_write];y.sampler_type=[P.keywords.sampler,P.keywords.sampler_comparison];y.sampled_texture_type=[P.keywords.texture_1d,P.keywords.texture_2d,P.keywords.texture_2d_array,P.keywords.texture_3d,P.keywords.texture_cube,P.keywords.texture_cube_array];y.multisampled_texture_type=[P.keywords.texture_multisampled_2d];y.storage_texture_type=[P.keywords.texture_storage_1d,P.keywords.texture_storage_2d,P.keywords.texture_storage_2d_array,P.keywords.texture_storage_3d];y.depth_texture_type=[P.keywords.texture_depth_2d,P.keywords.texture_depth_2d_array,P.keywords.texture_depth_cube,P.keywords.texture_depth_cube_array,P.keywords.texture_depth_multisampled_2d];y.texture_external_type=[P.keywords.texture_external];y.any_texture_type=[...P.sampled_texture_type,...P.multisampled_texture_type,...P.storage_texture_type,...P.depth_texture_type,...P.texture_external_type];y.texel_format=[P.keywords.r8unorm,P.keywords.r8snorm,P.keywords.r8uint,P.keywords.r8sint,P.keywords.r16uint,P.keywords.r16sint,P.keywords.r16float,P.keywords.rg8unorm,P.keywords.rg8snorm,P.keywords.rg8uint,P.keywords.rg8sint,P.keywords.r32uint,P.keywords.r32sint,P.keywords.r32float,P.keywords.rg16uint,P.keywords.rg16sint,P.keywords.rg16float,P.keywords.rgba8unorm,P.keywords.rgba8unorm_srgb,P.keywords.rgba8snorm,P.keywords.rgba8uint,P.keywords.rgba8sint,P.keywords.bgra8unorm,P.keywords.bgra8unorm_srgb,P.keywords.rgb10a2unorm,P.keywords.rg11b10float,P.keywords.rg32uint,P.keywords.rg32sint,P.keywords.rg32float,P.keywords.rgba16uint,P.keywords.rgba16sint,P.keywords.rgba16float,P.keywords.rgba32uint,P.keywords.rgba32sint,P.keywords.rgba32float];y.const_literal=[P.tokens.int_literal,P.tokens.uint_literal,P.tokens.decimal_float_literal,P.tokens.hex_float_literal,P.keywords.true,P.keywords.false];y.literal_or_ident=[P.tokens.ident,P.tokens.int_literal,P.tokens.uint_literal,P.tokens.decimal_float_literal,P.tokens.hex_float_literal];y.element_count_expression=[P.tokens.int_literal,P.tokens.uint_literal,P.tokens.ident];y.template_types=[P.keywords.vec2,P.keywords.vec3,P.keywords.vec4,P.keywords.mat2x2,P.keywords.mat2x3,P.keywords.mat2x4,P.keywords.mat3x2,P.keywords.mat3x3,P.keywords.mat3x4,P.keywords.mat4x2,P.keywords.mat4x3,P.keywords.mat4x4,P.keywords.atomic,P.keywords.bitcast,...P.any_texture_type];y.attribute_name=[P.tokens.ident,P.keywords.block,P.keywords.diagnostic];y.assignment_operators=[P.tokens.equal,P.tokens.plus_equal,P.tokens.minus_equal,P.tokens.times_equal,P.tokens.division_equal,P.tokens.modulo_equal,P.tokens.and_equal,P.tokens.or_equal,P.tokens.xor_equal,P.tokens.shift_right_equal,P.tokens.shift_left_equal];y.increment_operators=[P.tokens.plus_plus,P.tokens.minus_minus];class di{constructor(e,n,r){this.type=e,this.lexeme=n,this.line=r}toString(){return this.lexeme}isTemplateType(){return y.template_types.indexOf(this.type)!=-1}isArrayType(){return this.type==y.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class th{constructor(e){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=e??""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new di(y.eof,"",this._line)),this._tokens}scanToken(){let e=this._advance();if(e==`
`)return this._line++,!0;if(this._isWhitespace(e))return!0;if(e=="/"){if(this._peekAhead()=="/"){for(;e!=`
`;){if(this._isAtEnd())return!0;e=this._advance()}return this._line++,!0}else if(this._peekAhead()=="*"){this._advance();let m=1;for(;m>0;){if(this._isAtEnd())return!0;if(e=this._advance(),e==`
`)this._line++;else if(e=="*"){if(this._peekAhead()=="/"&&(this._advance(),m--,m==0))return!0}else e=="/"&&this._peekAhead()=="*"&&(this._advance(),m++)}return!0}}const n=y.simpleTokens[e];if(n)return this._addToken(n),!0;let r=y.none;const s=this._isAlpha(e),i=e==="_";if(this._isAlphaNumeric(e)){let m=this._peekAhead();for(;this._isAlphaNumeric(m);)e+=this._advance(),m=this._peekAhead()}if(s){const m=y.keywords[e];if(m)return this._addToken(m),!0}if(s||i)return this._addToken(y.tokens.ident),!0;for(;;){let m=this._findType(e);const v=this._peekAhead();if(e==">"&&(v==">"||v=="=")){let F=!1,T=this._tokens.length-1;for(let R=0;R<5&&T>=0;++R,--T)if(this._tokens[T].type===y.tokens.less_than){T>0&&this._tokens[T-1].isArrayOrTemplateType()&&(F=!0);break}if(F)return this._addToken(m),!0}if(m===y.none){let F=e,T=0;const R=2;for(let W=0;W<R;++W)if(F+=this._peekAhead(W),m=this._findType(F),m!==y.none){T=W;break}if(m===y.none)return r===y.none?!1:(this._current--,this._addToken(r),!0);e=F,this._current+=T+1}if(r=m,this._isAtEnd())break;e+=this._advance()}return r===y.none?!1:(this._addToken(r),!0)}_findType(e){for(const r in y.regexTokens){const s=y.regexTokens[r];if(this._match(e,s.rule))return s}const n=y.literalTokens[e];return n||y.none}_match(e,n){const r=n.exec(e);return r&&r.index==0&&r[0]==e}_isAtEnd(){return this._current>=this._source.length}_isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}_isAlphaNumeric(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e=="_"||e>="0"&&e<="9"}_isWhitespace(e){return e==" "||e=="	"||e=="\r"}_advance(e=0){let n=this._source[this._current];return e=e||0,e++,this._current+=e,n}_peekAhead(e=0){return e=e||0,this._current+e>=this._source.length?"\0":this._source[this._current+e]}_addToken(e){const n=this._source.substring(this._start,this._current);this._tokens.push(new di(e,n,this._line))}}class nh{constructor(){this._tokens=[],this._current=0,this._currentLine=0,this._context=new Cd,this._deferArrayCountEval=[]}parse(e){this._initialize(e),this._deferArrayCountEval.length=0;const n=[];for(;!this._isAtEnd();){const r=this._global_decl_or_directive();if(!r)break;n.push(r)}if(this._deferArrayCountEval.length>0){for(const r of this._deferArrayCountEval){const s=r.arrayType,i=r.countNode;if(i instanceof Fa){const v=i.name,F=this._context.constants.get(v);if(F)try{const T=F.evaluate(this._context);s.count=T}catch{}}}this._deferArrayCountEval.length=0}return n}_initialize(e){if(e)if(typeof e=="string"){const n=new th(e);this._tokens=n.scanTokens()}else this._tokens=e;else this._tokens=[];this._current=0}_error(e,n){return{token:e,message:n,toString:function(){return`${n}`}}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==y.eof}_match(e){if(e instanceof z)return this._check(e)?(this._advance(),!0):!1;for(let n=0,r=e.length;n<r;++n){const s=e[n];if(this._check(s))return this._advance(),!0}return!1}_consume(e,n){if(this._check(e))return this._advance();throw this._error(this._peek(),n)}_check(e){if(this._isAtEnd())return!1;const n=this._peek();if(e instanceof Array){const r=n.type;return e.indexOf(r)!=-1}return n.type==e}_advance(){var e,n;return this._currentLine=(n=(e=this._peek())===null||e===void 0?void 0:e.line)!==null&&n!==void 0?n:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(y.tokens.semicolon)&&!this._isAtEnd(););if(this._match(y.keywords.alias)){const n=this._type_alias();return this._consume(y.tokens.semicolon,"Expected ';'"),n}if(this._match(y.keywords.diagnostic)){const n=this._diagnostic();return this._consume(y.tokens.semicolon,"Expected ';'"),n}if(this._match(y.keywords.requires)){const n=this._requires_directive();return this._consume(y.tokens.semicolon,"Expected ';'"),n}if(this._match(y.keywords.enable)){const n=this._enable_directive();return this._consume(y.tokens.semicolon,"Expected ';'"),n}const e=this._attribute();if(this._check(y.keywords.var)){const n=this._global_variable_decl();return n!=null&&(n.attributes=e),this._consume(y.tokens.semicolon,"Expected ';'."),n}if(this._check(y.keywords.override)){const n=this._override_variable_decl();return n!=null&&(n.attributes=e),this._consume(y.tokens.semicolon,"Expected ';'."),n}if(this._check(y.keywords.let)){const n=this._global_let_decl();return n!=null&&(n.attributes=e),this._consume(y.tokens.semicolon,"Expected ';'."),n}if(this._check(y.keywords.const)){const n=this._global_const_decl();return n!=null&&(n.attributes=e),this._consume(y.tokens.semicolon,"Expected ';'."),n}if(this._check(y.keywords.struct)){const n=this._struct_decl();return n!=null&&(n.attributes=e),n}if(this._check(y.keywords.fn)){const n=this._function_decl();return n!=null&&(n.attributes=e),n}return null}_function_decl(){if(!this._match(y.keywords.fn))return null;const e=this._currentLine,n=this._consume(y.tokens.ident,"Expected function name.").toString();this._consume(y.tokens.paren_left,"Expected '(' for function arguments.");const r=[];if(!this._check(y.tokens.paren_right))do{if(this._check(y.tokens.paren_right))break;const v=this._attribute(),F=this._consume(y.tokens.ident,"Expected argument name.").toString();this._consume(y.tokens.colon,"Expected ':' for argument type.");const T=this._attribute(),R=this._type_decl();R!=null&&(R.attributes=T,r.push(new Qd(F,R,v)))}while(this._match(y.tokens.comma));this._consume(y.tokens.paren_right,"Expected ')' after function arguments.");let s=null;if(this._match(y.tokens.arrow)){const v=this._attribute();s=this._type_decl(),s!=null&&(s.attributes=v)}const i=this._compound_statement(),m=this._currentLine;return new Aa(n,r,s,i,e,m)}_compound_statement(){const e=[];for(this._consume(y.tokens.brace_left,"Expected '{' for block.");!this._check(y.tokens.brace_right);){const n=this._statement();n!==null&&e.push(n)}return this._consume(y.tokens.brace_right,"Expected '}' for block."),e}_statement(){for(;this._match(y.tokens.semicolon)&&!this._isAtEnd(););if(this._check(y.tokens.attr)&&this._attribute(),this._check(y.keywords.if))return this._if_statement();if(this._check(y.keywords.switch))return this._switch_statement();if(this._check(y.keywords.loop))return this._loop_statement();if(this._check(y.keywords.for))return this._for_statement();if(this._check(y.keywords.while))return this._while_statement();if(this._check(y.keywords.continuing))return this._continuing_statement();if(this._check(y.keywords.static_assert))return this._static_assert_statement();if(this._check(y.tokens.brace_left))return this._compound_statement();let e=null;return this._check(y.keywords.return)?e=this._return_statement():this._check([y.keywords.var,y.keywords.let,y.keywords.const])?e=this._variable_statement():this._match(y.keywords.discard)?e=new Zd:this._match(y.keywords.break)?e=new Rd:this._match(y.keywords.continue)?e=new jd:e=this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement(),e!=null&&this._consume(y.tokens.semicolon,"Expected ';' after statement."),e}_static_assert_statement(){if(!this._match(y.keywords.static_assert))return null;const e=this._optional_paren_expression();return new Bd(e)}_while_statement(){if(!this._match(y.keywords.while))return null;const e=this._optional_paren_expression();this._check(y.tokens.attr)&&this._attribute();const n=this._compound_statement();return new Sd(e,n)}_continuing_statement(){if(!this._match(y.keywords.continuing))return null;const e=this._compound_statement();return new Td(e)}_for_statement(){if(!this._match(y.keywords.for))return null;this._consume(y.tokens.paren_left,"Expected '('.");const e=this._check(y.tokens.semicolon)?null:this._for_init();this._consume(y.tokens.semicolon,"Expected ';'.");const n=this._check(y.tokens.semicolon)?null:this._short_circuit_or_expression();this._consume(y.tokens.semicolon,"Expected ';'.");const r=this._check(y.tokens.paren_right)?null:this._for_increment();this._consume(y.tokens.paren_right,"Expected ')'."),this._check(y.tokens.attr)&&this._attribute();const s=this._compound_statement();return new Md(e,n,r,s)}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(y.keywords.var)){const e=this._variable_decl();if(e===null)throw this._error(this._peek(),"Variable declaration expected.");let n=null;return this._match(y.tokens.equal)&&(n=this._short_circuit_or_expression()),new Wn(e.name,e.type,e.storage,e.access,n)}if(this._match(y.keywords.let)){const e=this._consume(y.tokens.ident,"Expected name for let.").toString();let n=null;if(this._match(y.tokens.colon)){const s=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=s)}this._consume(y.tokens.equal,"Expected '=' for let.");const r=this._short_circuit_or_expression();return new Ea(e,n,null,null,r)}if(this._match(y.keywords.const)){const e=this._consume(y.tokens.ident,"Expected name for const.").toString();let n=null;if(this._match(y.tokens.colon)){const s=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=s)}this._consume(y.tokens.equal,"Expected '=' for const.");const r=this._short_circuit_or_expression();return new ui(e,n,null,null,r)}return null}_increment_decrement_statement(){const e=this._current,n=this._unary_expression();if(n==null)return null;if(!this._check(y.increment_operators))return this._current=e,null;const r=this._consume(y.increment_operators,"Expected increment operator");return new Nd(r.type===y.tokens.plus_plus?Ar.increment:Ar.decrement,n)}_assignment_statement(){let e=null;if(this._check(y.tokens.brace_right))return null;let n=this._match(y.tokens.underscore);if(n||(e=this._unary_expression()),!n&&e==null)return null;const r=this._consume(y.assignment_operators,"Expected assignment operator."),s=this._short_circuit_or_expression();return new Id(jr.parse(r.lexeme),e,s)}_func_call_statement(){if(!this._check(y.tokens.ident))return null;const e=this._current,n=this._consume(y.tokens.ident,"Expected function name."),r=this._argument_expression_list();return r===null?(this._current=e,null):new Wi(n.lexeme,r)}_loop_statement(){if(!this._match(y.keywords.loop))return null;this._check(y.tokens.attr)&&this._attribute(),this._consume(y.tokens.brace_left,"Expected '{' for loop.");const e=[];let n=this._statement();for(;n!==null;){if(Array.isArray(n))for(let s of n)e.push(s);else e.push(n);n=this._statement()}let r=null;return this._match(y.keywords.continuing)&&(r=this._compound_statement()),this._consume(y.tokens.brace_right,"Expected '}' for loop."),new $d(e,r)}_switch_statement(){if(!this._match(y.keywords.switch))return null;const e=this._optional_paren_expression();this._check(y.tokens.attr)&&this._attribute(),this._consume(y.tokens.brace_left,"Expected '{' for switch.");const n=this._switch_body();if(n==null||n.length==0)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(y.tokens.brace_right,"Expected '}' for switch."),new zd(e,n)}_switch_body(){const e=[];if(this._match(y.keywords.case)){const n=this._case_selectors();this._match(y.tokens.colon),this._check(y.tokens.attr)&&this._attribute(),this._consume(y.tokens.brace_left,"Exected '{' for switch case.");const r=this._case_body();this._consume(y.tokens.brace_right,"Exected '}' for switch case."),e.push(new Xd(n,r))}if(this._match(y.keywords.default)){this._match(y.tokens.colon),this._check(y.tokens.attr)&&this._attribute(),this._consume(y.tokens.brace_left,"Exected '{' for switch default.");const n=this._case_body();this._consume(y.tokens.brace_right,"Exected '}' for switch default."),e.push(new Jd(n))}if(this._check([y.keywords.default,y.keywords.case])){const n=this._switch_body();e.push(n[0])}return e}_case_selectors(){const e=[this._shift_expression()];for(;this._match(y.tokens.comma);)e.push(this._shift_expression());return e}_case_body(){if(this._match(y.keywords.fallthrough))return this._consume(y.tokens.semicolon,"Expected ';'"),[];let e=this._statement();if(e==null)return[];e instanceof Array||(e=[e]);const n=this._case_body();return n.length==0?e:[...e,n[0]]}_if_statement(){if(!this._match(y.keywords.if))return null;const e=this._optional_paren_expression();this._check(y.tokens.attr)&&this._attribute();const n=this._compound_statement();let r=[];this._match_elseif()&&(this._check(y.tokens.attr)&&this._attribute(),r=this._elseif_statement(r));let s=null;return this._match(y.keywords.else)&&(this._check(y.tokens.attr)&&this._attribute(),s=this._compound_statement()),new Od(e,n,r,s)}_match_elseif(){return this._tokens[this._current].type===y.keywords.else&&this._tokens[this._current+1].type===y.keywords.if?(this._advance(),this._advance(),!0):!1}_elseif_statement(e=[]){const n=this._optional_paren_expression(),r=this._compound_statement();return e.push(new Kd(n,r)),this._match_elseif()&&(this._check(y.tokens.attr)&&this._attribute(),this._elseif_statement(e)),e}_return_statement(){if(!this._match(y.keywords.return))return null;const e=this._short_circuit_or_expression();return new Pd(e)}_short_circuit_or_expression(){let e=this._short_circuit_and_expr();for(;this._match(y.tokens.or_or);)e=new on(this._previous().toString(),e,this._short_circuit_and_expr());return e}_short_circuit_and_expr(){let e=this._inclusive_or_expression();for(;this._match(y.tokens.and_and);)e=new on(this._previous().toString(),e,this._inclusive_or_expression());return e}_inclusive_or_expression(){let e=this._exclusive_or_expression();for(;this._match(y.tokens.or);)e=new on(this._previous().toString(),e,this._exclusive_or_expression());return e}_exclusive_or_expression(){let e=this._and_expression();for(;this._match(y.tokens.xor);)e=new on(this._previous().toString(),e,this._and_expression());return e}_and_expression(){let e=this._equality_expression();for(;this._match(y.tokens.and);)e=new on(this._previous().toString(),e,this._equality_expression());return e}_equality_expression(){const e=this._relational_expression();return this._match([y.tokens.equal_equal,y.tokens.not_equal])?new on(this._previous().toString(),e,this._relational_expression()):e}_relational_expression(){let e=this._shift_expression();for(;this._match([y.tokens.less_than,y.tokens.greater_than,y.tokens.less_than_equal,y.tokens.greater_than_equal]);)e=new on(this._previous().toString(),e,this._shift_expression());return e}_shift_expression(){let e=this._additive_expression();for(;this._match([y.tokens.shift_left,y.tokens.shift_right]);)e=new on(this._previous().toString(),e,this._additive_expression());return e}_additive_expression(){let e=this._multiplicative_expression();for(;this._match([y.tokens.plus,y.tokens.minus]);)e=new on(this._previous().toString(),e,this._multiplicative_expression());return e}_multiplicative_expression(){let e=this._unary_expression();for(;this._match([y.tokens.star,y.tokens.forward_slash,y.tokens.modulo]);)e=new on(this._previous().toString(),e,this._unary_expression());return e}_unary_expression(){return this._match([y.tokens.minus,y.tokens.bang,y.tokens.tilde,y.tokens.star,y.tokens.and])?new Yd(this._previous().toString(),this._unary_expression()):this._singular_expression()}_singular_expression(){const e=this._primary_expression(),n=this._postfix_expression();return n&&(e.postfix=n),e}_postfix_expression(){if(this._match(y.tokens.bracket_left)){const e=this._short_circuit_or_expression();this._consume(y.tokens.bracket_right,"Expected ']'.");const n=new Hd(e),r=this._postfix_expression();return r&&(n.postfix=r),n}if(this._match(y.tokens.period)){const e=this._consume(y.tokens.ident,"Expected member name."),n=this._postfix_expression(),r=new ii(e.lexeme);return n&&(r.postfix=n),r}return null}_getStruct(e){return this._context.aliases.has(e)?this._context.aliases.get(e).type:this._context.structs.has(e)?this._context.structs.get(e):null}_primary_expression(){if(this._match(y.tokens.ident)){const r=this._previous().toString();if(this._check(y.tokens.paren_left)){const s=this._argument_expression_list(),i=this._getStruct(r);return i!=null?new yr(i,s):new Ji(r,s)}if(this._context.constants.has(r)){const s=this._context.constants.get(r);return new oi(r,s.value)}return new Fa(r)}if(this._match(y.const_literal))return new ci(parseFloat(this._previous().toString()));if(this._check(y.tokens.paren_left))return this._paren_expression();if(this._match(y.keywords.bitcast)){this._consume(y.tokens.less_than,"Expected '<'.");const r=this._type_decl();this._consume(y.tokens.greater_than,"Expected '>'.");const s=this._paren_expression();return new Gd(r,s)}const e=this._type_decl(),n=this._argument_expression_list();return new Wd(e,n)}_argument_expression_list(){if(!this._match(y.tokens.paren_left))return null;const e=[];do{if(this._check(y.tokens.paren_right))break;const n=this._short_circuit_or_expression();e.push(n)}while(this._match(y.tokens.comma));return this._consume(y.tokens.paren_right,"Expected ')' for agument list"),e}_optional_paren_expression(){this._match(y.tokens.paren_left);const e=this._short_circuit_or_expression();return this._match(y.tokens.paren_right),new li([e])}_paren_expression(){this._consume(y.tokens.paren_left,"Expected '('.");const e=this._short_circuit_or_expression();return this._consume(y.tokens.paren_right,"Expected ')'."),new li([e])}_struct_decl(){if(!this._match(y.keywords.struct))return null;const e=this._currentLine,n=this._consume(y.tokens.ident,"Expected name for struct.").toString();this._consume(y.tokens.brace_left,"Expected '{' for struct body.");const r=[];for(;!this._check(y.tokens.brace_right);){const m=this._attribute(),v=this._consume(y.tokens.ident,"Expected variable name.").toString();this._consume(y.tokens.colon,"Expected ':' for struct member type.");const F=this._attribute(),T=this._type_decl();T!=null&&(T.attributes=F),this._check(y.tokens.brace_right)?this._match(y.tokens.comma):this._consume(y.tokens.comma,"Expected ',' for struct member."),r.push(new eh(v,T,m))}this._consume(y.tokens.brace_right,"Expected '}' after struct body.");const s=this._currentLine,i=new Un(n,r,e,s);return this._context.structs.set(n,i),i}_global_variable_decl(){const e=this._variable_decl();return e&&this._match(y.tokens.equal)&&(e.value=this._const_expression()),e}_override_variable_decl(){const e=this._override_decl();return e&&this._match(y.tokens.equal)&&(e.value=this._const_expression()),e}_global_const_decl(){if(!this._match(y.keywords.const))return null;const e=this._consume(y.tokens.ident,"Expected variable name");let n=null;if(this._match(y.tokens.colon)){const i=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=i)}let r=null;if(this._match(y.tokens.equal)){const i=this._short_circuit_or_expression();if(i instanceof yr)r=i;else if(i instanceof oi&&i.initializer instanceof yr)r=i.initializer;else try{const m=i.evaluate(this._context);r=new ci(m)}catch{r=i}}const s=new ui(e.toString(),n,"","",r);return this._context.constants.set(s.name,s),s}_global_let_decl(){if(!this._match(y.keywords.let))return null;const e=this._consume(y.tokens.ident,"Expected variable name");let n=null;if(this._match(y.tokens.colon)){const s=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=s)}let r=null;return this._match(y.tokens.equal)&&(r=this._const_expression()),new Ea(e.toString(),n,"","",r)}_const_expression(){if(this._match(y.const_literal))return new ii(this._previous().toString());const e=this._type_decl();this._consume(y.tokens.paren_left,"Expected '('.");let n=[];for(;!this._check(y.tokens.paren_right)&&(n.push(this._const_expression()),!!this._check(y.tokens.comma));)this._advance();return this._consume(y.tokens.paren_right,"Expected ')'."),new yr(e,n)}_variable_decl(){if(!this._match(y.keywords.var))return null;let e="",n="";this._match(y.tokens.less_than)&&(e=this._consume(y.storage_class,"Expected storage_class.").toString(),this._match(y.tokens.comma)&&(n=this._consume(y.access_mode,"Expected access_mode.").toString()),this._consume(y.tokens.greater_than,"Expected '>'."));const r=this._consume(y.tokens.ident,"Expected variable name");let s=null;if(this._match(y.tokens.colon)){const i=this._attribute();s=this._type_decl(),s!=null&&(s.attributes=i)}return new Wn(r.toString(),s,e,n,null)}_override_decl(){if(!this._match(y.keywords.override))return null;const e=this._consume(y.tokens.ident,"Expected variable name");let n=null;if(this._match(y.tokens.colon)){const r=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=r)}return new Gi(e.toString(),n,null)}_diagnostic(){this._consume(y.tokens.paren_left,"Expected '('");const e=this._consume(y.tokens.ident,"Expected severity control name.");this._consume(y.tokens.comma,"Expected ','");const n=this._consume(y.tokens.ident,"Expected diagnostic rule name.");return this._consume(y.tokens.paren_right,"Expected ')'"),new Ld(e.toString(),n.toString())}_enable_directive(){const e=this._consume(y.tokens.ident,"identity expected.");return new qd(e.toString())}_requires_directive(){const e=[this._consume(y.tokens.ident,"identity expected.").toString()];for(;this._match(y.tokens.comma);){const n=this._consume(y.tokens.ident,"identity expected.");e.push(n.toString())}return new Vd(e)}_type_alias(){const e=this._consume(y.tokens.ident,"identity expected.");this._consume(y.tokens.equal,"Expected '=' for type alias.");let n=this._type_decl();if(n===null)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(n.name)&&(n=this._context.aliases.get(n.name).type);const r=new Hi(e.toString(),n);return this._context.aliases.set(r.name,r),r}_type_decl(){if(this._check([y.tokens.ident,...y.texel_format,y.keywords.bool,y.keywords.f32,y.keywords.i32,y.keywords.u32])){const r=this._advance(),s=r.toString();return this._context.structs.has(s)?this._context.structs.get(s):this._context.aliases.has(s)?this._context.aliases.get(s).type:new Kn(r.toString())}let e=this._texture_sampler_types();if(e)return e;if(this._check(y.template_types)){let r=this._advance().toString(),s=null,i=null;return this._match(y.tokens.less_than)&&(s=this._type_decl(),i=null,this._match(y.tokens.comma)&&(i=this._consume(y.access_mode,"Expected access_mode for pointer").toString()),this._consume(y.tokens.greater_than,"Expected '>' for type.")),new Yi(r,s,i)}if(this._match(y.keywords.ptr)){let r=this._previous().toString();this._consume(y.tokens.less_than,"Expected '<' for pointer.");const s=this._consume(y.storage_class,"Expected storage_class for pointer");this._consume(y.tokens.comma,"Expected ',' for pointer.");const i=this._type_decl();let m=null;return this._match(y.tokens.comma)&&(m=this._consume(y.access_mode,"Expected access_mode for pointer").toString()),this._consume(y.tokens.greater_than,"Expected '>' for pointer."),new Ud(r,s.toString(),i,m)}const n=this._attribute();if(this._match(y.keywords.array)){let r=null,s=-1;const i=this._previous();let m=null;if(this._match(y.tokens.less_than)){r=this._type_decl(),this._context.aliases.has(r.name)&&(r=this._context.aliases.get(r.name).type);let F="";if(this._match(y.tokens.comma)){m=this._shift_expression();try{F=m.evaluate(this._context).toString(),m=null}catch{F="1"}}this._consume(y.tokens.greater_than,"Expected '>' for array."),s=F?parseInt(F):0}const v=new Xi(i.toString(),n,r,s);return m&&this._deferArrayCountEval.push({arrayType:v,countNode:m}),v}return null}_texture_sampler_types(){if(this._match(y.sampler_type))return new Pr(this._previous().toString(),null,null);if(this._match(y.depth_texture_type))return new Pr(this._previous().toString(),null,null);if(this._match(y.sampled_texture_type)||this._match(y.multisampled_texture_type)){const e=this._previous();this._consume(y.tokens.less_than,"Expected '<' for sampler type.");const n=this._type_decl();return this._consume(y.tokens.greater_than,"Expected '>' for sampler type."),new Pr(e.toString(),n,null)}if(this._match(y.storage_texture_type)){const e=this._previous();this._consume(y.tokens.less_than,"Expected '<' for sampler type.");const n=this._consume(y.texel_format,"Invalid texel format.").toString();this._consume(y.tokens.comma,"Expected ',' after texel format.");const r=this._consume(y.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(y.tokens.greater_than,"Expected '>' for sampler type."),new Pr(e.toString(),n,r)}return null}_attribute(){let e=[];for(;this._match(y.tokens.attr);){const n=this._consume(y.attribute_name,"Expected attribute name"),r=new fi(n.toString(),null);if(this._match(y.tokens.paren_left)){if(r.value=this._consume(y.literal_or_ident,"Expected attribute value").toString(),this._check(y.tokens.comma)){this._advance();do{const s=this._consume(y.literal_or_ident,"Expected attribute value").toString();r.value instanceof Array||(r.value=[r.value]),r.value.push(s)}while(this._match(y.tokens.comma))}this._consume(y.tokens.paren_right,"Expected ')'")}e.push(r)}for(;this._match(y.tokens.attr_left);){if(!this._check(y.tokens.attr_right))do{const n=this._consume(y.attribute_name,"Expected attribute name"),r=new fi(n.toString(),null);if(this._match(y.tokens.paren_left)){if(r.value=[this._consume(y.literal_or_ident,"Expected attribute value").toString()],this._check(y.tokens.comma)){this._advance();do{const s=this._consume(y.literal_or_ident,"Expected attribute value").toString();r.value.push(s)}while(this._match(y.tokens.comma))}this._consume(y.tokens.paren_right,"Expected ')'")}e.push(r)}while(this._match(y.tokens.comma));this._consume(y.tokens.attr_right,"Expected ']]' after attribute declarations")}return e.length==0?null:e}}class br{constructor(e,n){this.name=e,this.attributes=n,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}}class hi{constructor(e,n,r){this.name=e,this.type=n,this.attributes=r,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray?this.type.format:this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class vs extends br{constructor(e,n){super(e,n),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}}class da extends br{constructor(e,n){super(e,n),this.count=0,this.stride=0}get isArray(){return!0}}class pi extends br{constructor(e,n,r,s){super(e,r),this.format=n,this.access=s}get isTemplate(){return!0}}var yt;(function(t){t[t.Uniform=0]="Uniform",t[t.Storage=1]="Storage",t[t.Texture=2]="Texture",t[t.Sampler=3]="Sampler",t[t.StorageTexture=4]="StorageTexture"})(yt||(yt={}));class ys{constructor(e,n,r,s,i,m,v){this.name=e,this.type=n,this.group=r,this.binding=s,this.attributes=i,this.resourceType=m,this.access=v}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray?this.type.format:this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class rh{constructor(e,n){this.name=e,this.type=n}}class Ds{constructor(e,n){this.align=e,this.size=n}}class sh{constructor(e,n,r,s){this.name=e,this.type=n,this.locationType=r,this.location=s,this.interpolation=null}}class mi{constructor(e,n,r,s){this.name=e,this.type=n,this.locationType=r,this.location=s}}class ah{constructor(e,n=null){this.stage=null,this.inputs=[],this.outputs=[],this.resources=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=e,this.stage=n}}class uh{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}class ih{constructor(e,n,r,s){this.name=e,this.type=n,this.attributes=r,this.id=s}}class oh{constructor(e){this.resources=null,this.inUse=!1,this.info=null,this.node=e}}class bn{constructor(e){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new uh,this.functions=[],this._types=new Map,this._functions=new Map,e&&this.update(e)}_isStorageTexture(e){return e.name=="texture_storage_1d"||e.name=="texture_storage_2d"||e.name=="texture_storage_2d_array"||e.name=="texture_storage_3d"}update(e){const r=new nh().parse(e);for(const s of r)s instanceof Aa&&this._functions.set(s.name,new oh(s));for(const s of r)if(s instanceof Un){const i=this._getTypeInfo(s,null);i instanceof vs&&this.structs.push(i)}for(const s of r){if(s instanceof Hi){this.aliases.push(this._getAliasInfo(s));continue}if(s instanceof Gi){const i=s,m=this._getAttributeNum(i.attributes,"id",0),v=i.type!=null?this._getTypeInfo(i.type,i.attributes):null;this.overrides.push(new ih(i.name,v,i.attributes,m));continue}if(this._isUniformVar(s)){const i=s,m=this._getAttributeNum(i.attributes,"group",0),v=this._getAttributeNum(i.attributes,"binding",0),F=this._getTypeInfo(i.type,i.attributes),T=new ys(i.name,F,m,v,i.attributes,yt.Uniform,i.access);this.uniforms.push(T);continue}if(this._isStorageVar(s)){const i=s,m=this._getAttributeNum(i.attributes,"group",0),v=this._getAttributeNum(i.attributes,"binding",0),F=this._getTypeInfo(i.type,i.attributes),T=this._isStorageTexture(F),R=new ys(i.name,F,m,v,i.attributes,T?yt.StorageTexture:yt.Storage,i.access);this.storage.push(R);continue}if(this._isTextureVar(s)){const i=s,m=this._getAttributeNum(i.attributes,"group",0),v=this._getAttributeNum(i.attributes,"binding",0),F=this._getTypeInfo(i.type,i.attributes),T=this._isStorageTexture(F),R=new ys(i.name,F,m,v,i.attributes,T?yt.StorageTexture:yt.Texture,i.access);T?this.storage.push(R):this.textures.push(R);continue}if(this._isSamplerVar(s)){const i=s,m=this._getAttributeNum(i.attributes,"group",0),v=this._getAttributeNum(i.attributes,"binding",0),F=this._getTypeInfo(i.type,i.attributes),T=new ys(i.name,F,m,v,i.attributes,yt.Sampler,i.access);this.samplers.push(T);continue}if(s instanceof Aa){const i=this._getAttribute(s,"vertex"),m=this._getAttribute(s,"fragment"),v=this._getAttribute(s,"compute"),F=i||m||v,T=new ah(s.name,F==null?void 0:F.name);T.startLine=s.startLine,T.endLine=s.endLine,this.functions.push(T),this._functions.get(s.name).info=T,F&&(this._functions.get(s.name).inUse=!0,T.inUse=!0,T.resources=this._findResources(s,!!F),T.inputs=this._getInputs(s.args),T.outputs=this._getOutputs(s.returnType),this.entry[F.name].push(T));continue}}for(const s of this._functions.values())s.info&&(s.info.inUse=s.inUse,this._addCalls(s.node,s.info.calls));for(const s of this.uniforms)this._markStructsInUse(s.type);for(const s of this.storage)this._markStructsInUse(s.type)}_markStructsInUse(e){if(e.isStruct){e.inUse=!0;for(const n of e.members)this._markStructsInUse(n.type)}else if(e.isArray)this._markStructsInUse(e.format);else if(e.isTemplate)this._markStructsInUse(e.format);else{const n=this._getAlias(e.name);n&&this._markStructsInUse(n)}}_addCalls(e,n){var r;for(const s of e.calls){const i=(r=this._functions.get(s.name))===null||r===void 0?void 0:r.info;i&&n.add(i)}}findResource(e,n){for(const r of this.uniforms)if(r.group==e&&r.binding==n)return r;for(const r of this.storage)if(r.group==e&&r.binding==n)return r;for(const r of this.textures)if(r.group==e&&r.binding==n)return r;for(const r of this.samplers)if(r.group==e&&r.binding==n)return r;return null}_findResource(e){for(const n of this.uniforms)if(n.name==e)return n;for(const n of this.storage)if(n.name==e)return n;for(const n of this.textures)if(n.name==e)return n;for(const n of this.samplers)if(n.name==e)return n;return null}_markStructsFromAST(e){const n=this._getTypeInfo(e,null);this._markStructsInUse(n)}_findResources(e,n){const r=[],s=this,i=[];return e.search(m=>{if(m instanceof xs)i.push({});else if(m instanceof As)i.pop();else if(m instanceof Wn){const v=m;n&&v.type!==null&&this._markStructsFromAST(v.type),i.length>0&&(i[i.length-1][v.name]=v)}else if(m instanceof yr){const v=m;n&&v.type!==null&&this._markStructsFromAST(v.type)}else if(m instanceof Ea){const v=m;n&&v.type!==null&&this._markStructsFromAST(v.type),i.length>0&&(i[i.length-1][v.name]=v)}else if(m instanceof Fa){const v=m;if(i.length>0&&i[i.length-1][v.name])return;const F=s._findResource(v.name);F&&r.push(F)}else if(m instanceof Ji){const v=m,F=s._functions.get(v.name);F&&(n&&(F.inUse=!0),e.calls.add(F.node),F.resources===null&&(F.resources=s._findResources(F.node,n)),r.push(...F.resources))}else if(m instanceof Wi){const v=m,F=s._functions.get(v.name);F&&(n&&(F.inUse=!0),e.calls.add(F.node),F.resources===null&&(F.resources=s._findResources(F.node,n)),r.push(...F.resources))}}),[...new Map(r.map(m=>[m.name,m])).values()]}getBindGroups(){const e=[];function n(r,s){r>=e.length&&(e.length=r+1),e[r]===void 0&&(e[r]=[]),s>=e[r].length&&(e[r].length=s+1)}for(const r of this.uniforms){n(r.group,r.binding);const s=e[r.group];s[r.binding]=r}for(const r of this.storage){n(r.group,r.binding);const s=e[r.group];s[r.binding]=r}for(const r of this.textures){n(r.group,r.binding);const s=e[r.group];s[r.binding]=r}for(const r of this.samplers){n(r.group,r.binding);const s=e[r.group];s[r.binding]=r}return e}_getOutputs(e,n=void 0){if(n===void 0&&(n=[]),e instanceof Un)this._getStructOutputs(e,n);else{const r=this._getOutputInfo(e);r!==null&&n.push(r)}return n}_getStructOutputs(e,n){for(const r of e.members)if(r.type instanceof Un)this._getStructOutputs(r.type,n);else{const s=this._getAttribute(r,"location")||this._getAttribute(r,"builtin");if(s!==null){const i=this._getTypeInfo(r.type,r.type.attributes),m=this._parseInt(s.value),v=new mi(r.name,i,s.name,m);n.push(v)}}}_getOutputInfo(e){const n=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(n!==null){const r=this._getTypeInfo(e,e.attributes),s=this._parseInt(n.value);return new mi("",r,n.name,s)}return null}_getInputs(e,n=void 0){n===void 0&&(n=[]);for(const r of e)if(r.type instanceof Un)this._getStructInputs(r.type,n);else{const s=this._getInputInfo(r);s!==null&&n.push(s)}return n}_getStructInputs(e,n){for(const r of e.members)if(r.type instanceof Un)this._getStructInputs(r.type,n);else{const s=this._getInputInfo(r);s!==null&&n.push(s)}}_getInputInfo(e){const n=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(n!==null){const r=this._getAttribute(e,"interpolation"),s=this._getTypeInfo(e.type,e.attributes),i=this._parseInt(n.value),m=new sh(e.name,s,n.name,i);return r!==null&&(m.interpolation=this._parseString(r.value)),m}return null}_parseString(e){return e instanceof Array&&(e=e[0]),e}_parseInt(e){e instanceof Array&&(e=e[0]);const n=parseInt(e);return isNaN(n)?e:n}_getAlias(e){for(const n of this.aliases)if(n.name==e)return n.type;return null}_getAliasInfo(e){return new rh(e.name,this._getTypeInfo(e.type,null))}_getTypeInfo(e,n){if(this._types.has(e))return this._types.get(e);if(e instanceof Xi){const s=e,i=this._getTypeInfo(s.format,s.attributes),m=new da(s.name,n);return m.format=i,m.count=s.count,this._types.set(e,m),this._updateTypeInfo(m),m}if(e instanceof Un){const s=e,i=new vs(s.name,n);i.startLine=s.startLine,i.endLine=s.endLine;for(const m of s.members){const v=this._getTypeInfo(m.type,m.attributes);i.members.push(new hi(m.name,v,m.attributes))}return this._types.set(e,i),this._updateTypeInfo(i),i}if(e instanceof Pr){const s=e,i=s.format instanceof Kn,m=s.format?i?this._getTypeInfo(s.format,null):new br(s.format,null):null,v=new pi(s.name,m,n,s.access);return this._types.set(e,v),this._updateTypeInfo(v),v}if(e instanceof Yi){const s=e,i=s.format?this._getTypeInfo(s.format,null):null,m=new pi(s.name,i,n,s.access);return this._types.set(e,m),this._updateTypeInfo(m),m}const r=new br(e.name,n);return this._types.set(e,r),this._updateTypeInfo(r),r}_updateTypeInfo(e){var n,r;const s=this._getTypeSize(e);if(e.size=(n=s==null?void 0:s.size)!==null&&n!==void 0?n:0,e instanceof da){const i=this._getTypeSize(e.format);e.stride=(r=i==null?void 0:i.size)!==null&&r!==void 0?r:0,this._updateTypeInfo(e.format)}e instanceof vs&&this._updateStructInfo(e)}_updateStructInfo(e){var n;let r=0,s=0,i=0,m=0;for(let v=0,F=e.members.length;v<F;++v){const T=e.members[v],R=this._getTypeSize(T);if(!R)continue;(n=this._getAlias(T.type.name))!==null&&n!==void 0||T.type;const W=R.align,ie=R.size;r=this._roundUp(W,r+s),s=ie,i=r,m=Math.max(m,W),T.offset=r,T.size=ie,this._updateTypeInfo(T.type)}e.size=this._roundUp(m,i+s),e.align=m}_getTypeSize(e){var n;if(e==null)return null;const r=this._getAttributeNum(e.attributes,"size",0),s=this._getAttributeNum(e.attributes,"align",0);if(e instanceof hi&&(e=e.type),e instanceof br){const i=this._getAlias(e.name);i!==null&&(e=i)}{const i=bn._typeInfo[e.name];if(i!==void 0){const m=e.format==="f16"?2:1;return new Ds(Math.max(s,i.align/m),Math.max(r,i.size/m))}}{const i=bn._typeInfo[e.name.substring(0,e.name.length-1)];if(i){const m=e.name[e.name.length-1]==="h"?2:1;return new Ds(Math.max(s,i.align/m),Math.max(r,i.size/m))}}if(e instanceof da){let i=e,m=8,v=8;const F=this._getTypeSize(i.format);F!==null&&(v=F.size,m=F.align);const T=i.count,R=this._getAttributeNum((n=e==null?void 0:e.attributes)!==null&&n!==void 0?n:null,"stride",this._roundUp(m,v));return v=T*R,r&&(v=r),new Ds(Math.max(s,m),Math.max(r,v))}if(e instanceof vs){let i=0,m=0,v=0,F=0,T=0;for(const R of e.members){const W=this._getTypeSize(R.type);W!==null&&(i=Math.max(W.align,i),v=this._roundUp(W.align,v+F),F=W.size,T=v)}return m=this._roundUp(i,T+F),new Ds(Math.max(s,i),Math.max(r,m))}return null}_isUniformVar(e){return e instanceof Wn&&e.storage=="uniform"}_isStorageVar(e){return e instanceof Wn&&e.storage=="storage"}_isTextureVar(e){return e instanceof Wn&&e.type!==null&&bn._textureTypes.indexOf(e.type.name)!=-1}_isSamplerVar(e){return e instanceof Wn&&e.type!==null&&bn._samplerTypes.indexOf(e.type.name)!=-1}_getAttribute(e,n){const r=e;if(!r||!r.attributes)return null;const s=r.attributes;for(let i of s)if(i.name==n)return i;return null}_getAttributeNum(e,n,r){if(e===null)return r;for(let s of e)if(s.name==n){let i=s!==null&&s.value!==null?s.value:r;return i instanceof Array&&(i=i[0]),typeof i=="number"?i:typeof i=="string"?parseInt(i):r}return r}_roundUp(e,n){return Math.ceil(n/e)*e}}bn._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}};bn._textureTypes=y.any_texture_type.map(t=>t.name);bn._samplerTypes=y.sampler_type.map(t=>t.name);function gr(t,e){return Object.fromEntries(e.map(n=>{const r=hh(t,n,0);return[n.name,{typeDefinition:r,group:n.group,binding:n.binding,size:r.size}]}))}function eo(t,e,n){return{fields:Object.fromEntries(e.members.map(s=>[s.name,{offset:s.offset,type:Oa(t,s.type,0)}])),size:e.size,offset:n}}function ch(t){var e;if(t.name.includes("depth"))return"depth";switch((e=t.format)==null?void 0:e.name){case"f32":return"float";case"i32":return"sint";case"u32":return"uint";default:throw new Error("unknown texture sample type")}}function gi(t){return t.name.includes("2d_array")?"2d-array":t.name.includes("cube_array")?"cube-array":t.name.includes("3d")?"3d":t.name.includes("1d")?"1d":t.name.includes("cube")?"cube":"2d"}function lh(t){switch(t.access){case"read":return"read-only";case"write":return"write-only";case"read_write":return"read-write";default:throw new Error("unknonw storage texture access")}}function fh(t){return t.name.endsWith("_comparison")?"comparison":"filtering"}function dh(t,e){const{binding:n,access:r,type:s}=t;switch(t.resourceType){case yt.Uniform:return{binding:n,visibility:e,buffer:{...t.size&&{minBindingSize:t.size}}};case yt.Storage:return{binding:n,visibility:e,buffer:{type:r===""||r==="read"?"read-only-storage":"storage",...t.size&&{minBindingSize:t.size}}};case yt.Texture:{if(s.name==="texture_external")return{binding:n,visibility:e,externalTexture:{}};const i=s.name.includes("multisampled");return{binding:n,visibility:e,texture:{sampleType:ch(s),viewDimension:gi(s),multisampled:i}}}case yt.Sampler:return{binding:n,visibility:e,sampler:{type:fh(s)}};case yt.StorageTexture:return{binding:n,visibility:e,storageTexture:{access:lh(s),format:s.format.name,viewDimension:gi(s)}};default:throw new Error("unknown resource type")}}function ha(t,e){const n={};for(const r of t)n[r.name]={stage:e,resources:r.resources.map(s=>{const{name:i,group:m}=s;return{name:i,group:m,entry:dh(s,e)}})};return n}function gp(t){const e=new bn(t),n=Object.fromEntries(e.structs.map(R=>[R.name,eo(e,R,0)])),r=gr(e,e.uniforms),s=gr(e,e.storage.filter(R=>R.resourceType===yt.Storage)),i=gr(e,e.storage.filter(R=>R.resourceType===yt.StorageTexture)),m=gr(e,e.textures.filter(R=>R.type.name!=="texture_external")),v=gr(e,e.textures.filter(R=>R.type.name==="texture_external")),F=gr(e,e.samplers),T={...ha(e.entry.vertex,GPUShaderStage.VERTEX),...ha(e.entry.fragment,GPUShaderStage.FRAGMENT),...ha(e.entry.compute,GPUShaderStage.COMPUTE)};return{externalTextures:v,samplers:F,structs:n,storages:s,storageTextures:i,textures:m,uniforms:r,entryPoints:T}}function pa(t,e=""){if(!t)throw new Error(e)}function hh(t,e,n){switch(e.resourceType){case yt.Uniform:case yt.Storage:case yt.StorageTexture:return Oa(t,e.type,n);default:return{size:0,type:e.type.name}}}function Oa(t,e,n){if(e.isArray){pa(!e.isStruct,"struct array is invalid"),pa(!e.isStruct,"template array is invalid");const r=e;return{size:r.size,elementType:Oa(t,r.format,n),numElements:r.count}}else{if(e.isStruct)return pa(!e.isTemplate,"template struct is invalid"),eo(t,e,n);{const r=e,s=e.isTemplate?`${r.name}<${r.format.name}>`:e.name;return{size:e.size,type:s}}}}const to=new Map([[Int8Array,{formats:["sint8","snorm8"],defaultForType:1}],[Uint8Array,{formats:["uint8","unorm8"],defaultForType:1}],[Int16Array,{formats:["sint16","snorm16"],defaultForType:1}],[Uint16Array,{formats:["uint16","unorm16"],defaultForType:1}],[Int32Array,{formats:["sint32","snorm32"],defaultForType:0}],[Uint32Array,{formats:["uint32","unorm32"],defaultForType:0}],[Float32Array,{formats:["float32","float32"],defaultForType:0}]]),ph=new Map([...to.entries()].map(([t,{formats:[e,n]}])=>[[e,t],[n,t]]).flat());function Pa(t){return t==="indices"}function no(t,e){if(Rr(t))return t;let n=t;if(Rr(n.data))return n.data;(Array.isArray(t)||typeof t=="number")&&(n={data:t});let r=n.type;return r||(Pa(e)?r=Uint32Array:r=Float32Array),new r(n.data)}function mh(t){return t.length?t:t.data}const gh=[{re:/coord|texture|uv/i,numComponents:2},{re:/color|colour/i,numComponents:4}];function _h(t){for(const{re:e,numComponents:n}of gh)if(e.test(t))return n;return 3}function vh(t,e){const n=_h(t);if(e%n>0)throw new Error(`Can not guess numComponents for attribute '${t}'. Tried ${n} but ${e} values is not evenly divisible by ${n}. You should specify it.`);return n}function yh(t,e){return t.numComponents||vh(e,mh(t).length)}const Dh=/(\w+)(?:x(\d))$/;function ro(t){const e=Dh.exec(t),[n,r]=e?[e[1],parseInt(e[2])]:[t,1];return{Type:ph.get(n),numComponents:r}}function _i(t,e){const n=Object.getPrototypeOf(t).constructor;return new n(e)}function wh(t,e={}){const n=e.interleave===void 0?!0:e.interleave,r=e.stepMode||"vertex",s=e.shaderLocation?Array.isArray(e.shaderLocation)?e.shaderLocation:[e.shaderLocation]:[0];let i=0;const m=[],v=[],F=[];return Object.keys(t).filter(T=>!Pa(T)).forEach(T=>{const R=t[T],W=no(R,T),ie=yh(R,T),te=ie/4,se=ie/3,N=te%1===0?4:se%1===0?3:4;for(let Y=0;Y<ie;Y+=N){const K=Math.min(N,ie-Y),ne=i;i+=K*W.BYTES_PER_ELEMENT;const{defaultForType:he,formats:me}=to.get(Object.getPrototypeOf(W).constructor),ve=R.normalize,Ke=`${me[typeof ve>"u"?he:ve?1:0]}${K>1?`x${K}`:""}`,Ie=s.shift();s.length===0&&s.push(Ie+1),v.push({offset:ne,format:Ke,shaderLocation:Ie}),F.push({data:W,offset:Y,stride:ie})}n||(m.push({stepMode:r,arrayStride:i,attributes:v.slice()}),i=0,v.length=0)}),v.length&&m.push({stepMode:r,arrayStride:i,attributes:v}),{bufferLayouts:m,typedArrays:F}}function so(t,e){return Rr(t)?{data:t,offset:0,stride:e}:t}function bh(t,e,n,r){const s=new Map,i=m=>{const v=Object.getPrototypeOf(m).constructor,F=s.get(v);if(F)return F;const T=new v(r);return s.set(v,T),T};t.forEach((m,v)=>{const{offset:F,format:T}=m,{numComponents:R}=ro(T),{data:W,offset:ie,stride:te}=so(e[v],R),se=i(W);for(let N=0;N<W.length;N+=te){const Y=N/te,K=(F+Y*n)/se.BYTES_PER_ELEMENT,ne=N+ie,he=W.subarray(ne,ne+R);se.set(he,K)}})}function kh(t,e,n={}){const r=n.usage||0,{bufferLayouts:s,typedArrays:i}=wh(e,n),m=[];let v=-1,F=0;for(const{attributes:W,arrayStride:ie}of s){const te=W,se=te[0],{numComponents:N}=ro(se.format),{data:Y,stride:K}=so(i[F],N);v<0&&(v=Y.length/K);const ne=ie*v,he=t.createBuffer({usage:r|GPUBufferUsage.VERTEX,size:ne,mappedAtCreation:!0}),me=he.getMappedRange();te.length===1&&ie===Y.BYTES_PER_ELEMENT*N?_i(Y,me).set(Y):bh(te,i.slice(F),ie,me),he.unmap(),m.push(he),F+=te.length}const T={numElements:v,bufferLayouts:s,buffers:m},R=Object.entries(e).find(([W])=>Pa(W));if(R){const W=no(R[1],"indices"),ie=t.createBuffer({size:W.byteLength,usage:GPUBufferUsage.INDEX|r,mappedAtCreation:!0});_i(W,ie.getMappedRange()).set(W),ie.unmap(),T.indexBuffer=ie,T.indexFormat=W instanceof Uint16Array?"uint16":"uint32",T.numElements=W.length}return T}var Ve;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const m of s)i[m]=m;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(v=>typeof s[s[v]]!="number"),m={};for(const v of i)m[v]=s[v];return t.objectValues(m)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const m in s)Object.prototype.hasOwnProperty.call(s,m)&&i.push(m);return i},t.find=(s,i)=>{for(const m of s)if(i(m))return m},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(m=>typeof m=="string"?`'${m}'`:m).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Ve||(Ve={}));var Ca;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Ca||(Ca={}));const oe=Ve.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Sn=t=>{switch(typeof t){case"undefined":return oe.undefined;case"string":return oe.string;case"number":return isNaN(t)?oe.nan:oe.number;case"boolean":return oe.boolean;case"function":return oe.function;case"bigint":return oe.bigint;case"symbol":return oe.symbol;case"object":return Array.isArray(t)?oe.array:t===null?oe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?oe.promise:typeof Map<"u"&&t instanceof Map?oe.map:typeof Set<"u"&&t instanceof Set?oe.set:typeof Date<"u"&&t instanceof Date?oe.date:oe.object;default:return oe.unknown}},ee=Ve.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),xh=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Yt extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const m of i.issues)if(m.code==="invalid_union")m.unionErrors.map(s);else if(m.code==="invalid_return_type")s(m.returnTypeError);else if(m.code==="invalid_arguments")s(m.argumentsError);else if(m.path.length===0)r._errors.push(n(m));else{let v=r,F=0;for(;F<m.path.length;){const T=m.path[F];F===m.path.length-1?(v[T]=v[T]||{_errors:[]},v[T]._errors.push(n(m))):v[T]=v[T]||{_errors:[]},v=v[T],F++}}};return s(this),r}static assert(e){if(!(e instanceof Yt))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ve.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Yt.create=t=>new Yt(t);const Er=(t,e)=>{let n;switch(t.code){case ee.invalid_type:t.received===oe.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ee.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Ve.jsonStringifyReplacer)}`;break;case ee.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ve.joinValues(t.keys,", ")}`;break;case ee.invalid_union:n="Invalid input";break;case ee.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ve.joinValues(t.options)}`;break;case ee.invalid_enum_value:n=`Invalid enum value. Expected ${Ve.joinValues(t.options)}, received '${t.received}'`;break;case ee.invalid_arguments:n="Invalid function arguments";break;case ee.invalid_return_type:n="Invalid function return type";break;case ee.invalid_date:n="Invalid date";break;case ee.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Ve.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ee.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ee.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ee.custom:n="Invalid input";break;case ee.invalid_intersection_types:n="Intersection results could not be merged";break;case ee.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ee.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ve.assertNever(t)}return{message:n}};let ao=Er;function Ah(t){ao=t}function Es(){return ao}const Fs=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],m={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let v="";const F=r.filter(T=>!!T).slice().reverse();for(const T of F)v=T(m,{data:e,defaultError:v}).message;return{...s,path:i,message:v}},Eh=[];function ae(t,e){const n=Es(),r=Fs({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Er?void 0:Er].filter(s=>!!s)});t.common.issues.push(r)}class Bt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return we;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,m=await s.value;r.push({key:i,value:m})}return Bt.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:m}=s;if(i.status==="aborted"||m.status==="aborted")return we;i.status==="dirty"&&e.dirty(),m.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof m.value<"u"||s.alwaysSet)&&(r[i.value]=m.value)}return{status:e.value,value:r}}}const we=Object.freeze({status:"aborted"}),Dr=t=>({status:"dirty",value:t}),Pt=t=>({status:"valid",value:t}),Ba=t=>t.status==="aborted",Sa=t=>t.status==="dirty",Ur=t=>t.status==="valid",Gr=t=>typeof Promise<"u"&&t instanceof Promise;function Cs(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function uo(t,e,n,r,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var ge;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ge||(ge={}));var qr,Vr;class dn{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const vi=(t,e)=>{if(Ur(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Yt(t.common.issues);return this._error=n,this._error}}};function ke(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(m,v)=>{var F,T;const{message:R}=t;return m.code==="invalid_enum_value"?{message:R??v.defaultError}:typeof v.data>"u"?{message:(F=R??r)!==null&&F!==void 0?F:v.defaultError}:m.code!=="invalid_type"?{message:v.defaultError}:{message:(T=R??n)!==null&&T!==void 0?T:v.defaultError}},description:s}}class Ce{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Sn(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Sn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Bt,ctx:{common:e.parent.common,data:e.data,parsedType:Sn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Gr(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Sn(e)},i=this._parseSync({data:e,path:s.path,parent:s});return vi(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Sn(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Gr(s)?s:Promise.resolve(s));return vi(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const m=e(s),v=()=>i.addIssue({code:ee.custom,...r(s)});return typeof Promise<"u"&&m instanceof Promise?m.then(F=>F?!0:(v(),!1)):m?!0:(v(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new an({schema:this,typeName:De.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ln.create(this,this._def)}nullable(){return zn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return sn.create(this,this._def)}promise(){return Cr.create(this,this._def)}or(e){return Xr.create([this,e],this._def)}and(e){return Jr.create(this,e,this._def)}transform(e){return new an({...ke(this._def),schema:this,typeName:De.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new ns({...ke(this._def),innerType:this,defaultValue:n,typeName:De.ZodDefault})}brand(){return new qa({typeName:De.ZodBranded,type:this,...ke(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new rs({...ke(this._def),innerType:this,catchValue:n,typeName:De.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return us.create(this,e)}readonly(){return ss.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Fh=/^c[^\s-]{8,}$/i,Ch=/^[0-9a-z]+$/,Bh=/^[0-9A-HJKMNP-TV-Z]{26}$/,Sh=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Th=/^[a-z0-9_-]{21}$/i,Mh=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Nh=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Ih="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let ma;const $h=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,zh=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Oh=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,io="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Ph=new RegExp(`^${io}$`);function oo(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function qh(t){return new RegExp(`^${oo(t)}$`)}function co(t){let e=`${io}T${oo(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function Vh(t,e){return!!((e==="v4"||!e)&&$h.test(t)||(e==="v6"||!e)&&zh.test(t))}class nn extends Ce{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==oe.string){const i=this._getOrReturnCtx(e);return ae(i,{code:ee.invalid_type,expected:oe.string,received:i.parsedType}),we}const r=new Bt;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ae(s,{code:ee.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ae(s,{code:ee.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const m=e.data.length>i.value,v=e.data.length<i.value;(m||v)&&(s=this._getOrReturnCtx(e,s),m?ae(s,{code:ee.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):v&&ae(s,{code:ee.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")Nh.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"email",code:ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")ma||(ma=new RegExp(Ih,"u")),ma.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"emoji",code:ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Sh.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"uuid",code:ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")Th.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"nanoid",code:ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")Fh.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"cuid",code:ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Ch.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"cuid2",code:ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")Bh.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"ulid",code:ee.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ae(s,{validation:"url",code:ee.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"regex",code:ee.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ae(s,{code:ee.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ae(s,{code:ee.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ae(s,{code:ee.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?co(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{code:ee.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?Ph.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{code:ee.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?qh(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{code:ee.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?Mh.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"duration",code:ee.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?Vh(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"ip",code:ee.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?Oh.test(e.data)||(s=this._getOrReturnCtx(e,s),ae(s,{validation:"base64",code:ee.invalid_string,message:i.message}),r.dirty()):Ve.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:ee.invalid_string,...ge.errToObj(r)})}_addCheck(e){return new nn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ge.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ge.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ge.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ge.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ge.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ge.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ge.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ge.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ge.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ge.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...ge.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ge.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ge.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ge.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ge.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ge.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ge.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ge.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ge.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ge.errToObj(n)})}nonempty(e){return this.min(1,ge.errToObj(e))}trim(){return new nn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new nn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new nn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}nn.create=t=>{var e;return new nn({checks:[],typeName:De.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...ke(t)})};function Lh(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),m=parseInt(e.toFixed(s).replace(".",""));return i%m/Math.pow(10,s)}class Nn extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==oe.number){const i=this._getOrReturnCtx(e);return ae(i,{code:ee.invalid_type,expected:oe.number,received:i.parsedType}),we}let r;const s=new Bt;for(const i of this._def.checks)i.kind==="int"?Ve.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ae(r,{code:ee.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ae(r,{code:ee.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ae(r,{code:ee.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Lh(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),ae(r,{code:ee.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ae(r,{code:ee.not_finite,message:i.message}),s.dirty()):Ve.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ge.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ge.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ge.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ge.toString(n))}setLimit(e,n,r,s){return new Nn({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ge.toString(s)}]})}_addCheck(e){return new Nn({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ge.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ge.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ge.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ge.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ge.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ge.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ge.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ge.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ge.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ve.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Nn.create=t=>new Nn({checks:[],typeName:De.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...ke(t)});class In extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==oe.bigint){const i=this._getOrReturnCtx(e);return ae(i,{code:ee.invalid_type,expected:oe.bigint,received:i.parsedType}),we}let r;const s=new Bt;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ae(r,{code:ee.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ae(r,{code:ee.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ae(r,{code:ee.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Ve.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ge.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ge.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ge.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ge.toString(n))}setLimit(e,n,r,s){return new In({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ge.toString(s)}]})}_addCheck(e){return new In({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ge.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ge.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ge.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ge.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ge.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}In.create=t=>{var e;return new In({checks:[],typeName:De.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...ke(t)})};class Wr extends Ce{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==oe.boolean){const r=this._getOrReturnCtx(e);return ae(r,{code:ee.invalid_type,expected:oe.boolean,received:r.parsedType}),we}return Pt(e.data)}}Wr.create=t=>new Wr({typeName:De.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...ke(t)});class Jn extends Ce{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==oe.date){const i=this._getOrReturnCtx(e);return ae(i,{code:ee.invalid_type,expected:oe.date,received:i.parsedType}),we}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ae(i,{code:ee.invalid_date}),we}const r=new Bt;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ae(s,{code:ee.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ae(s,{code:ee.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Ve.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Jn({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ge.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ge.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Jn.create=t=>new Jn({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:De.ZodDate,...ke(t)});class Bs extends Ce{_parse(e){if(this._getType(e)!==oe.symbol){const r=this._getOrReturnCtx(e);return ae(r,{code:ee.invalid_type,expected:oe.symbol,received:r.parsedType}),we}return Pt(e.data)}}Bs.create=t=>new Bs({typeName:De.ZodSymbol,...ke(t)});class Hr extends Ce{_parse(e){if(this._getType(e)!==oe.undefined){const r=this._getOrReturnCtx(e);return ae(r,{code:ee.invalid_type,expected:oe.undefined,received:r.parsedType}),we}return Pt(e.data)}}Hr.create=t=>new Hr({typeName:De.ZodUndefined,...ke(t)});class Yr extends Ce{_parse(e){if(this._getType(e)!==oe.null){const r=this._getOrReturnCtx(e);return ae(r,{code:ee.invalid_type,expected:oe.null,received:r.parsedType}),we}return Pt(e.data)}}Yr.create=t=>new Yr({typeName:De.ZodNull,...ke(t)});class Fr extends Ce{constructor(){super(...arguments),this._any=!0}_parse(e){return Pt(e.data)}}Fr.create=t=>new Fr({typeName:De.ZodAny,...ke(t)});class Hn extends Ce{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Pt(e.data)}}Hn.create=t=>new Hn({typeName:De.ZodUnknown,...ke(t)});class xn extends Ce{_parse(e){const n=this._getOrReturnCtx(e);return ae(n,{code:ee.invalid_type,expected:oe.never,received:n.parsedType}),we}}xn.create=t=>new xn({typeName:De.ZodNever,...ke(t)});class Ss extends Ce{_parse(e){if(this._getType(e)!==oe.undefined){const r=this._getOrReturnCtx(e);return ae(r,{code:ee.invalid_type,expected:oe.void,received:r.parsedType}),we}return Pt(e.data)}}Ss.create=t=>new Ss({typeName:De.ZodVoid,...ke(t)});class sn extends Ce{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==oe.array)return ae(n,{code:ee.invalid_type,expected:oe.array,received:n.parsedType}),we;if(s.exactLength!==null){const m=n.data.length>s.exactLength.value,v=n.data.length<s.exactLength.value;(m||v)&&(ae(n,{code:m?ee.too_big:ee.too_small,minimum:v?s.exactLength.value:void 0,maximum:m?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(ae(n,{code:ee.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(ae(n,{code:ee.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((m,v)=>s.type._parseAsync(new dn(n,m,n.path,v)))).then(m=>Bt.mergeArray(r,m));const i=[...n.data].map((m,v)=>s.type._parseSync(new dn(n,m,n.path,v)));return Bt.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new sn({...this._def,minLength:{value:e,message:ge.toString(n)}})}max(e,n){return new sn({...this._def,maxLength:{value:e,message:ge.toString(n)}})}length(e,n){return new sn({...this._def,exactLength:{value:e,message:ge.toString(n)}})}nonempty(e){return this.min(1,e)}}sn.create=(t,e)=>new sn({type:t,minLength:null,maxLength:null,exactLength:null,typeName:De.ZodArray,...ke(e)});function vr(t){if(t instanceof et){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ln.create(vr(r))}return new et({...t._def,shape:()=>e})}else return t instanceof sn?new sn({...t._def,type:vr(t.element)}):t instanceof ln?ln.create(vr(t.unwrap())):t instanceof zn?zn.create(vr(t.unwrap())):t instanceof hn?hn.create(t.items.map(e=>vr(e))):t}class et extends Ce{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ve.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==oe.object){const T=this._getOrReturnCtx(e);return ae(T,{code:ee.invalid_type,expected:oe.object,received:T.parsedType}),we}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:m}=this._getCached(),v=[];if(!(this._def.catchall instanceof xn&&this._def.unknownKeys==="strip"))for(const T in s.data)m.includes(T)||v.push(T);const F=[];for(const T of m){const R=i[T],W=s.data[T];F.push({key:{status:"valid",value:T},value:R._parse(new dn(s,W,s.path,T)),alwaysSet:T in s.data})}if(this._def.catchall instanceof xn){const T=this._def.unknownKeys;if(T==="passthrough")for(const R of v)F.push({key:{status:"valid",value:R},value:{status:"valid",value:s.data[R]}});else if(T==="strict")v.length>0&&(ae(s,{code:ee.unrecognized_keys,keys:v}),r.dirty());else if(T!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const T=this._def.catchall;for(const R of v){const W=s.data[R];F.push({key:{status:"valid",value:R},value:T._parse(new dn(s,W,s.path,R)),alwaysSet:R in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const T=[];for(const R of F){const W=await R.key,ie=await R.value;T.push({key:W,value:ie,alwaysSet:R.alwaysSet})}return T}).then(T=>Bt.mergeObjectSync(r,T)):Bt.mergeObjectSync(r,F)}get shape(){return this._def.shape()}strict(e){return ge.errToObj,new et({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,m,v;const F=(m=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&m!==void 0?m:r.defaultError;return n.code==="unrecognized_keys"?{message:(v=ge.errToObj(e).message)!==null&&v!==void 0?v:F}:{message:F}}}:{}})}strip(){return new et({...this._def,unknownKeys:"strip"})}passthrough(){return new et({...this._def,unknownKeys:"passthrough"})}extend(e){return new et({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new et({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:De.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new et({...this._def,catchall:e})}pick(e){const n={};return Ve.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new et({...this._def,shape:()=>n})}omit(e){const n={};return Ve.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new et({...this._def,shape:()=>n})}deepPartial(){return vr(this)}partial(e){const n={};return Ve.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new et({...this._def,shape:()=>n})}required(e){const n={};return Ve.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof ln;)i=i._def.innerType;n[r]=i}}),new et({...this._def,shape:()=>n})}keyof(){return lo(Ve.objectKeys(this.shape))}}et.create=(t,e)=>new et({shape:()=>t,unknownKeys:"strip",catchall:xn.create(),typeName:De.ZodObject,...ke(e)});et.strictCreate=(t,e)=>new et({shape:()=>t,unknownKeys:"strict",catchall:xn.create(),typeName:De.ZodObject,...ke(e)});et.lazycreate=(t,e)=>new et({shape:t,unknownKeys:"strip",catchall:xn.create(),typeName:De.ZodObject,...ke(e)});class Xr extends Ce{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const v of i)if(v.result.status==="valid")return v.result;for(const v of i)if(v.result.status==="dirty")return n.common.issues.push(...v.ctx.common.issues),v.result;const m=i.map(v=>new Yt(v.ctx.common.issues));return ae(n,{code:ee.invalid_union,unionErrors:m}),we}if(n.common.async)return Promise.all(r.map(async i=>{const m={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:m}),ctx:m}})).then(s);{let i;const m=[];for(const F of r){const T={...n,common:{...n.common,issues:[]},parent:null},R=F._parseSync({data:n.data,path:n.path,parent:T});if(R.status==="valid")return R;R.status==="dirty"&&!i&&(i={result:R,ctx:T}),T.common.issues.length&&m.push(T.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const v=m.map(F=>new Yt(F));return ae(n,{code:ee.invalid_union,unionErrors:v}),we}}get options(){return this._def.options}}Xr.create=(t,e)=>new Xr({options:t,typeName:De.ZodUnion,...ke(e)});const Dn=t=>t instanceof Kr?Dn(t.schema):t instanceof an?Dn(t.innerType()):t instanceof es?[t.value]:t instanceof $n?t.options:t instanceof ts?Ve.objectValues(t.enum):t instanceof ns?Dn(t._def.innerType):t instanceof Hr?[void 0]:t instanceof Yr?[null]:t instanceof ln?[void 0,...Dn(t.unwrap())]:t instanceof zn?[null,...Dn(t.unwrap())]:t instanceof qa||t instanceof ss?Dn(t.unwrap()):t instanceof rs?Dn(t._def.innerType):[];class Is extends Ce{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.object)return ae(n,{code:ee.invalid_type,expected:oe.object,received:n.parsedType}),we;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(ae(n,{code:ee.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),we)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const m=Dn(i.shape[e]);if(!m.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const v of m){if(s.has(v))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(v)}`);s.set(v,i)}}return new Is({typeName:De.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...ke(r)})}}function Ta(t,e){const n=Sn(t),r=Sn(e);if(t===e)return{valid:!0,data:t};if(n===oe.object&&r===oe.object){const s=Ve.objectKeys(e),i=Ve.objectKeys(t).filter(v=>s.indexOf(v)!==-1),m={...t,...e};for(const v of i){const F=Ta(t[v],e[v]);if(!F.valid)return{valid:!1};m[v]=F.data}return{valid:!0,data:m}}else if(n===oe.array&&r===oe.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const m=t[i],v=e[i],F=Ta(m,v);if(!F.valid)return{valid:!1};s.push(F.data)}return{valid:!0,data:s}}else return n===oe.date&&r===oe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Jr extends Ce{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,m)=>{if(Ba(i)||Ba(m))return we;const v=Ta(i.value,m.value);return v.valid?((Sa(i)||Sa(m))&&n.dirty(),{status:n.value,value:v.data}):(ae(r,{code:ee.invalid_intersection_types}),we)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,m])=>s(i,m)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Jr.create=(t,e,n)=>new Jr({left:t,right:e,typeName:De.ZodIntersection,...ke(n)});class hn extends Ce{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.array)return ae(r,{code:ee.invalid_type,expected:oe.array,received:r.parsedType}),we;if(r.data.length<this._def.items.length)return ae(r,{code:ee.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),we;!this._def.rest&&r.data.length>this._def.items.length&&(ae(r,{code:ee.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((m,v)=>{const F=this._def.items[v]||this._def.rest;return F?F._parse(new dn(r,m,r.path,v)):null}).filter(m=>!!m);return r.common.async?Promise.all(i).then(m=>Bt.mergeArray(n,m)):Bt.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new hn({...this._def,rest:e})}}hn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new hn({items:t,typeName:De.ZodTuple,rest:null,...ke(e)})};class Qr extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.object)return ae(r,{code:ee.invalid_type,expected:oe.object,received:r.parsedType}),we;const s=[],i=this._def.keyType,m=this._def.valueType;for(const v in r.data)s.push({key:i._parse(new dn(r,v,r.path,v)),value:m._parse(new dn(r,r.data[v],r.path,v)),alwaysSet:v in r.data});return r.common.async?Bt.mergeObjectAsync(n,s):Bt.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Ce?new Qr({keyType:e,valueType:n,typeName:De.ZodRecord,...ke(r)}):new Qr({keyType:nn.create(),valueType:e,typeName:De.ZodRecord,...ke(n)})}}class Ts extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.map)return ae(r,{code:ee.invalid_type,expected:oe.map,received:r.parsedType}),we;const s=this._def.keyType,i=this._def.valueType,m=[...r.data.entries()].map(([v,F],T)=>({key:s._parse(new dn(r,v,r.path,[T,"key"])),value:i._parse(new dn(r,F,r.path,[T,"value"]))}));if(r.common.async){const v=new Map;return Promise.resolve().then(async()=>{for(const F of m){const T=await F.key,R=await F.value;if(T.status==="aborted"||R.status==="aborted")return we;(T.status==="dirty"||R.status==="dirty")&&n.dirty(),v.set(T.value,R.value)}return{status:n.value,value:v}})}else{const v=new Map;for(const F of m){const T=F.key,R=F.value;if(T.status==="aborted"||R.status==="aborted")return we;(T.status==="dirty"||R.status==="dirty")&&n.dirty(),v.set(T.value,R.value)}return{status:n.value,value:v}}}}Ts.create=(t,e,n)=>new Ts({valueType:e,keyType:t,typeName:De.ZodMap,...ke(n)});class Qn extends Ce{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.set)return ae(r,{code:ee.invalid_type,expected:oe.set,received:r.parsedType}),we;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(ae(r,{code:ee.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(ae(r,{code:ee.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function m(F){const T=new Set;for(const R of F){if(R.status==="aborted")return we;R.status==="dirty"&&n.dirty(),T.add(R.value)}return{status:n.value,value:T}}const v=[...r.data.values()].map((F,T)=>i._parse(new dn(r,F,r.path,T)));return r.common.async?Promise.all(v).then(F=>m(F)):m(v)}min(e,n){return new Qn({...this._def,minSize:{value:e,message:ge.toString(n)}})}max(e,n){return new Qn({...this._def,maxSize:{value:e,message:ge.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Qn.create=(t,e)=>new Qn({valueType:t,minSize:null,maxSize:null,typeName:De.ZodSet,...ke(e)});class kr extends Ce{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.function)return ae(n,{code:ee.invalid_type,expected:oe.function,received:n.parsedType}),we;function r(v,F){return Fs({data:v,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Es(),Er].filter(T=>!!T),issueData:{code:ee.invalid_arguments,argumentsError:F}})}function s(v,F){return Fs({data:v,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Es(),Er].filter(T=>!!T),issueData:{code:ee.invalid_return_type,returnTypeError:F}})}const i={errorMap:n.common.contextualErrorMap},m=n.data;if(this._def.returns instanceof Cr){const v=this;return Pt(async function(...F){const T=new Yt([]),R=await v._def.args.parseAsync(F,i).catch(te=>{throw T.addIssue(r(F,te)),T}),W=await Reflect.apply(m,this,R);return await v._def.returns._def.type.parseAsync(W,i).catch(te=>{throw T.addIssue(s(W,te)),T})})}else{const v=this;return Pt(function(...F){const T=v._def.args.safeParse(F,i);if(!T.success)throw new Yt([r(F,T.error)]);const R=Reflect.apply(m,this,T.data),W=v._def.returns.safeParse(R,i);if(!W.success)throw new Yt([s(R,W.error)]);return W.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new kr({...this._def,args:hn.create(e).rest(Hn.create())})}returns(e){return new kr({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new kr({args:e||hn.create([]).rest(Hn.create()),returns:n||Hn.create(),typeName:De.ZodFunction,...ke(r)})}}class Kr extends Ce{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Kr.create=(t,e)=>new Kr({getter:t,typeName:De.ZodLazy,...ke(e)});class es extends Ce{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ae(n,{received:n.data,code:ee.invalid_literal,expected:this._def.value}),we}return{status:"valid",value:e.data}}get value(){return this._def.value}}es.create=(t,e)=>new es({value:t,typeName:De.ZodLiteral,...ke(e)});function lo(t,e){return new $n({values:t,typeName:De.ZodEnum,...ke(e)})}class $n extends Ce{constructor(){super(...arguments),qr.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ae(n,{expected:Ve.joinValues(r),received:n.parsedType,code:ee.invalid_type}),we}if(Cs(this,qr)||uo(this,qr,new Set(this._def.values)),!Cs(this,qr).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return ae(n,{received:n.data,code:ee.invalid_enum_value,options:r}),we}return Pt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return $n.create(e,{...this._def,...n})}exclude(e,n=this._def){return $n.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}qr=new WeakMap;$n.create=lo;class ts extends Ce{constructor(){super(...arguments),Vr.set(this,void 0)}_parse(e){const n=Ve.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==oe.string&&r.parsedType!==oe.number){const s=Ve.objectValues(n);return ae(r,{expected:Ve.joinValues(s),received:r.parsedType,code:ee.invalid_type}),we}if(Cs(this,Vr)||uo(this,Vr,new Set(Ve.getValidEnumValues(this._def.values))),!Cs(this,Vr).has(e.data)){const s=Ve.objectValues(n);return ae(r,{received:r.data,code:ee.invalid_enum_value,options:s}),we}return Pt(e.data)}get enum(){return this._def.values}}Vr=new WeakMap;ts.create=(t,e)=>new ts({values:t,typeName:De.ZodNativeEnum,...ke(e)});class Cr extends Ce{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.promise&&n.common.async===!1)return ae(n,{code:ee.invalid_type,expected:oe.promise,received:n.parsedType}),we;const r=n.parsedType===oe.promise?n.data:Promise.resolve(n.data);return Pt(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Cr.create=(t,e)=>new Cr({type:t,typeName:De.ZodPromise,...ke(e)});class an extends Ce{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===De.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:m=>{ae(r,m),m.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const m=s.transform(r.data,i);if(r.common.async)return Promise.resolve(m).then(async v=>{if(n.value==="aborted")return we;const F=await this._def.schema._parseAsync({data:v,path:r.path,parent:r});return F.status==="aborted"?we:F.status==="dirty"||n.value==="dirty"?Dr(F.value):F});{if(n.value==="aborted")return we;const v=this._def.schema._parseSync({data:m,path:r.path,parent:r});return v.status==="aborted"?we:v.status==="dirty"||n.value==="dirty"?Dr(v.value):v}}if(s.type==="refinement"){const m=v=>{const F=s.refinement(v,i);if(r.common.async)return Promise.resolve(F);if(F instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return v};if(r.common.async===!1){const v=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return v.status==="aborted"?we:(v.status==="dirty"&&n.dirty(),m(v.value),{status:n.value,value:v.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(v=>v.status==="aborted"?we:(v.status==="dirty"&&n.dirty(),m(v.value).then(()=>({status:n.value,value:v.value}))))}if(s.type==="transform")if(r.common.async===!1){const m=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ur(m))return m;const v=s.transform(m.value,i);if(v instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:v}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(m=>Ur(m)?Promise.resolve(s.transform(m.value,i)).then(v=>({status:n.value,value:v})):m);Ve.assertNever(s)}}an.create=(t,e,n)=>new an({schema:t,typeName:De.ZodEffects,effect:e,...ke(n)});an.createWithPreprocess=(t,e,n)=>new an({schema:e,effect:{type:"preprocess",transform:t},typeName:De.ZodEffects,...ke(n)});class ln extends Ce{_parse(e){return this._getType(e)===oe.undefined?Pt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ln.create=(t,e)=>new ln({innerType:t,typeName:De.ZodOptional,...ke(e)});class zn extends Ce{_parse(e){return this._getType(e)===oe.null?Pt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}zn.create=(t,e)=>new zn({innerType:t,typeName:De.ZodNullable,...ke(e)});class ns extends Ce{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===oe.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}ns.create=(t,e)=>new ns({innerType:t,typeName:De.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ke(e)});class rs extends Ce{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Gr(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Yt(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Yt(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}rs.create=(t,e)=>new rs({innerType:t,typeName:De.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ke(e)});class Ms extends Ce{_parse(e){if(this._getType(e)!==oe.nan){const r=this._getOrReturnCtx(e);return ae(r,{code:ee.invalid_type,expected:oe.nan,received:r.parsedType}),we}return{status:"valid",value:e.data}}}Ms.create=t=>new Ms({typeName:De.ZodNaN,...ke(t)});const Zh=Symbol("zod_brand");class qa extends Ce{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class us extends Ce{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?we:i.status==="dirty"?(n.dirty(),Dr(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?we:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new us({in:e,out:n,typeName:De.ZodPipeline})}}class ss extends Ce{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Ur(s)&&(s.value=Object.freeze(s.value)),s);return Gr(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}ss.create=(t,e)=>new ss({innerType:t,typeName:De.ZodReadonly,...ke(e)});function fo(t,e={},n){return t?Fr.create().superRefine((r,s)=>{var i,m;if(!t(r)){const v=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,F=(m=(i=v.fatal)!==null&&i!==void 0?i:n)!==null&&m!==void 0?m:!0,T=typeof v=="string"?{message:v}:v;s.addIssue({code:"custom",...T,fatal:F})}}):Fr.create()}const Rh={object:et.lazycreate};var De;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(De||(De={}));const jh=(t,e={message:`Input not instance of ${t.name}`})=>fo(n=>n instanceof t,e),ho=nn.create,po=Nn.create,Uh=Ms.create,Gh=In.create,mo=Wr.create,Wh=Jn.create,Hh=Bs.create,Yh=Hr.create,Xh=Yr.create,Jh=Fr.create,Qh=Hn.create,Kh=xn.create,e1=Ss.create,t1=sn.create,n1=et.create,r1=et.strictCreate,s1=Xr.create,a1=Is.create,u1=Jr.create,i1=hn.create,o1=Qr.create,c1=Ts.create,l1=Qn.create,f1=kr.create,d1=Kr.create,h1=es.create,p1=$n.create,m1=ts.create,g1=Cr.create,yi=an.create,_1=ln.create,v1=zn.create,y1=an.createWithPreprocess,D1=us.create,w1=()=>ho().optional(),b1=()=>po().optional(),k1=()=>mo().optional(),x1={string:t=>nn.create({...t,coerce:!0}),number:t=>Nn.create({...t,coerce:!0}),boolean:t=>Wr.create({...t,coerce:!0}),bigint:t=>In.create({...t,coerce:!0}),date:t=>Jn.create({...t,coerce:!0})},A1=we;var Ot=Object.freeze({__proto__:null,defaultErrorMap:Er,setErrorMap:Ah,getErrorMap:Es,makeIssue:Fs,EMPTY_PATH:Eh,addIssueToContext:ae,ParseStatus:Bt,INVALID:we,DIRTY:Dr,OK:Pt,isAborted:Ba,isDirty:Sa,isValid:Ur,isAsync:Gr,get util(){return Ve},get objectUtil(){return Ca},ZodParsedType:oe,getParsedType:Sn,ZodType:Ce,datetimeRegex:co,ZodString:nn,ZodNumber:Nn,ZodBigInt:In,ZodBoolean:Wr,ZodDate:Jn,ZodSymbol:Bs,ZodUndefined:Hr,ZodNull:Yr,ZodAny:Fr,ZodUnknown:Hn,ZodNever:xn,ZodVoid:Ss,ZodArray:sn,ZodObject:et,ZodUnion:Xr,ZodDiscriminatedUnion:Is,ZodIntersection:Jr,ZodTuple:hn,ZodRecord:Qr,ZodMap:Ts,ZodSet:Qn,ZodFunction:kr,ZodLazy:Kr,ZodLiteral:es,ZodEnum:$n,ZodNativeEnum:ts,ZodPromise:Cr,ZodEffects:an,ZodTransformer:an,ZodOptional:ln,ZodNullable:zn,ZodDefault:ns,ZodCatch:rs,ZodNaN:Ms,BRAND:Zh,ZodBranded:qa,ZodPipeline:us,ZodReadonly:ss,custom:fo,Schema:Ce,ZodSchema:Ce,late:Rh,get ZodFirstPartyTypeKind(){return De},coerce:x1,any:Jh,array:t1,bigint:Gh,boolean:mo,date:Wh,discriminatedUnion:a1,effect:yi,enum:p1,function:f1,instanceof:jh,intersection:u1,lazy:d1,literal:h1,map:c1,nan:Uh,nativeEnum:m1,never:Kh,null:Xh,nullable:v1,number:po,object:n1,oboolean:k1,onumber:b1,optional:_1,ostring:w1,pipeline:D1,preprocess:y1,promise:g1,record:o1,set:l1,strictObject:r1,string:ho,symbol:Hh,transformer:yi,tuple:i1,undefined:Yh,union:s1,unknown:Qh,void:e1,NEVER:A1,ZodIssueCode:ee,quotelessJson:xh,ZodError:Yt});function E1(t,e){return class extends t{constructor(...n){super(...n),e(this)}}}const F1=E1(Array,t=>t.fill(0));let Fe=1e-6;function C1(t){function e(a=0,g=0){const o=new t(2);return a!==void 0&&(o[0]=a,g!==void 0&&(o[1]=g)),o}const n=e;function r(a,g,o){const f=o??new t(2);return f[0]=a,f[1]=g,f}function s(a,g){const o=g??new t(2);return o[0]=Math.ceil(a[0]),o[1]=Math.ceil(a[1]),o}function i(a,g){const o=g??new t(2);return o[0]=Math.floor(a[0]),o[1]=Math.floor(a[1]),o}function m(a,g){const o=g??new t(2);return o[0]=Math.round(a[0]),o[1]=Math.round(a[1]),o}function v(a,g=0,o=1,f){const D=f??new t(2);return D[0]=Math.min(o,Math.max(g,a[0])),D[1]=Math.min(o,Math.max(g,a[1])),D}function F(a,g,o){const f=o??new t(2);return f[0]=a[0]+g[0],f[1]=a[1]+g[1],f}function T(a,g,o,f){const D=f??new t(2);return D[0]=a[0]+g[0]*o,D[1]=a[1]+g[1]*o,D}function R(a,g){const o=a[0],f=a[1],D=g[0],S=g[1],Z=Math.sqrt(o*o+f*f),_=Math.sqrt(D*D+S*S),w=Z*_,B=w&&St(a,g)/w;return Math.acos(B)}function W(a,g,o){const f=o??new t(2);return f[0]=a[0]-g[0],f[1]=a[1]-g[1],f}const ie=W;function te(a,g){return Math.abs(a[0]-g[0])<Fe&&Math.abs(a[1]-g[1])<Fe}function se(a,g){return a[0]===g[0]&&a[1]===g[1]}function N(a,g,o,f){const D=f??new t(2);return D[0]=a[0]+o*(g[0]-a[0]),D[1]=a[1]+o*(g[1]-a[1]),D}function Y(a,g,o,f){const D=f??new t(2);return D[0]=a[0]+o[0]*(g[0]-a[0]),D[1]=a[1]+o[1]*(g[1]-a[1]),D}function K(a,g,o){const f=o??new t(2);return f[0]=Math.max(a[0],g[0]),f[1]=Math.max(a[1],g[1]),f}function ne(a,g,o){const f=o??new t(2);return f[0]=Math.min(a[0],g[0]),f[1]=Math.min(a[1],g[1]),f}function he(a,g,o){const f=o??new t(2);return f[0]=a[0]*g,f[1]=a[1]*g,f}const me=he;function ve(a,g,o){const f=o??new t(2);return f[0]=a[0]/g,f[1]=a[1]/g,f}function ue(a,g){const o=g??new t(2);return o[0]=1/a[0],o[1]=1/a[1],o}const Ke=ue;function Ie(a,g,o){const f=o??new t(3),D=a[0]*g[1]-a[1]*g[0];return f[0]=0,f[1]=0,f[2]=D,f}function St(a,g){return a[0]*g[0]+a[1]*g[1]}function st(a){const g=a[0],o=a[1];return Math.sqrt(g*g+o*o)}const qt=st;function Me(a){const g=a[0],o=a[1];return g*g+o*o}const Re=Me;function Ae(a,g){const o=a[0]-g[0],f=a[1]-g[1];return Math.sqrt(o*o+f*f)}const jt=Ae;function Dt(a,g){const o=a[0]-g[0],f=a[1]-g[1];return o*o+f*f}const Vt=Dt;function ct(a,g){const o=g??new t(2),f=a[0],D=a[1],S=Math.sqrt(f*f+D*D);return S>1e-5?(o[0]=f/S,o[1]=D/S):(o[0]=0,o[1]=0),o}function Ut(a,g){const o=g??new t(2);return o[0]=-a[0],o[1]=-a[1],o}function We(a,g){const o=g??new t(2);return o[0]=a[0],o[1]=a[1],o}const Gt=We;function Ct(a,g,o){const f=o??new t(2);return f[0]=a[0]*g[0],f[1]=a[1]*g[1],f}const Wt=Ct;function lt(a,g,o){const f=o??new t(2);return f[0]=a[0]/g[0],f[1]=a[1]/g[1],f}const Lt=lt;function Tt(a=1,g){const o=g??new t(2),f=Math.random()*2*Math.PI;return o[0]=Math.cos(f)*a,o[1]=Math.sin(f)*a,o}function d(a){const g=a??new t(2);return g[0]=0,g[1]=0,g}function x(a,g,o){const f=o??new t(2),D=a[0],S=a[1];return f[0]=D*g[0]+S*g[4]+g[12],f[1]=D*g[1]+S*g[5]+g[13],f}function l(a,g,o){const f=o??new t(2),D=a[0],S=a[1];return f[0]=g[0]*D+g[4]*S+g[8],f[1]=g[1]*D+g[5]*S+g[9],f}function h(a,g,o,f){const D=f??new t(2),S=a[0]-g[0],Z=a[1]-g[1],_=Math.sin(o),w=Math.cos(o);return D[0]=S*w-Z*_+g[0],D[1]=S*_+Z*w+g[1],D}function k(a,g,o){const f=o??new t(2);return ct(a,f),he(f,g,f)}function A(a,g,o){const f=o??new t(2);return st(a)>g?k(a,g,f):We(a,f)}function L(a,g,o){const f=o??new t(2);return N(a,g,.5,f)}return{create:e,fromValues:n,set:r,ceil:s,floor:i,round:m,clamp:v,add:F,addScaled:T,angle:R,subtract:W,sub:ie,equalsApproximately:te,equals:se,lerp:N,lerpV:Y,max:K,min:ne,mulScalar:he,scale:me,divScalar:ve,inverse:ue,invert:Ke,cross:Ie,dot:St,length:st,len:qt,lengthSq:Me,lenSq:Re,distance:Ae,dist:jt,distanceSq:Dt,distSq:Vt,normalize:ct,negate:Ut,copy:We,clone:Gt,multiply:Ct,mul:Wt,divide:lt,div:Lt,random:Tt,zero:d,transformMat4:x,transformMat3:l,rotate:h,setLength:k,truncate:A,midpoint:L}}const Di=new Map;function go(t){let e=Di.get(t);return e||(e=C1(t),Di.set(t,e)),e}function B1(t){function e(_,w,B){const M=new t(3);return _!==void 0&&(M[0]=_,w!==void 0&&(M[1]=w,B!==void 0&&(M[2]=B))),M}const n=e;function r(_,w,B,M){const V=M??new t(3);return V[0]=_,V[1]=w,V[2]=B,V}function s(_,w){const B=w??new t(3);return B[0]=Math.ceil(_[0]),B[1]=Math.ceil(_[1]),B[2]=Math.ceil(_[2]),B}function i(_,w){const B=w??new t(3);return B[0]=Math.floor(_[0]),B[1]=Math.floor(_[1]),B[2]=Math.floor(_[2]),B}function m(_,w){const B=w??new t(3);return B[0]=Math.round(_[0]),B[1]=Math.round(_[1]),B[2]=Math.round(_[2]),B}function v(_,w=0,B=1,M){const V=M??new t(3);return V[0]=Math.min(B,Math.max(w,_[0])),V[1]=Math.min(B,Math.max(w,_[1])),V[2]=Math.min(B,Math.max(w,_[2])),V}function F(_,w,B){const M=B??new t(3);return M[0]=_[0]+w[0],M[1]=_[1]+w[1],M[2]=_[2]+w[2],M}function T(_,w,B,M){const V=M??new t(3);return V[0]=_[0]+w[0]*B,V[1]=_[1]+w[1]*B,V[2]=_[2]+w[2]*B,V}function R(_,w){const B=_[0],M=_[1],V=_[2],j=w[0],U=w[1],de=w[2],ye=Math.sqrt(B*B+M*M+V*V),fe=Math.sqrt(j*j+U*U+de*de),pe=ye*fe,xe=pe&&St(_,w)/pe;return Math.acos(xe)}function W(_,w,B){const M=B??new t(3);return M[0]=_[0]-w[0],M[1]=_[1]-w[1],M[2]=_[2]-w[2],M}const ie=W;function te(_,w){return Math.abs(_[0]-w[0])<Fe&&Math.abs(_[1]-w[1])<Fe&&Math.abs(_[2]-w[2])<Fe}function se(_,w){return _[0]===w[0]&&_[1]===w[1]&&_[2]===w[2]}function N(_,w,B,M){const V=M??new t(3);return V[0]=_[0]+B*(w[0]-_[0]),V[1]=_[1]+B*(w[1]-_[1]),V[2]=_[2]+B*(w[2]-_[2]),V}function Y(_,w,B,M){const V=M??new t(3);return V[0]=_[0]+B[0]*(w[0]-_[0]),V[1]=_[1]+B[1]*(w[1]-_[1]),V[2]=_[2]+B[2]*(w[2]-_[2]),V}function K(_,w,B){const M=B??new t(3);return M[0]=Math.max(_[0],w[0]),M[1]=Math.max(_[1],w[1]),M[2]=Math.max(_[2],w[2]),M}function ne(_,w,B){const M=B??new t(3);return M[0]=Math.min(_[0],w[0]),M[1]=Math.min(_[1],w[1]),M[2]=Math.min(_[2],w[2]),M}function he(_,w,B){const M=B??new t(3);return M[0]=_[0]*w,M[1]=_[1]*w,M[2]=_[2]*w,M}const me=he;function ve(_,w,B){const M=B??new t(3);return M[0]=_[0]/w,M[1]=_[1]/w,M[2]=_[2]/w,M}function ue(_,w){const B=w??new t(3);return B[0]=1/_[0],B[1]=1/_[1],B[2]=1/_[2],B}const Ke=ue;function Ie(_,w,B){const M=B??new t(3),V=_[2]*w[0]-_[0]*w[2],j=_[0]*w[1]-_[1]*w[0];return M[0]=_[1]*w[2]-_[2]*w[1],M[1]=V,M[2]=j,M}function St(_,w){return _[0]*w[0]+_[1]*w[1]+_[2]*w[2]}function st(_){const w=_[0],B=_[1],M=_[2];return Math.sqrt(w*w+B*B+M*M)}const qt=st;function Me(_){const w=_[0],B=_[1],M=_[2];return w*w+B*B+M*M}const Re=Me;function Ae(_,w){const B=_[0]-w[0],M=_[1]-w[1],V=_[2]-w[2];return Math.sqrt(B*B+M*M+V*V)}const jt=Ae;function Dt(_,w){const B=_[0]-w[0],M=_[1]-w[1],V=_[2]-w[2];return B*B+M*M+V*V}const Vt=Dt;function ct(_,w){const B=w??new t(3),M=_[0],V=_[1],j=_[2],U=Math.sqrt(M*M+V*V+j*j);return U>1e-5?(B[0]=M/U,B[1]=V/U,B[2]=j/U):(B[0]=0,B[1]=0,B[2]=0),B}function Ut(_,w){const B=w??new t(3);return B[0]=-_[0],B[1]=-_[1],B[2]=-_[2],B}function We(_,w){const B=w??new t(3);return B[0]=_[0],B[1]=_[1],B[2]=_[2],B}const Gt=We;function Ct(_,w,B){const M=B??new t(3);return M[0]=_[0]*w[0],M[1]=_[1]*w[1],M[2]=_[2]*w[2],M}const Wt=Ct;function lt(_,w,B){const M=B??new t(3);return M[0]=_[0]/w[0],M[1]=_[1]/w[1],M[2]=_[2]/w[2],M}const Lt=lt;function Tt(_=1,w){const B=w??new t(3),M=Math.random()*2*Math.PI,V=Math.random()*2-1,j=Math.sqrt(1-V*V)*_;return B[0]=Math.cos(M)*j,B[1]=Math.sin(M)*j,B[2]=V*_,B}function d(_){const w=_??new t(3);return w[0]=0,w[1]=0,w[2]=0,w}function x(_,w,B){const M=B??new t(3),V=_[0],j=_[1],U=_[2],de=w[3]*V+w[7]*j+w[11]*U+w[15]||1;return M[0]=(w[0]*V+w[4]*j+w[8]*U+w[12])/de,M[1]=(w[1]*V+w[5]*j+w[9]*U+w[13])/de,M[2]=(w[2]*V+w[6]*j+w[10]*U+w[14])/de,M}function l(_,w,B){const M=B??new t(3),V=_[0],j=_[1],U=_[2];return M[0]=V*w[0*4+0]+j*w[1*4+0]+U*w[2*4+0],M[1]=V*w[0*4+1]+j*w[1*4+1]+U*w[2*4+1],M[2]=V*w[0*4+2]+j*w[1*4+2]+U*w[2*4+2],M}function h(_,w,B){const M=B??new t(3),V=_[0],j=_[1],U=_[2];return M[0]=V*w[0]+j*w[4]+U*w[8],M[1]=V*w[1]+j*w[5]+U*w[9],M[2]=V*w[2]+j*w[6]+U*w[10],M}function k(_,w,B){const M=B??new t(3),V=w[0],j=w[1],U=w[2],de=w[3]*2,ye=_[0],fe=_[1],pe=_[2],xe=j*pe-U*fe,Be=U*ye-V*pe,He=V*fe-j*ye;return M[0]=ye+xe*de+(j*He-U*Be)*2,M[1]=fe+Be*de+(U*xe-V*He)*2,M[2]=pe+He*de+(V*Be-j*xe)*2,M}function A(_,w){const B=w??new t(3);return B[0]=_[12],B[1]=_[13],B[2]=_[14],B}function L(_,w,B){const M=B??new t(3),V=w*4;return M[0]=_[V+0],M[1]=_[V+1],M[2]=_[V+2],M}function a(_,w){const B=w??new t(3),M=_[0],V=_[1],j=_[2],U=_[4],de=_[5],ye=_[6],fe=_[8],pe=_[9],xe=_[10];return B[0]=Math.sqrt(M*M+V*V+j*j),B[1]=Math.sqrt(U*U+de*de+ye*ye),B[2]=Math.sqrt(fe*fe+pe*pe+xe*xe),B}function g(_,w,B,M){const V=M??new t(3),j=[],U=[];return j[0]=_[0]-w[0],j[1]=_[1]-w[1],j[2]=_[2]-w[2],U[0]=j[0],U[1]=j[1]*Math.cos(B)-j[2]*Math.sin(B),U[2]=j[1]*Math.sin(B)+j[2]*Math.cos(B),V[0]=U[0]+w[0],V[1]=U[1]+w[1],V[2]=U[2]+w[2],V}function o(_,w,B,M){const V=M??new t(3),j=[],U=[];return j[0]=_[0]-w[0],j[1]=_[1]-w[1],j[2]=_[2]-w[2],U[0]=j[2]*Math.sin(B)+j[0]*Math.cos(B),U[1]=j[1],U[2]=j[2]*Math.cos(B)-j[0]*Math.sin(B),V[0]=U[0]+w[0],V[1]=U[1]+w[1],V[2]=U[2]+w[2],V}function f(_,w,B,M){const V=M??new t(3),j=[],U=[];return j[0]=_[0]-w[0],j[1]=_[1]-w[1],j[2]=_[2]-w[2],U[0]=j[0]*Math.cos(B)-j[1]*Math.sin(B),U[1]=j[0]*Math.sin(B)+j[1]*Math.cos(B),U[2]=j[2],V[0]=U[0]+w[0],V[1]=U[1]+w[1],V[2]=U[2]+w[2],V}function D(_,w,B){const M=B??new t(3);return ct(_,M),he(M,w,M)}function S(_,w,B){const M=B??new t(3);return st(_)>w?D(_,w,M):We(_,M)}function Z(_,w,B){const M=B??new t(3);return N(_,w,.5,M)}return{create:e,fromValues:n,set:r,ceil:s,floor:i,round:m,clamp:v,add:F,addScaled:T,angle:R,subtract:W,sub:ie,equalsApproximately:te,equals:se,lerp:N,lerpV:Y,max:K,min:ne,mulScalar:he,scale:me,divScalar:ve,inverse:ue,invert:Ke,cross:Ie,dot:St,length:st,len:qt,lengthSq:Me,lenSq:Re,distance:Ae,dist:jt,distanceSq:Dt,distSq:Vt,normalize:ct,negate:Ut,copy:We,clone:Gt,multiply:Ct,mul:Wt,divide:lt,div:Lt,random:Tt,zero:d,transformMat4:x,transformMat4Upper3x3:l,transformMat3:h,transformQuat:k,getTranslation:A,getAxis:L,getScaling:a,rotateX:g,rotateY:o,rotateZ:f,setLength:D,truncate:S,midpoint:Z}}const wi=new Map;function $s(t){let e=wi.get(t);return e||(e=B1(t),wi.set(t,e)),e}function S1(t){const e=go(t),n=$s(t);function r(d,x,l,h,k,A,L,a,g){const o=new t(12);return o[3]=0,o[7]=0,o[11]=0,d!==void 0&&(o[0]=d,x!==void 0&&(o[1]=x,l!==void 0&&(o[2]=l,h!==void 0&&(o[4]=h,k!==void 0&&(o[5]=k,A!==void 0&&(o[6]=A,L!==void 0&&(o[8]=L,a!==void 0&&(o[9]=a,g!==void 0&&(o[10]=g))))))))),o}function s(d,x,l,h,k,A,L,a,g,o){const f=o??new t(12);return f[0]=d,f[1]=x,f[2]=l,f[3]=0,f[4]=h,f[5]=k,f[6]=A,f[7]=0,f[8]=L,f[9]=a,f[10]=g,f[11]=0,f}function i(d,x){const l=x??new t(12);return l[0]=d[0],l[1]=d[1],l[2]=d[2],l[3]=0,l[4]=d[4],l[5]=d[5],l[6]=d[6],l[7]=0,l[8]=d[8],l[9]=d[9],l[10]=d[10],l[11]=0,l}function m(d,x){const l=x??new t(12),h=d[0],k=d[1],A=d[2],L=d[3],a=h+h,g=k+k,o=A+A,f=h*a,D=k*a,S=k*g,Z=A*a,_=A*g,w=A*o,B=L*a,M=L*g,V=L*o;return l[0]=1-S-w,l[1]=D+V,l[2]=Z-M,l[3]=0,l[4]=D-V,l[5]=1-f-w,l[6]=_+B,l[7]=0,l[8]=Z+M,l[9]=_-B,l[10]=1-f-S,l[11]=0,l}function v(d,x){const l=x??new t(12);return l[0]=-d[0],l[1]=-d[1],l[2]=-d[2],l[4]=-d[4],l[5]=-d[5],l[6]=-d[6],l[8]=-d[8],l[9]=-d[9],l[10]=-d[10],l}function F(d,x){const l=x??new t(12);return l[0]=d[0],l[1]=d[1],l[2]=d[2],l[4]=d[4],l[5]=d[5],l[6]=d[6],l[8]=d[8],l[9]=d[9],l[10]=d[10],l}const T=F;function R(d,x){return Math.abs(d[0]-x[0])<Fe&&Math.abs(d[1]-x[1])<Fe&&Math.abs(d[2]-x[2])<Fe&&Math.abs(d[4]-x[4])<Fe&&Math.abs(d[5]-x[5])<Fe&&Math.abs(d[6]-x[6])<Fe&&Math.abs(d[8]-x[8])<Fe&&Math.abs(d[9]-x[9])<Fe&&Math.abs(d[10]-x[10])<Fe}function W(d,x){return d[0]===x[0]&&d[1]===x[1]&&d[2]===x[2]&&d[4]===x[4]&&d[5]===x[5]&&d[6]===x[6]&&d[8]===x[8]&&d[9]===x[9]&&d[10]===x[10]}function ie(d){const x=d??new t(12);return x[0]=1,x[1]=0,x[2]=0,x[4]=0,x[5]=1,x[6]=0,x[8]=0,x[9]=0,x[10]=1,x}function te(d,x){const l=x??new t(12);if(l===d){let S;return S=d[1],d[1]=d[4],d[4]=S,S=d[2],d[2]=d[8],d[8]=S,S=d[6],d[6]=d[9],d[9]=S,l}const h=d[0*4+0],k=d[0*4+1],A=d[0*4+2],L=d[1*4+0],a=d[1*4+1],g=d[1*4+2],o=d[2*4+0],f=d[2*4+1],D=d[2*4+2];return l[0]=h,l[1]=L,l[2]=o,l[4]=k,l[5]=a,l[6]=f,l[8]=A,l[9]=g,l[10]=D,l}function se(d,x){const l=x??new t(12),h=d[0*4+0],k=d[0*4+1],A=d[0*4+2],L=d[1*4+0],a=d[1*4+1],g=d[1*4+2],o=d[2*4+0],f=d[2*4+1],D=d[2*4+2],S=D*a-g*f,Z=-D*L+g*o,_=f*L-a*o,w=1/(h*S+k*Z+A*_);return l[0]=S*w,l[1]=(-D*k+A*f)*w,l[2]=(g*k-A*a)*w,l[4]=Z*w,l[5]=(D*h-A*o)*w,l[6]=(-g*h+A*L)*w,l[8]=_*w,l[9]=(-f*h+k*o)*w,l[10]=(a*h-k*L)*w,l}function N(d){const x=d[0],l=d[0*4+1],h=d[0*4+2],k=d[1*4+0],A=d[1*4+1],L=d[1*4+2],a=d[2*4+0],g=d[2*4+1],o=d[2*4+2];return x*(A*o-g*L)-k*(l*o-g*h)+a*(l*L-A*h)}const Y=se;function K(d,x,l){const h=l??new t(12),k=d[0],A=d[1],L=d[2],a=d[4],g=d[5],o=d[6],f=d[8],D=d[9],S=d[10],Z=x[0],_=x[1],w=x[2],B=x[4],M=x[5],V=x[6],j=x[8],U=x[9],de=x[10];return h[0]=k*Z+a*_+f*w,h[1]=A*Z+g*_+D*w,h[2]=L*Z+o*_+S*w,h[4]=k*B+a*M+f*V,h[5]=A*B+g*M+D*V,h[6]=L*B+o*M+S*V,h[8]=k*j+a*U+f*de,h[9]=A*j+g*U+D*de,h[10]=L*j+o*U+S*de,h}const ne=K;function he(d,x,l){const h=l??ie();return d!==h&&(h[0]=d[0],h[1]=d[1],h[2]=d[2],h[4]=d[4],h[5]=d[5],h[6]=d[6]),h[8]=x[0],h[9]=x[1],h[10]=1,h}function me(d,x){const l=x??e.create();return l[0]=d[8],l[1]=d[9],l}function ve(d,x,l){const h=l??e.create(),k=x*4;return h[0]=d[k+0],h[1]=d[k+1],h}function ue(d,x,l,h){const k=h===d?d:F(d,h),A=l*4;return k[A+0]=x[0],k[A+1]=x[1],k}function Ke(d,x){const l=x??e.create(),h=d[0],k=d[1],A=d[4],L=d[5];return l[0]=Math.sqrt(h*h+k*k),l[1]=Math.sqrt(A*A+L*L),l}function Ie(d,x){const l=x??n.create(),h=d[0],k=d[1],A=d[2],L=d[4],a=d[5],g=d[6],o=d[8],f=d[9],D=d[10];return l[0]=Math.sqrt(h*h+k*k+A*A),l[1]=Math.sqrt(L*L+a*a+g*g),l[2]=Math.sqrt(o*o+f*f+D*D),l}function St(d,x){const l=x??new t(12);return l[0]=1,l[1]=0,l[2]=0,l[4]=0,l[5]=1,l[6]=0,l[8]=d[0],l[9]=d[1],l[10]=1,l}function st(d,x,l){const h=l??new t(12),k=x[0],A=x[1],L=d[0],a=d[1],g=d[2],o=d[1*4+0],f=d[1*4+1],D=d[1*4+2],S=d[2*4+0],Z=d[2*4+1],_=d[2*4+2];return d!==h&&(h[0]=L,h[1]=a,h[2]=g,h[4]=o,h[5]=f,h[6]=D),h[8]=L*k+o*A+S,h[9]=a*k+f*A+Z,h[10]=g*k+D*A+_,h}function qt(d,x){const l=x??new t(12),h=Math.cos(d),k=Math.sin(d);return l[0]=h,l[1]=k,l[2]=0,l[4]=-k,l[5]=h,l[6]=0,l[8]=0,l[9]=0,l[10]=1,l}function Me(d,x,l){const h=l??new t(12),k=d[0*4+0],A=d[0*4+1],L=d[0*4+2],a=d[1*4+0],g=d[1*4+1],o=d[1*4+2],f=Math.cos(x),D=Math.sin(x);return h[0]=f*k+D*a,h[1]=f*A+D*g,h[2]=f*L+D*o,h[4]=f*a-D*k,h[5]=f*g-D*A,h[6]=f*o-D*L,d!==h&&(h[8]=d[8],h[9]=d[9],h[10]=d[10]),h}function Re(d,x){const l=x??new t(12),h=Math.cos(d),k=Math.sin(d);return l[0]=1,l[1]=0,l[2]=0,l[4]=0,l[5]=h,l[6]=k,l[8]=0,l[9]=-k,l[10]=h,l}function Ae(d,x,l){const h=l??new t(12),k=d[4],A=d[5],L=d[6],a=d[8],g=d[9],o=d[10],f=Math.cos(x),D=Math.sin(x);return h[4]=f*k+D*a,h[5]=f*A+D*g,h[6]=f*L+D*o,h[8]=f*a-D*k,h[9]=f*g-D*A,h[10]=f*o-D*L,d!==h&&(h[0]=d[0],h[1]=d[1],h[2]=d[2]),h}function jt(d,x){const l=x??new t(12),h=Math.cos(d),k=Math.sin(d);return l[0]=h,l[1]=0,l[2]=-k,l[4]=0,l[5]=1,l[6]=0,l[8]=k,l[9]=0,l[10]=h,l}function Dt(d,x,l){const h=l??new t(12),k=d[0*4+0],A=d[0*4+1],L=d[0*4+2],a=d[2*4+0],g=d[2*4+1],o=d[2*4+2],f=Math.cos(x),D=Math.sin(x);return h[0]=f*k-D*a,h[1]=f*A-D*g,h[2]=f*L-D*o,h[8]=f*a+D*k,h[9]=f*g+D*A,h[10]=f*o+D*L,d!==h&&(h[4]=d[4],h[5]=d[5],h[6]=d[6]),h}const Vt=qt,ct=Me;function Ut(d,x){const l=x??new t(12);return l[0]=d[0],l[1]=0,l[2]=0,l[4]=0,l[5]=d[1],l[6]=0,l[8]=0,l[9]=0,l[10]=1,l}function We(d,x,l){const h=l??new t(12),k=x[0],A=x[1];return h[0]=k*d[0*4+0],h[1]=k*d[0*4+1],h[2]=k*d[0*4+2],h[4]=A*d[1*4+0],h[5]=A*d[1*4+1],h[6]=A*d[1*4+2],d!==h&&(h[8]=d[8],h[9]=d[9],h[10]=d[10]),h}function Gt(d,x){const l=x??new t(12);return l[0]=d[0],l[1]=0,l[2]=0,l[4]=0,l[5]=d[1],l[6]=0,l[8]=0,l[9]=0,l[10]=d[2],l}function Ct(d,x,l){const h=l??new t(12),k=x[0],A=x[1],L=x[2];return h[0]=k*d[0*4+0],h[1]=k*d[0*4+1],h[2]=k*d[0*4+2],h[4]=A*d[1*4+0],h[5]=A*d[1*4+1],h[6]=A*d[1*4+2],h[8]=L*d[2*4+0],h[9]=L*d[2*4+1],h[10]=L*d[2*4+2],h}function Wt(d,x){const l=x??new t(12);return l[0]=d,l[1]=0,l[2]=0,l[4]=0,l[5]=d,l[6]=0,l[8]=0,l[9]=0,l[10]=1,l}function lt(d,x,l){const h=l??new t(12);return h[0]=x*d[0*4+0],h[1]=x*d[0*4+1],h[2]=x*d[0*4+2],h[4]=x*d[1*4+0],h[5]=x*d[1*4+1],h[6]=x*d[1*4+2],d!==h&&(h[8]=d[8],h[9]=d[9],h[10]=d[10]),h}function Lt(d,x){const l=x??new t(12);return l[0]=d,l[1]=0,l[2]=0,l[4]=0,l[5]=d,l[6]=0,l[8]=0,l[9]=0,l[10]=d,l}function Tt(d,x,l){const h=l??new t(12);return h[0]=x*d[0*4+0],h[1]=x*d[0*4+1],h[2]=x*d[0*4+2],h[4]=x*d[1*4+0],h[5]=x*d[1*4+1],h[6]=x*d[1*4+2],h[8]=x*d[2*4+0],h[9]=x*d[2*4+1],h[10]=x*d[2*4+2],h}return{clone:T,create:r,set:s,fromMat4:i,fromQuat:m,negate:v,copy:F,equalsApproximately:R,equals:W,identity:ie,transpose:te,inverse:se,invert:Y,determinant:N,mul:ne,multiply:K,setTranslation:he,getTranslation:me,getAxis:ve,setAxis:ue,getScaling:Ke,get3DScaling:Ie,translation:St,translate:st,rotation:qt,rotate:Me,rotationX:Re,rotateX:Ae,rotationY:jt,rotateY:Dt,rotationZ:Vt,rotateZ:ct,scaling:Ut,scale:We,uniformScaling:Wt,uniformScale:lt,scaling3D:Gt,scale3D:Ct,uniformScaling3D:Lt,uniformScale3D:Tt}}const bi=new Map;function T1(t){let e=bi.get(t);return e||(e=S1(t),bi.set(t,e)),e}function M1(t){const e=$s(t);function n(a,g,o,f,D,S,Z,_,w,B,M,V,j,U,de,ye){const fe=new t(16);return a!==void 0&&(fe[0]=a,g!==void 0&&(fe[1]=g,o!==void 0&&(fe[2]=o,f!==void 0&&(fe[3]=f,D!==void 0&&(fe[4]=D,S!==void 0&&(fe[5]=S,Z!==void 0&&(fe[6]=Z,_!==void 0&&(fe[7]=_,w!==void 0&&(fe[8]=w,B!==void 0&&(fe[9]=B,M!==void 0&&(fe[10]=M,V!==void 0&&(fe[11]=V,j!==void 0&&(fe[12]=j,U!==void 0&&(fe[13]=U,de!==void 0&&(fe[14]=de,ye!==void 0&&(fe[15]=ye)))))))))))))))),fe}function r(a,g,o,f,D,S,Z,_,w,B,M,V,j,U,de,ye,fe){const pe=fe??new t(16);return pe[0]=a,pe[1]=g,pe[2]=o,pe[3]=f,pe[4]=D,pe[5]=S,pe[6]=Z,pe[7]=_,pe[8]=w,pe[9]=B,pe[10]=M,pe[11]=V,pe[12]=j,pe[13]=U,pe[14]=de,pe[15]=ye,pe}function s(a,g){const o=g??new t(16);return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=0,o[4]=a[4],o[5]=a[5],o[6]=a[6],o[7]=0,o[8]=a[8],o[9]=a[9],o[10]=a[10],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function i(a,g){const o=g??new t(16),f=a[0],D=a[1],S=a[2],Z=a[3],_=f+f,w=D+D,B=S+S,M=f*_,V=D*_,j=D*w,U=S*_,de=S*w,ye=S*B,fe=Z*_,pe=Z*w,xe=Z*B;return o[0]=1-j-ye,o[1]=V+xe,o[2]=U-pe,o[3]=0,o[4]=V-xe,o[5]=1-M-ye,o[6]=de+fe,o[7]=0,o[8]=U+pe,o[9]=de-fe,o[10]=1-M-j,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function m(a,g){const o=g??new t(16);return o[0]=-a[0],o[1]=-a[1],o[2]=-a[2],o[3]=-a[3],o[4]=-a[4],o[5]=-a[5],o[6]=-a[6],o[7]=-a[7],o[8]=-a[8],o[9]=-a[9],o[10]=-a[10],o[11]=-a[11],o[12]=-a[12],o[13]=-a[13],o[14]=-a[14],o[15]=-a[15],o}function v(a,g){const o=g??new t(16);return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5],o[6]=a[6],o[7]=a[7],o[8]=a[8],o[9]=a[9],o[10]=a[10],o[11]=a[11],o[12]=a[12],o[13]=a[13],o[14]=a[14],o[15]=a[15],o}const F=v;function T(a,g){return Math.abs(a[0]-g[0])<Fe&&Math.abs(a[1]-g[1])<Fe&&Math.abs(a[2]-g[2])<Fe&&Math.abs(a[3]-g[3])<Fe&&Math.abs(a[4]-g[4])<Fe&&Math.abs(a[5]-g[5])<Fe&&Math.abs(a[6]-g[6])<Fe&&Math.abs(a[7]-g[7])<Fe&&Math.abs(a[8]-g[8])<Fe&&Math.abs(a[9]-g[9])<Fe&&Math.abs(a[10]-g[10])<Fe&&Math.abs(a[11]-g[11])<Fe&&Math.abs(a[12]-g[12])<Fe&&Math.abs(a[13]-g[13])<Fe&&Math.abs(a[14]-g[14])<Fe&&Math.abs(a[15]-g[15])<Fe}function R(a,g){return a[0]===g[0]&&a[1]===g[1]&&a[2]===g[2]&&a[3]===g[3]&&a[4]===g[4]&&a[5]===g[5]&&a[6]===g[6]&&a[7]===g[7]&&a[8]===g[8]&&a[9]===g[9]&&a[10]===g[10]&&a[11]===g[11]&&a[12]===g[12]&&a[13]===g[13]&&a[14]===g[14]&&a[15]===g[15]}function W(a){const g=a??new t(16);return g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}function ie(a,g){const o=g??new t(16);if(o===a){let Be;return Be=a[1],a[1]=a[4],a[4]=Be,Be=a[2],a[2]=a[8],a[8]=Be,Be=a[3],a[3]=a[12],a[12]=Be,Be=a[6],a[6]=a[9],a[9]=Be,Be=a[7],a[7]=a[13],a[13]=Be,Be=a[11],a[11]=a[14],a[14]=Be,o}const f=a[0*4+0],D=a[0*4+1],S=a[0*4+2],Z=a[0*4+3],_=a[1*4+0],w=a[1*4+1],B=a[1*4+2],M=a[1*4+3],V=a[2*4+0],j=a[2*4+1],U=a[2*4+2],de=a[2*4+3],ye=a[3*4+0],fe=a[3*4+1],pe=a[3*4+2],xe=a[3*4+3];return o[0]=f,o[1]=_,o[2]=V,o[3]=ye,o[4]=D,o[5]=w,o[6]=j,o[7]=fe,o[8]=S,o[9]=B,o[10]=U,o[11]=pe,o[12]=Z,o[13]=M,o[14]=de,o[15]=xe,o}function te(a,g){const o=g??new t(16),f=a[0*4+0],D=a[0*4+1],S=a[0*4+2],Z=a[0*4+3],_=a[1*4+0],w=a[1*4+1],B=a[1*4+2],M=a[1*4+3],V=a[2*4+0],j=a[2*4+1],U=a[2*4+2],de=a[2*4+3],ye=a[3*4+0],fe=a[3*4+1],pe=a[3*4+2],xe=a[3*4+3],Be=U*xe,He=pe*de,tt=B*xe,nt=pe*M,at=B*de,ot=U*M,ft=S*xe,dt=pe*Z,ht=S*de,pt=U*Z,wt=S*M,bt=B*Z,kt=V*fe,xt=ye*j,Mt=_*fe,Nt=ye*w,It=_*j,er=V*w,tr=f*fe,On=ye*D,Pn=f*j,nr=V*D,rr=f*w,sr=_*D,qn=Be*w+nt*j+at*fe-(He*w+tt*j+ot*fe),is=He*D+ft*j+pt*fe-(Be*D+dt*j+ht*fe),Tr=tt*D+dt*w+wt*fe-(nt*D+ft*w+bt*fe),os=ot*D+ht*w+bt*j-(at*D+pt*w+wt*j),mt=1/(f*qn+_*is+V*Tr+ye*os);return o[0]=mt*qn,o[1]=mt*is,o[2]=mt*Tr,o[3]=mt*os,o[4]=mt*(He*_+tt*V+ot*ye-(Be*_+nt*V+at*ye)),o[5]=mt*(Be*f+dt*V+ht*ye-(He*f+ft*V+pt*ye)),o[6]=mt*(nt*f+ft*_+bt*ye-(tt*f+dt*_+wt*ye)),o[7]=mt*(at*f+pt*_+wt*V-(ot*f+ht*_+bt*V)),o[8]=mt*(kt*M+Nt*de+It*xe-(xt*M+Mt*de+er*xe)),o[9]=mt*(xt*Z+tr*de+nr*xe-(kt*Z+On*de+Pn*xe)),o[10]=mt*(Mt*Z+On*M+rr*xe-(Nt*Z+tr*M+sr*xe)),o[11]=mt*(er*Z+Pn*M+sr*de-(It*Z+nr*M+rr*de)),o[12]=mt*(Mt*U+er*pe+xt*B-(It*pe+kt*B+Nt*U)),o[13]=mt*(Pn*pe+kt*S+On*U-(tr*U+nr*pe+xt*S)),o[14]=mt*(tr*B+sr*pe+Nt*S-(rr*pe+Mt*S+On*B)),o[15]=mt*(rr*U+It*S+nr*B-(Pn*B+sr*U+er*S)),o}function se(a){const g=a[0],o=a[0*4+1],f=a[0*4+2],D=a[0*4+3],S=a[1*4+0],Z=a[1*4+1],_=a[1*4+2],w=a[1*4+3],B=a[2*4+0],M=a[2*4+1],V=a[2*4+2],j=a[2*4+3],U=a[3*4+0],de=a[3*4+1],ye=a[3*4+2],fe=a[3*4+3],pe=V*fe,xe=ye*j,Be=_*fe,He=ye*w,tt=_*j,nt=V*w,at=f*fe,ot=ye*D,ft=f*j,dt=V*D,ht=f*w,pt=_*D,wt=pe*Z+He*M+tt*de-(xe*Z+Be*M+nt*de),bt=xe*o+at*M+dt*de-(pe*o+ot*M+ft*de),kt=Be*o+ot*Z+ht*de-(He*o+at*Z+pt*de),xt=nt*o+ft*Z+pt*M-(tt*o+dt*Z+ht*M);return g*wt+S*bt+B*kt+U*xt}const N=te;function Y(a,g,o){const f=o??new t(16),D=a[0],S=a[1],Z=a[2],_=a[3],w=a[4],B=a[5],M=a[6],V=a[7],j=a[8],U=a[9],de=a[10],ye=a[11],fe=a[12],pe=a[13],xe=a[14],Be=a[15],He=g[0],tt=g[1],nt=g[2],at=g[3],ot=g[4],ft=g[5],dt=g[6],ht=g[7],pt=g[8],wt=g[9],bt=g[10],kt=g[11],xt=g[12],Mt=g[13],Nt=g[14],It=g[15];return f[0]=D*He+w*tt+j*nt+fe*at,f[1]=S*He+B*tt+U*nt+pe*at,f[2]=Z*He+M*tt+de*nt+xe*at,f[3]=_*He+V*tt+ye*nt+Be*at,f[4]=D*ot+w*ft+j*dt+fe*ht,f[5]=S*ot+B*ft+U*dt+pe*ht,f[6]=Z*ot+M*ft+de*dt+xe*ht,f[7]=_*ot+V*ft+ye*dt+Be*ht,f[8]=D*pt+w*wt+j*bt+fe*kt,f[9]=S*pt+B*wt+U*bt+pe*kt,f[10]=Z*pt+M*wt+de*bt+xe*kt,f[11]=_*pt+V*wt+ye*bt+Be*kt,f[12]=D*xt+w*Mt+j*Nt+fe*It,f[13]=S*xt+B*Mt+U*Nt+pe*It,f[14]=Z*xt+M*Mt+de*Nt+xe*It,f[15]=_*xt+V*Mt+ye*Nt+Be*It,f}const K=Y;function ne(a,g,o){const f=o??W();return a!==f&&(f[0]=a[0],f[1]=a[1],f[2]=a[2],f[3]=a[3],f[4]=a[4],f[5]=a[5],f[6]=a[6],f[7]=a[7],f[8]=a[8],f[9]=a[9],f[10]=a[10],f[11]=a[11]),f[12]=g[0],f[13]=g[1],f[14]=g[2],f[15]=1,f}function he(a,g){const o=g??e.create();return o[0]=a[12],o[1]=a[13],o[2]=a[14],o}function me(a,g,o){const f=o??e.create(),D=g*4;return f[0]=a[D+0],f[1]=a[D+1],f[2]=a[D+2],f}function ve(a,g,o,f){const D=f===a?f:v(a,f),S=o*4;return D[S+0]=g[0],D[S+1]=g[1],D[S+2]=g[2],D}function ue(a,g){const o=g??e.create(),f=a[0],D=a[1],S=a[2],Z=a[4],_=a[5],w=a[6],B=a[8],M=a[9],V=a[10];return o[0]=Math.sqrt(f*f+D*D+S*S),o[1]=Math.sqrt(Z*Z+_*_+w*w),o[2]=Math.sqrt(B*B+M*M+V*V),o}function Ke(a,g,o,f,D){const S=D??new t(16),Z=Math.tan(Math.PI*.5-.5*a);if(S[0]=Z/g,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=Z,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[11]=-1,S[12]=0,S[13]=0,S[15]=0,Number.isFinite(f)){const _=1/(o-f);S[10]=f*_,S[14]=f*o*_}else S[10]=-1,S[14]=-o;return S}function Ie(a,g,o,f=1/0,D){const S=D??new t(16),Z=1/Math.tan(a*.5);if(S[0]=Z/g,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=Z,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[11]=-1,S[12]=0,S[13]=0,S[15]=0,f===1/0)S[10]=0,S[14]=o;else{const _=1/(f-o);S[10]=o*_,S[14]=f*o*_}return S}function St(a,g,o,f,D,S,Z){const _=Z??new t(16);return _[0]=2/(g-a),_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=2/(f-o),_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[10]=1/(D-S),_[11]=0,_[12]=(g+a)/(a-g),_[13]=(f+o)/(o-f),_[14]=D/(D-S),_[15]=1,_}function st(a,g,o,f,D,S,Z){const _=Z??new t(16),w=g-a,B=f-o,M=D-S;return _[0]=2*D/w,_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=2*D/B,_[6]=0,_[7]=0,_[8]=(a+g)/w,_[9]=(f+o)/B,_[10]=S/M,_[11]=-1,_[12]=0,_[13]=0,_[14]=D*S/M,_[15]=0,_}function qt(a,g,o,f,D,S=1/0,Z){const _=Z??new t(16),w=g-a,B=f-o;if(_[0]=2*D/w,_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=2*D/B,_[6]=0,_[7]=0,_[8]=(a+g)/w,_[9]=(f+o)/B,_[11]=-1,_[12]=0,_[13]=0,_[15]=0,S===1/0)_[10]=0,_[14]=D;else{const M=1/(S-D);_[10]=D*M,_[14]=S*D*M}return _}const Me=e.create(),Re=e.create(),Ae=e.create();function jt(a,g,o,f){const D=f??new t(16);return e.normalize(e.subtract(g,a,Ae),Ae),e.normalize(e.cross(o,Ae,Me),Me),e.normalize(e.cross(Ae,Me,Re),Re),D[0]=Me[0],D[1]=Me[1],D[2]=Me[2],D[3]=0,D[4]=Re[0],D[5]=Re[1],D[6]=Re[2],D[7]=0,D[8]=Ae[0],D[9]=Ae[1],D[10]=Ae[2],D[11]=0,D[12]=a[0],D[13]=a[1],D[14]=a[2],D[15]=1,D}function Dt(a,g,o,f){const D=f??new t(16);return e.normalize(e.subtract(a,g,Ae),Ae),e.normalize(e.cross(o,Ae,Me),Me),e.normalize(e.cross(Ae,Me,Re),Re),D[0]=Me[0],D[1]=Me[1],D[2]=Me[2],D[3]=0,D[4]=Re[0],D[5]=Re[1],D[6]=Re[2],D[7]=0,D[8]=Ae[0],D[9]=Ae[1],D[10]=Ae[2],D[11]=0,D[12]=a[0],D[13]=a[1],D[14]=a[2],D[15]=1,D}function Vt(a,g,o,f){const D=f??new t(16);return e.normalize(e.subtract(a,g,Ae),Ae),e.normalize(e.cross(o,Ae,Me),Me),e.normalize(e.cross(Ae,Me,Re),Re),D[0]=Me[0],D[1]=Re[0],D[2]=Ae[0],D[3]=0,D[4]=Me[1],D[5]=Re[1],D[6]=Ae[1],D[7]=0,D[8]=Me[2],D[9]=Re[2],D[10]=Ae[2],D[11]=0,D[12]=-(Me[0]*a[0]+Me[1]*a[1]+Me[2]*a[2]),D[13]=-(Re[0]*a[0]+Re[1]*a[1]+Re[2]*a[2]),D[14]=-(Ae[0]*a[0]+Ae[1]*a[1]+Ae[2]*a[2]),D[15]=1,D}function ct(a,g){const o=g??new t(16);return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=a[0],o[13]=a[1],o[14]=a[2],o[15]=1,o}function Ut(a,g,o){const f=o??new t(16),D=g[0],S=g[1],Z=g[2],_=a[0],w=a[1],B=a[2],M=a[3],V=a[1*4+0],j=a[1*4+1],U=a[1*4+2],de=a[1*4+3],ye=a[2*4+0],fe=a[2*4+1],pe=a[2*4+2],xe=a[2*4+3],Be=a[3*4+0],He=a[3*4+1],tt=a[3*4+2],nt=a[3*4+3];return a!==f&&(f[0]=_,f[1]=w,f[2]=B,f[3]=M,f[4]=V,f[5]=j,f[6]=U,f[7]=de,f[8]=ye,f[9]=fe,f[10]=pe,f[11]=xe),f[12]=_*D+V*S+ye*Z+Be,f[13]=w*D+j*S+fe*Z+He,f[14]=B*D+U*S+pe*Z+tt,f[15]=M*D+de*S+xe*Z+nt,f}function We(a,g){const o=g??new t(16),f=Math.cos(a),D=Math.sin(a);return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=f,o[6]=D,o[7]=0,o[8]=0,o[9]=-D,o[10]=f,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Gt(a,g,o){const f=o??new t(16),D=a[4],S=a[5],Z=a[6],_=a[7],w=a[8],B=a[9],M=a[10],V=a[11],j=Math.cos(g),U=Math.sin(g);return f[4]=j*D+U*w,f[5]=j*S+U*B,f[6]=j*Z+U*M,f[7]=j*_+U*V,f[8]=j*w-U*D,f[9]=j*B-U*S,f[10]=j*M-U*Z,f[11]=j*V-U*_,a!==f&&(f[0]=a[0],f[1]=a[1],f[2]=a[2],f[3]=a[3],f[12]=a[12],f[13]=a[13],f[14]=a[14],f[15]=a[15]),f}function Ct(a,g){const o=g??new t(16),f=Math.cos(a),D=Math.sin(a);return o[0]=f,o[1]=0,o[2]=-D,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=D,o[9]=0,o[10]=f,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Wt(a,g,o){const f=o??new t(16),D=a[0*4+0],S=a[0*4+1],Z=a[0*4+2],_=a[0*4+3],w=a[2*4+0],B=a[2*4+1],M=a[2*4+2],V=a[2*4+3],j=Math.cos(g),U=Math.sin(g);return f[0]=j*D-U*w,f[1]=j*S-U*B,f[2]=j*Z-U*M,f[3]=j*_-U*V,f[8]=j*w+U*D,f[9]=j*B+U*S,f[10]=j*M+U*Z,f[11]=j*V+U*_,a!==f&&(f[4]=a[4],f[5]=a[5],f[6]=a[6],f[7]=a[7],f[12]=a[12],f[13]=a[13],f[14]=a[14],f[15]=a[15]),f}function lt(a,g){const o=g??new t(16),f=Math.cos(a),D=Math.sin(a);return o[0]=f,o[1]=D,o[2]=0,o[3]=0,o[4]=-D,o[5]=f,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Lt(a,g,o){const f=o??new t(16),D=a[0*4+0],S=a[0*4+1],Z=a[0*4+2],_=a[0*4+3],w=a[1*4+0],B=a[1*4+1],M=a[1*4+2],V=a[1*4+3],j=Math.cos(g),U=Math.sin(g);return f[0]=j*D+U*w,f[1]=j*S+U*B,f[2]=j*Z+U*M,f[3]=j*_+U*V,f[4]=j*w-U*D,f[5]=j*B-U*S,f[6]=j*M-U*Z,f[7]=j*V-U*_,a!==f&&(f[8]=a[8],f[9]=a[9],f[10]=a[10],f[11]=a[11],f[12]=a[12],f[13]=a[13],f[14]=a[14],f[15]=a[15]),f}function Tt(a,g,o){const f=o??new t(16);let D=a[0],S=a[1],Z=a[2];const _=Math.sqrt(D*D+S*S+Z*Z);D/=_,S/=_,Z/=_;const w=D*D,B=S*S,M=Z*Z,V=Math.cos(g),j=Math.sin(g),U=1-V;return f[0]=w+(1-w)*V,f[1]=D*S*U+Z*j,f[2]=D*Z*U-S*j,f[3]=0,f[4]=D*S*U-Z*j,f[5]=B+(1-B)*V,f[6]=S*Z*U+D*j,f[7]=0,f[8]=D*Z*U+S*j,f[9]=S*Z*U-D*j,f[10]=M+(1-M)*V,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}const d=Tt;function x(a,g,o,f){const D=f??new t(16);let S=g[0],Z=g[1],_=g[2];const w=Math.sqrt(S*S+Z*Z+_*_);S/=w,Z/=w,_/=w;const B=S*S,M=Z*Z,V=_*_,j=Math.cos(o),U=Math.sin(o),de=1-j,ye=B+(1-B)*j,fe=S*Z*de+_*U,pe=S*_*de-Z*U,xe=S*Z*de-_*U,Be=M+(1-M)*j,He=Z*_*de+S*U,tt=S*_*de+Z*U,nt=Z*_*de-S*U,at=V+(1-V)*j,ot=a[0],ft=a[1],dt=a[2],ht=a[3],pt=a[4],wt=a[5],bt=a[6],kt=a[7],xt=a[8],Mt=a[9],Nt=a[10],It=a[11];return D[0]=ye*ot+fe*pt+pe*xt,D[1]=ye*ft+fe*wt+pe*Mt,D[2]=ye*dt+fe*bt+pe*Nt,D[3]=ye*ht+fe*kt+pe*It,D[4]=xe*ot+Be*pt+He*xt,D[5]=xe*ft+Be*wt+He*Mt,D[6]=xe*dt+Be*bt+He*Nt,D[7]=xe*ht+Be*kt+He*It,D[8]=tt*ot+nt*pt+at*xt,D[9]=tt*ft+nt*wt+at*Mt,D[10]=tt*dt+nt*bt+at*Nt,D[11]=tt*ht+nt*kt+at*It,a!==D&&(D[12]=a[12],D[13]=a[13],D[14]=a[14],D[15]=a[15]),D}const l=x;function h(a,g){const o=g??new t(16);return o[0]=a[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=a[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function k(a,g,o){const f=o??new t(16),D=g[0],S=g[1],Z=g[2];return f[0]=D*a[0*4+0],f[1]=D*a[0*4+1],f[2]=D*a[0*4+2],f[3]=D*a[0*4+3],f[4]=S*a[1*4+0],f[5]=S*a[1*4+1],f[6]=S*a[1*4+2],f[7]=S*a[1*4+3],f[8]=Z*a[2*4+0],f[9]=Z*a[2*4+1],f[10]=Z*a[2*4+2],f[11]=Z*a[2*4+3],a!==f&&(f[12]=a[12],f[13]=a[13],f[14]=a[14],f[15]=a[15]),f}function A(a,g){const o=g??new t(16);return o[0]=a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=a,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function L(a,g,o){const f=o??new t(16);return f[0]=g*a[0*4+0],f[1]=g*a[0*4+1],f[2]=g*a[0*4+2],f[3]=g*a[0*4+3],f[4]=g*a[1*4+0],f[5]=g*a[1*4+1],f[6]=g*a[1*4+2],f[7]=g*a[1*4+3],f[8]=g*a[2*4+0],f[9]=g*a[2*4+1],f[10]=g*a[2*4+2],f[11]=g*a[2*4+3],a!==f&&(f[12]=a[12],f[13]=a[13],f[14]=a[14],f[15]=a[15]),f}return{create:n,set:r,fromMat3:s,fromQuat:i,negate:m,copy:v,clone:F,equalsApproximately:T,equals:R,identity:W,transpose:ie,inverse:te,determinant:se,invert:N,multiply:Y,mul:K,setTranslation:ne,getTranslation:he,getAxis:me,setAxis:ve,getScaling:ue,perspective:Ke,perspectiveReverseZ:Ie,ortho:St,frustum:st,frustumReverseZ:qt,aim:jt,cameraAim:Dt,lookAt:Vt,translation:ct,translate:Ut,rotationX:We,rotateX:Gt,rotationY:Ct,rotateY:Wt,rotationZ:lt,rotateZ:Lt,axisRotation:Tt,rotation:d,axisRotate:x,rotate:l,scaling:h,scale:k,uniformScaling:A,uniformScale:L}}const ki=new Map;function N1(t){let e=ki.get(t);return e||(e=M1(t),ki.set(t,e)),e}function I1(t){const e=$s(t);function n(d,x,l,h){const k=new t(4);return d!==void 0&&(k[0]=d,x!==void 0&&(k[1]=x,l!==void 0&&(k[2]=l,h!==void 0&&(k[3]=h)))),k}const r=n;function s(d,x,l,h,k){const A=k??new t(4);return A[0]=d,A[1]=x,A[2]=l,A[3]=h,A}function i(d,x,l){const h=l??new t(4),k=x*.5,A=Math.sin(k);return h[0]=A*d[0],h[1]=A*d[1],h[2]=A*d[2],h[3]=Math.cos(k),h}function m(d,x){const l=x??e.create(3),h=Math.acos(d[3])*2,k=Math.sin(h*.5);return k>Fe?(l[0]=d[0]/k,l[1]=d[1]/k,l[2]=d[2]/k):(l[0]=1,l[1]=0,l[2]=0),{angle:h,axis:l}}function v(d,x){const l=st(d,x);return Math.acos(2*l*l-1)}function F(d,x,l){const h=l??new t(4),k=d[0],A=d[1],L=d[2],a=d[3],g=x[0],o=x[1],f=x[2],D=x[3];return h[0]=k*D+a*g+A*f-L*o,h[1]=A*D+a*o+L*g-k*f,h[2]=L*D+a*f+k*o-A*g,h[3]=a*D-k*g-A*o-L*f,h}const T=F;function R(d,x,l){const h=l??new t(4),k=x*.5,A=d[0],L=d[1],a=d[2],g=d[3],o=Math.sin(k),f=Math.cos(k);return h[0]=A*f+g*o,h[1]=L*f+a*o,h[2]=a*f-L*o,h[3]=g*f-A*o,h}function W(d,x,l){const h=l??new t(4),k=x*.5,A=d[0],L=d[1],a=d[2],g=d[3],o=Math.sin(k),f=Math.cos(k);return h[0]=A*f-a*o,h[1]=L*f+g*o,h[2]=a*f+A*o,h[3]=g*f-L*o,h}function ie(d,x,l){const h=l??new t(4),k=x*.5,A=d[0],L=d[1],a=d[2],g=d[3],o=Math.sin(k),f=Math.cos(k);return h[0]=A*f+L*o,h[1]=L*f-A*o,h[2]=a*f+g*o,h[3]=g*f-a*o,h}function te(d,x,l,h){const k=h??new t(4),A=d[0],L=d[1],a=d[2],g=d[3];let o=x[0],f=x[1],D=x[2],S=x[3],Z=A*o+L*f+a*D+g*S;Z<0&&(Z=-Z,o=-o,f=-f,D=-D,S=-S);let _,w;if(1-Z>Fe){const B=Math.acos(Z),M=Math.sin(B);_=Math.sin((1-l)*B)/M,w=Math.sin(l*B)/M}else _=1-l,w=l;return k[0]=_*A+w*o,k[1]=_*L+w*f,k[2]=_*a+w*D,k[3]=_*g+w*S,k}function se(d,x){const l=x??new t(4),h=d[0],k=d[1],A=d[2],L=d[3],a=h*h+k*k+A*A+L*L,g=a?1/a:0;return l[0]=-h*g,l[1]=-k*g,l[2]=-A*g,l[3]=L*g,l}function N(d,x){const l=x??new t(4);return l[0]=-d[0],l[1]=-d[1],l[2]=-d[2],l[3]=d[3],l}function Y(d,x){const l=x??new t(4),h=d[0]+d[5]+d[10];if(h>0){const k=Math.sqrt(h+1);l[3]=.5*k;const A=.5/k;l[0]=(d[6]-d[9])*A,l[1]=(d[8]-d[2])*A,l[2]=(d[1]-d[4])*A}else{let k=0;d[5]>d[0]&&(k=1),d[10]>d[k*4+k]&&(k=2);const A=(k+1)%3,L=(k+2)%3,a=Math.sqrt(d[k*4+k]-d[A*4+A]-d[L*4+L]+1);l[k]=.5*a;const g=.5/a;l[3]=(d[A*4+L]-d[L*4+A])*g,l[A]=(d[A*4+k]+d[k*4+A])*g,l[L]=(d[L*4+k]+d[k*4+L])*g}return l}function K(d,x,l,h,k){const A=k??new t(4),L=d*.5,a=x*.5,g=l*.5,o=Math.sin(L),f=Math.cos(L),D=Math.sin(a),S=Math.cos(a),Z=Math.sin(g),_=Math.cos(g);switch(h){case"xyz":A[0]=o*S*_+f*D*Z,A[1]=f*D*_-o*S*Z,A[2]=f*S*Z+o*D*_,A[3]=f*S*_-o*D*Z;break;case"xzy":A[0]=o*S*_-f*D*Z,A[1]=f*D*_-o*S*Z,A[2]=f*S*Z+o*D*_,A[3]=f*S*_+o*D*Z;break;case"yxz":A[0]=o*S*_+f*D*Z,A[1]=f*D*_-o*S*Z,A[2]=f*S*Z-o*D*_,A[3]=f*S*_+o*D*Z;break;case"yzx":A[0]=o*S*_+f*D*Z,A[1]=f*D*_+o*S*Z,A[2]=f*S*Z-o*D*_,A[3]=f*S*_-o*D*Z;break;case"zxy":A[0]=o*S*_-f*D*Z,A[1]=f*D*_+o*S*Z,A[2]=f*S*Z+o*D*_,A[3]=f*S*_-o*D*Z;break;case"zyx":A[0]=o*S*_-f*D*Z,A[1]=f*D*_+o*S*Z,A[2]=f*S*Z-o*D*_,A[3]=f*S*_+o*D*Z;break;default:throw new Error(`Unknown rotation order: ${h}`)}return A}function ne(d,x){const l=x??new t(4);return l[0]=d[0],l[1]=d[1],l[2]=d[2],l[3]=d[3],l}const he=ne;function me(d,x,l){const h=l??new t(4);return h[0]=d[0]+x[0],h[1]=d[1]+x[1],h[2]=d[2]+x[2],h[3]=d[3]+x[3],h}function ve(d,x,l){const h=l??new t(4);return h[0]=d[0]-x[0],h[1]=d[1]-x[1],h[2]=d[2]-x[2],h[3]=d[3]-x[3],h}const ue=ve;function Ke(d,x,l){const h=l??new t(4);return h[0]=d[0]*x,h[1]=d[1]*x,h[2]=d[2]*x,h[3]=d[3]*x,h}const Ie=Ke;function St(d,x,l){const h=l??new t(4);return h[0]=d[0]/x,h[1]=d[1]/x,h[2]=d[2]/x,h[3]=d[3]/x,h}function st(d,x){return d[0]*x[0]+d[1]*x[1]+d[2]*x[2]+d[3]*x[3]}function qt(d,x,l,h){const k=h??new t(4);return k[0]=d[0]+l*(x[0]-d[0]),k[1]=d[1]+l*(x[1]-d[1]),k[2]=d[2]+l*(x[2]-d[2]),k[3]=d[3]+l*(x[3]-d[3]),k}function Me(d){const x=d[0],l=d[1],h=d[2],k=d[3];return Math.sqrt(x*x+l*l+h*h+k*k)}const Re=Me;function Ae(d){const x=d[0],l=d[1],h=d[2],k=d[3];return x*x+l*l+h*h+k*k}const jt=Ae;function Dt(d,x){const l=x??new t(4),h=d[0],k=d[1],A=d[2],L=d[3],a=Math.sqrt(h*h+k*k+A*A+L*L);return a>1e-5?(l[0]=h/a,l[1]=k/a,l[2]=A/a,l[3]=L/a):(l[0]=0,l[1]=0,l[2]=0,l[3]=1),l}function Vt(d,x){return Math.abs(d[0]-x[0])<Fe&&Math.abs(d[1]-x[1])<Fe&&Math.abs(d[2]-x[2])<Fe&&Math.abs(d[3]-x[3])<Fe}function ct(d,x){return d[0]===x[0]&&d[1]===x[1]&&d[2]===x[2]&&d[3]===x[3]}function Ut(d){const x=d??new t(4);return x[0]=0,x[1]=0,x[2]=0,x[3]=1,x}const We=e.create(),Gt=e.create(),Ct=e.create();function Wt(d,x,l){const h=l??new t(4),k=e.dot(d,x);return k<-.999999?(e.cross(Gt,d,We),e.len(We)<1e-6&&e.cross(Ct,d,We),e.normalize(We,We),i(We,Math.PI,h),h):k>.999999?(h[0]=0,h[1]=0,h[2]=0,h[3]=1,h):(e.cross(d,x,We),h[0]=We[0],h[1]=We[1],h[2]=We[2],h[3]=1+k,Dt(h,h))}const lt=new t(4),Lt=new t(4);function Tt(d,x,l,h,k,A){const L=A??new t(4);return te(d,h,k,lt),te(x,l,k,Lt),te(lt,Lt,2*k*(1-k),L),L}return{create:n,fromValues:r,set:s,fromAxisAngle:i,toAxisAngle:m,angle:v,multiply:F,mul:T,rotateX:R,rotateY:W,rotateZ:ie,slerp:te,inverse:se,conjugate:N,fromMat:Y,fromEuler:K,copy:ne,clone:he,add:me,subtract:ve,sub:ue,mulScalar:Ke,scale:Ie,divScalar:St,dot:st,lerp:qt,length:Me,len:Re,lengthSq:Ae,lenSq:jt,normalize:Dt,equalsApproximately:Vt,equals:ct,identity:Ut,rotationTo:Wt,sqlerp:Tt}}const xi=new Map;function $1(t){let e=xi.get(t);return e||(e=I1(t),xi.set(t,e)),e}function z1(t){function e(l,h,k,A){const L=new t(4);return l!==void 0&&(L[0]=l,h!==void 0&&(L[1]=h,k!==void 0&&(L[2]=k,A!==void 0&&(L[3]=A)))),L}const n=e;function r(l,h,k,A,L){const a=L??new t(4);return a[0]=l,a[1]=h,a[2]=k,a[3]=A,a}function s(l,h){const k=h??new t(4);return k[0]=Math.ceil(l[0]),k[1]=Math.ceil(l[1]),k[2]=Math.ceil(l[2]),k[3]=Math.ceil(l[3]),k}function i(l,h){const k=h??new t(4);return k[0]=Math.floor(l[0]),k[1]=Math.floor(l[1]),k[2]=Math.floor(l[2]),k[3]=Math.floor(l[3]),k}function m(l,h){const k=h??new t(4);return k[0]=Math.round(l[0]),k[1]=Math.round(l[1]),k[2]=Math.round(l[2]),k[3]=Math.round(l[3]),k}function v(l,h=0,k=1,A){const L=A??new t(4);return L[0]=Math.min(k,Math.max(h,l[0])),L[1]=Math.min(k,Math.max(h,l[1])),L[2]=Math.min(k,Math.max(h,l[2])),L[3]=Math.min(k,Math.max(h,l[3])),L}function F(l,h,k){const A=k??new t(4);return A[0]=l[0]+h[0],A[1]=l[1]+h[1],A[2]=l[2]+h[2],A[3]=l[3]+h[3],A}function T(l,h,k,A){const L=A??new t(4);return L[0]=l[0]+h[0]*k,L[1]=l[1]+h[1]*k,L[2]=l[2]+h[2]*k,L[3]=l[3]+h[3]*k,L}function R(l,h,k){const A=k??new t(4);return A[0]=l[0]-h[0],A[1]=l[1]-h[1],A[2]=l[2]-h[2],A[3]=l[3]-h[3],A}const W=R;function ie(l,h){return Math.abs(l[0]-h[0])<Fe&&Math.abs(l[1]-h[1])<Fe&&Math.abs(l[2]-h[2])<Fe&&Math.abs(l[3]-h[3])<Fe}function te(l,h){return l[0]===h[0]&&l[1]===h[1]&&l[2]===h[2]&&l[3]===h[3]}function se(l,h,k,A){const L=A??new t(4);return L[0]=l[0]+k*(h[0]-l[0]),L[1]=l[1]+k*(h[1]-l[1]),L[2]=l[2]+k*(h[2]-l[2]),L[3]=l[3]+k*(h[3]-l[3]),L}function N(l,h,k,A){const L=A??new t(4);return L[0]=l[0]+k[0]*(h[0]-l[0]),L[1]=l[1]+k[1]*(h[1]-l[1]),L[2]=l[2]+k[2]*(h[2]-l[2]),L[3]=l[3]+k[3]*(h[3]-l[3]),L}function Y(l,h,k){const A=k??new t(4);return A[0]=Math.max(l[0],h[0]),A[1]=Math.max(l[1],h[1]),A[2]=Math.max(l[2],h[2]),A[3]=Math.max(l[3],h[3]),A}function K(l,h,k){const A=k??new t(4);return A[0]=Math.min(l[0],h[0]),A[1]=Math.min(l[1],h[1]),A[2]=Math.min(l[2],h[2]),A[3]=Math.min(l[3],h[3]),A}function ne(l,h,k){const A=k??new t(4);return A[0]=l[0]*h,A[1]=l[1]*h,A[2]=l[2]*h,A[3]=l[3]*h,A}const he=ne;function me(l,h,k){const A=k??new t(4);return A[0]=l[0]/h,A[1]=l[1]/h,A[2]=l[2]/h,A[3]=l[3]/h,A}function ve(l,h){const k=h??new t(4);return k[0]=1/l[0],k[1]=1/l[1],k[2]=1/l[2],k[3]=1/l[3],k}const ue=ve;function Ke(l,h){return l[0]*h[0]+l[1]*h[1]+l[2]*h[2]+l[3]*h[3]}function Ie(l){const h=l[0],k=l[1],A=l[2],L=l[3];return Math.sqrt(h*h+k*k+A*A+L*L)}const St=Ie;function st(l){const h=l[0],k=l[1],A=l[2],L=l[3];return h*h+k*k+A*A+L*L}const qt=st;function Me(l,h){const k=l[0]-h[0],A=l[1]-h[1],L=l[2]-h[2],a=l[3]-h[3];return Math.sqrt(k*k+A*A+L*L+a*a)}const Re=Me;function Ae(l,h){const k=l[0]-h[0],A=l[1]-h[1],L=l[2]-h[2],a=l[3]-h[3];return k*k+A*A+L*L+a*a}const jt=Ae;function Dt(l,h){const k=h??new t(4),A=l[0],L=l[1],a=l[2],g=l[3],o=Math.sqrt(A*A+L*L+a*a+g*g);return o>1e-5?(k[0]=A/o,k[1]=L/o,k[2]=a/o,k[3]=g/o):(k[0]=0,k[1]=0,k[2]=0,k[3]=0),k}function Vt(l,h){const k=h??new t(4);return k[0]=-l[0],k[1]=-l[1],k[2]=-l[2],k[3]=-l[3],k}function ct(l,h){const k=h??new t(4);return k[0]=l[0],k[1]=l[1],k[2]=l[2],k[3]=l[3],k}const Ut=ct;function We(l,h,k){const A=k??new t(4);return A[0]=l[0]*h[0],A[1]=l[1]*h[1],A[2]=l[2]*h[2],A[3]=l[3]*h[3],A}const Gt=We;function Ct(l,h,k){const A=k??new t(4);return A[0]=l[0]/h[0],A[1]=l[1]/h[1],A[2]=l[2]/h[2],A[3]=l[3]/h[3],A}const Wt=Ct;function lt(l){const h=l??new t(4);return h[0]=0,h[1]=0,h[2]=0,h[3]=0,h}function Lt(l,h,k){const A=k??new t(4),L=l[0],a=l[1],g=l[2],o=l[3];return A[0]=h[0]*L+h[4]*a+h[8]*g+h[12]*o,A[1]=h[1]*L+h[5]*a+h[9]*g+h[13]*o,A[2]=h[2]*L+h[6]*a+h[10]*g+h[14]*o,A[3]=h[3]*L+h[7]*a+h[11]*g+h[15]*o,A}function Tt(l,h,k){const A=k??new t(4);return Dt(l,A),ne(A,h,A)}function d(l,h,k){const A=k??new t(4);return Ie(l)>h?Tt(l,h,A):ct(l,A)}function x(l,h,k){const A=k??new t(4);return se(l,h,.5,A)}return{create:e,fromValues:n,set:r,ceil:s,floor:i,round:m,clamp:v,add:F,addScaled:T,subtract:R,sub:W,equalsApproximately:ie,equals:te,lerp:se,lerpV:N,max:Y,min:K,mulScalar:ne,scale:he,divScalar:me,inverse:ve,invert:ue,dot:Ke,length:Ie,len:St,lengthSq:st,lenSq:qt,distance:Me,dist:Re,distanceSq:Ae,distSq:jt,normalize:Dt,negate:Vt,copy:ct,clone:Ut,multiply:We,mul:Gt,divide:Ct,div:Wt,zero:lt,transformMat4:Lt,setLength:Tt,truncate:d,midpoint:x}}const Ai=new Map;function O1(t){let e=Ai.get(t);return e||(e=z1(t),Ai.set(t,e)),e}function Va(t,e,n,r,s,i){return{mat3:T1(t),mat4:N1(e),quat:$1(n),vec2:go(r),vec3:$s(s),vec4:O1(i)}}const{mat3:_p,mat4:_n,quat:vp,vec2:yp,vec3:Dp,vec4:wp}=Va(Float32Array,Float32Array,Float32Array,Float32Array,Float32Array,Float32Array);Va(Float64Array,Float64Array,Float64Array,Float64Array,Float64Array,Float64Array);Va(F1,Array,Array,Array,Array,Array);const P1=t=>e=>(...n)=>(...r)=>{const s=t(n,r);return e(...s)},q1=t=>e=>(...n)=>(...r)=>e(...t(n,r));function V1(t){return!Array.isArray(t)}function _o(t){return Array.isArray(t)&&V1(t[0])}function L1(t){return Array.isArray(t)&&_o(t[0])}const Z1=t=>e=>(...n)=>t(e(...n)),$r=t=>(...e)=>(...n)=>t(...e.map(r=>r(...n))),Tn={from(t){return t},full(t){return()=>t},zeros(){return Tn.full(0)},ones(){return Tn.full(1)},assign(t,e){return(...n)=>e(...n)??t(...n)},map:Z1,mapN:$r,mapIndices(t){return e=>(...n)=>e(...t(n))},mask(t){return e=>(...n)=>t(...n)?e(...n):void 0},curry:P1(Gf),partial:q1(Pf),getAxis(t){const e=Lf(t);return n=>r=>Tn.partial(r)(...e(n))},add:$r(Mf),sub:$r(Nf),mul:$r(Oi),div:$r(If)},R1={...Tn,fromEager(t){return()=>t},fromValue(t){return()=>t},toEager(t){return t}},Ft={...Tn,fromEager(t){return e=>t==null?void 0:t[e]},fromValue(t){return _o(t)?Ft.fromEager(t):R1.fromValue(t)},toEager(t){return e=>fn(n=>t(n),e)},iota(){return t=>t},unit(t){return e=>t==e?1:0},slices(t,e){return n=>t<=n&&n<e},reduce(t,e,n){return r=>{let s=n;for(let i of r)s=e(s,t(i));return s}}},cn={...Tn,fromEager(t){return(e,n)=>{var r;return(r=t==null?void 0:t[e])==null?void 0:r[n]}},fromValue(t){return L1(t)?cn.fromEager(t):Ft.fromValue(t)},toEager(t){return(e,n)=>fn(r=>fn(s=>t(r,s),e),n)},getRow:Tn.getAxis(0),getCol:Tn.getAxis(1),I(){return(t,e)=>t==e?1:0},t(t){return cn.assign(cn.I(),(e,n)=>e==0&&n>0?t(n-1):void 0)},s(t){return cn.assign(cn.I(),(e,n)=>e==n&&n>0?t(n-1):void 0)},ts(t,e){return(n,r)=>n==0&&r==0?1:n==0?t(r-1):n==r?e(r-1):0},st(t,e){return cn.I()}},vn={..._n,adapt(t,e){return e=e??_n.identity(),e[3*1+0*4]=t[0*1+3*4],e[1*1+0*4]=t[1*1+3*4],e[2*1+0*4]=t[2*1+3*4],e[0*1+0*4]=t[3*1+3*4],e[3*1+1*4]=t[0*1+1*4],e[1*1+1*4]=t[1*1+1*4],e[2*1+1*4]=t[2*1+1*4],e[0*1+1*4]=t[3*1+1*4],e[3*1+2*4]=t[0*1+2*4],e[1*1+2*4]=t[1*1+2*4],e[2*1+2*4]=t[2*1+2*4],e[0*1+2*4]=t[3*1+2*4],e[3*1+3*4]=t[0*1+0*4],e[1*1+3*4]=t[1*1+0*4],e[2*1+3*4]=t[2*1+0*4],e[0*1+3*4]=t[3*1+0*4],e},translation(t,e){return e=e??_n.identity(),e[1*1+0*4]=t[0],e[2*1+0*4]=t[1],e[3*1+0*4]=t[2],e},translate(t,e,n){return n=n??_n.identity(),n[1*1+0*4]=t[1*1+0*4]+e[0],n[2*1+0*4]=t[2*1+0*4]+e[1],n[3*1+0*4]=t[3*1+0*4]+e[2],n},scaling(t,e){return e=e??_n.identity(),e[1*1+1*4]=t[0],e[2*1+2*4]=t[1],e[3*1+3*4]=t[2],e},scale(t,e,n){return n=n??_n.identity(),n[1*1+1*4]=t[1*1+1*4]*e[0],n[2*1+2*4]=t[2*1+2*4]*e[1],n[3*1+3*4]=t[3*1+3*4]*e[2],n},rotationX(t,e){const n=_n.rotationX(t);return vn.adapt(n,e)},rotationY(t,e){const n=_n.rotationY(t);return vn.adapt(n,e)},rotationZ(t,e){const n=_n.rotationZ(t);return vn.adapt(n,e)},rotateX(t,e,n){return vn.mul(t,vn.rotationX(e),n)},rotateY(t,e,n){return vn.mul(t,vn.rotationY(e),n)},rotateZ(t,e,n){return vn.mul(t,vn.rotationZ(e),n)}},bp=Ot.ZodError,kp={0:"point-list",1:"line-list",2:"triangle-list"},j1=Ot.number(),vo=Ot.array(Ot.number()),U1=Ot.array(Ot.array(Ot.number())),G1=j1,ws=vo.or(G1),W1=U1.or(ws),ga=vo.or(Ot.string()).transform(t=>Array.isArray(t)?t:Dd(t).gl()),yo=Ot.object({transform:W1.optional(),position:ws.optional(),size:ws.optional(),distance:ws.optional(),fill:ga.optional(),stroke:ga.optional(),color:ga.optional()}).transform(({transform:t,position:e,size:n,distance:r,fill:s,stroke:i,color:m})=>({transform:t!==void 0?cn.assign(cn.I(),cn.fromValue(t)):cn.ts(Ft.assign(Ft.zeros(),Ft.fromValue(e)),Ft.assign(Ft.ones(),Ft.fromValue(n))),distance:Ft.assign(Ft.ones(),Ft.fromValue(r)),fill:Ft.assign(Ft.ones(),Ft.fromValue(s??m)),stroke:Ft.assign(Ft.ones(),Ft.fromValue(i??m))})),Ma=t=>Ot.object({primitive:Ot.number().int().default(0),vertices:Ot.array(t),indices:Ot.array(Ot.number()).optional()}).transform(({primitive:e,vertices:n,indices:r})=>({primitive:e,vertices:n,indices:r??Vf(0,n.length)})),H1=t=>Ot.object({shape:Ma(t),layer:Ma(t)}),xp=Ma(yo),Ap=H1(yo),Y1=t=>({fromLazy(e){return fn(e,t)}}),X1=(t,e)=>({fromLazy(n){return fn(r=>fn(s=>n(r,s),e),t)}}),_a=Y1(4),J1=X1(4,4),Q1=t=>({transform:(t==null?void 0:t.map(({transform:e})=>J1.fromLazy(e)).flat(2))??[],distance:(t==null?void 0:t.map(({distance:e})=>_a.fromLazy(e)).flat(1))??[],fill:(t==null?void 0:t.map(({fill:e})=>_a.fromLazy(e)).flat(1))??[],stroke:(t==null?void 0:t.map(({stroke:e})=>_a.fromLazy(e)).flat(1))??[]}),Ep=(t,e,n)=>{const r={vertices:Q1(e==null?void 0:e.vertices),indices:(e==null?void 0:e.indices)??[]};return kh(t,{transform:{data:r.vertices.transform,type:Float32Array,numComponents:16},distance:{data:r.vertices.distance,type:Float32Array,numComponents:4},fill:{data:r.vertices.fill,type:Float32Array,numComponents:4},stroke:{data:r.vertices.stroke,type:Float32Array,numComponents:4},indices:{data:r.indices,type:Uint32Array}},n)};export{xp as B,sp as I,kp as P,lp as _,hp as a,vn as b,fp as c,dp as d,tp as e,kh as f,up as g,cp as h,op as i,Gf as j,Rt as k,ip as l,gp as m,bp as n,Ep as o,np as p,Dd as q,Vf as r,od as s,Ap as t,rp as x,ap as y};
