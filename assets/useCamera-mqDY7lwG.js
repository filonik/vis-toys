import{m as n}from"./_plugin-vue_export-helper-e2PNZJup.js";import{V as g,c as D}from"./index-8W2lkcdb.js";const v=(c,p)=>o=>Math.max(c,Math.min(o,p)),u=v(-100,-.1);function Y(c,p){const o=g({isDown:!1,position:c??[-1,0,0],origin:[0,0,0]});let s;const f={wheel:t=>{t.preventDefault();const e=t.deltaY/100;o.position[0]=u(o.position[0]+e)},pointerdown:t=>{o.isDown=!0,t.target.setPointerCapture(t.pointerId)},pointermove:t=>{if(!o.isDown)return;const e=t.target,r=[e.width,e.height],a=Math.min(...r),i=[+t.movementX*4/a,+t.movementY*4/a,0];if(t.altKey||t.metaKey){const m=-o.position[0]/4.8;o.origin[0]+=i[0]*m,o.origin[1]-=i[1]*m}else o.position[1]+=i[0],o.position[2]+=i[1]},pointerup:t=>{o.isDown=!1},touchstart:t=>{t.preventDefault()},touchmove:t=>{if(t.preventDefault(),t.targetTouches.length===2){const e=t.targetTouches[0],r=t.targetTouches[1];let a=Math.hypot(e.pageX-r.pageX,e.pageY-r.pageY);if(s!==void 0){const i=a/s;o.position[0]=u(o.position[0]*i)}s=a}},touchend:t=>{t.preventDefault(),s=void 0}},l=t=>(n.identity(t),n.translate(t,[0,0,o.position[0]],t),n.rotateY(t,o.position[2],t),n.rotateZ(t,o.position[1],t),n.translate(t,o.origin,t),t),h=D(()=>l(n.create()));return{listeners:f,transform:h,transformInplace:l}}export{Y as u};
